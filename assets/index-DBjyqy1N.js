(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}})();function Yp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Xm={exports:{}},ac={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT;function wA(){if(rT)return ac;rT=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,h){var m=null;if(h!==void 0&&(m=""+h),l.key!==void 0&&(m=""+l.key),"key"in l){h={};for(var y in l)y!=="key"&&(h[y]=l[y])}else h=l;return l=h.ref,{$$typeof:r,type:s,key:m,ref:l!==void 0?l:null,props:h}}return ac.Fragment=t,ac.jsx=n,ac.jsxs=n,ac}var sT;function bA(){return sT||(sT=1,Xm.exports=wA()),Xm.exports}var F=bA(),Wm={exports:{}},qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function SA(){if(aT)return qt;aT=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),m=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.iterator;function j(z){return z===null||typeof z!="object"?null:(z=O&&z[O]||z["@@iterator"],typeof z=="function"?z:null)}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,Q={};function at(z,st,gt){this.props=z,this.context=st,this.refs=Q,this.updater=gt||J}at.prototype.isReactComponent={},at.prototype.setState=function(z,st){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,st,"setState")},at.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function ut(){}ut.prototype=at.prototype;function ft(z,st,gt){this.props=z,this.context=st,this.refs=Q,this.updater=gt||J}var xt=ft.prototype=new ut;xt.constructor=ft,W(xt,at.prototype),xt.isPureReactComponent=!0;var kt=Array.isArray;function Dt(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function P(z,st,gt){var _t=gt.ref;return{$$typeof:r,type:z,key:st,ref:_t!==void 0?_t:null,props:gt}}function H(z,st){return P(z.type,st,z.props)}function U(z){return typeof z=="object"&&z!==null&&z.$$typeof===r}function q(z){var st={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(gt){return st[gt]})}var k=/\/+/g;function oe(z,st){return typeof z=="object"&&z!==null&&z.key!=null?q(""+z.key):st.toString(36)}function Je(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(Dt,Dt):(z.status="pending",z.then(function(st){z.status==="pending"&&(z.status="fulfilled",z.value=st)},function(st){z.status==="pending"&&(z.status="rejected",z.reason=st)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function rt(z,st,gt,_t,wt){var Et=typeof z;(Et==="undefined"||Et==="boolean")&&(z=null);var Ht=!1;if(z===null)Ht=!0;else switch(Et){case"bigint":case"string":case"number":Ht=!0;break;case"object":switch(z.$$typeof){case r:case t:Ht=!0;break;case A:return Ht=z._init,rt(Ht(z._payload),st,gt,_t,wt)}}if(Ht)return wt=wt(z),Ht=_t===""?"."+oe(z,0):_t,kt(wt)?(gt="",Ht!=null&&(gt=Ht.replace(k,"$&/")+"/"),rt(wt,st,gt,"",function(ur){return ur})):wt!=null&&(U(wt)&&(wt=H(wt,gt+(wt.key==null||z&&z.key===wt.key?"":(""+wt.key).replace(k,"$&/")+"/")+Ht)),st.push(wt)),1;Ht=0;var we=_t===""?".":_t+":";if(kt(z))for(var Re=0;Re<z.length;Re++)_t=z[Re],Et=we+oe(_t,Re),Ht+=rt(_t,st,gt,Et,wt);else if(Re=j(z),typeof Re=="function")for(z=Re.call(z),Re=0;!(_t=z.next()).done;)_t=_t.value,Et=we+oe(_t,Re++),Ht+=rt(_t,st,gt,Et,wt);else if(Et==="object"){if(typeof z.then=="function")return rt(Je(z),st,gt,_t,wt);throw st=String(z),Error("Objects are not valid as a React child (found: "+(st==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":st)+"). If you meant to render a collection of children, use an array instead.")}return Ht}function vt(z,st,gt){if(z==null)return z;var _t=[],wt=0;return rt(z,_t,"","",function(Et){return st.call(gt,Et,wt++)}),_t}function pt(z){if(z._status===-1){var st=z._result;st=st(),st.then(function(gt){(z._status===0||z._status===-1)&&(z._status=1,z._result=gt)},function(gt){(z._status===0||z._status===-1)&&(z._status=2,z._result=gt)}),z._status===-1&&(z._status=0,z._result=st)}if(z._status===1)return z._result.default;throw z._result}var te=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var st=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(st))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},bt={map:vt,forEach:function(z,st,gt){vt(z,function(){st.apply(this,arguments)},gt)},count:function(z){var st=0;return vt(z,function(){st++}),st},toArray:function(z){return vt(z,function(st){return st})||[]},only:function(z){if(!U(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return qt.Activity=C,qt.Children=bt,qt.Component=at,qt.Fragment=n,qt.Profiler=l,qt.PureComponent=ft,qt.StrictMode=s,qt.Suspense=v,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,qt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return D.H.useMemoCache(z)}},qt.cache=function(z){return function(){return z.apply(null,arguments)}},qt.cacheSignal=function(){return null},qt.cloneElement=function(z,st,gt){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var _t=W({},z.props),wt=z.key;if(st!=null)for(Et in st.key!==void 0&&(wt=""+st.key),st)!N.call(st,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&st.ref===void 0||(_t[Et]=st[Et]);var Et=arguments.length-2;if(Et===1)_t.children=gt;else if(1<Et){for(var Ht=Array(Et),we=0;we<Et;we++)Ht[we]=arguments[we+2];_t.children=Ht}return P(z.type,wt,_t)},qt.createContext=function(z){return z={$$typeof:m,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:h,_context:z},z},qt.createElement=function(z,st,gt){var _t,wt={},Et=null;if(st!=null)for(_t in st.key!==void 0&&(Et=""+st.key),st)N.call(st,_t)&&_t!=="key"&&_t!=="__self"&&_t!=="__source"&&(wt[_t]=st[_t]);var Ht=arguments.length-2;if(Ht===1)wt.children=gt;else if(1<Ht){for(var we=Array(Ht),Re=0;Re<Ht;Re++)we[Re]=arguments[Re+2];wt.children=we}if(z&&z.defaultProps)for(_t in Ht=z.defaultProps,Ht)wt[_t]===void 0&&(wt[_t]=Ht[_t]);return P(z,Et,wt)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(z){return{$$typeof:y,render:z}},qt.isValidElement=U,qt.lazy=function(z){return{$$typeof:A,_payload:{_status:-1,_result:z},_init:pt}},qt.memo=function(z,st){return{$$typeof:T,type:z,compare:st===void 0?null:st}},qt.startTransition=function(z){var st=D.T,gt={};D.T=gt;try{var _t=z(),wt=D.S;wt!==null&&wt(gt,_t),typeof _t=="object"&&_t!==null&&typeof _t.then=="function"&&_t.then(Dt,te)}catch(Et){te(Et)}finally{st!==null&&gt.types!==null&&(st.types=gt.types),D.T=st}},qt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},qt.use=function(z){return D.H.use(z)},qt.useActionState=function(z,st,gt){return D.H.useActionState(z,st,gt)},qt.useCallback=function(z,st){return D.H.useCallback(z,st)},qt.useContext=function(z){return D.H.useContext(z)},qt.useDebugValue=function(){},qt.useDeferredValue=function(z,st){return D.H.useDeferredValue(z,st)},qt.useEffect=function(z,st){return D.H.useEffect(z,st)},qt.useEffectEvent=function(z){return D.H.useEffectEvent(z)},qt.useId=function(){return D.H.useId()},qt.useImperativeHandle=function(z,st,gt){return D.H.useImperativeHandle(z,st,gt)},qt.useInsertionEffect=function(z,st){return D.H.useInsertionEffect(z,st)},qt.useLayoutEffect=function(z,st){return D.H.useLayoutEffect(z,st)},qt.useMemo=function(z,st){return D.H.useMemo(z,st)},qt.useOptimistic=function(z,st){return D.H.useOptimistic(z,st)},qt.useReducer=function(z,st,gt){return D.H.useReducer(z,st,gt)},qt.useRef=function(z){return D.H.useRef(z)},qt.useState=function(z){return D.H.useState(z)},qt.useSyncExternalStore=function(z,st,gt){return D.H.useSyncExternalStore(z,st,gt)},qt.useTransition=function(){return D.H.useTransition()},qt.version="19.2.0",qt}var oT;function Qp(){return oT||(oT=1,Wm.exports=SA()),Wm.exports}var K=Qp();const Ef=Yp(K);var Jm={exports:{}},oc={},tp={exports:{}},ep={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function AA(){return lT||(lT=1,(function(r){function t(rt,vt){var pt=rt.length;rt.push(vt);t:for(;0<pt;){var te=pt-1>>>1,bt=rt[te];if(0<l(bt,vt))rt[te]=vt,rt[pt]=bt,pt=te;else break t}}function n(rt){return rt.length===0?null:rt[0]}function s(rt){if(rt.length===0)return null;var vt=rt[0],pt=rt.pop();if(pt!==vt){rt[0]=pt;t:for(var te=0,bt=rt.length,z=bt>>>1;te<z;){var st=2*(te+1)-1,gt=rt[st],_t=st+1,wt=rt[_t];if(0>l(gt,pt))_t<bt&&0>l(wt,gt)?(rt[te]=wt,rt[_t]=pt,te=_t):(rt[te]=gt,rt[st]=pt,te=st);else if(_t<bt&&0>l(wt,pt))rt[te]=wt,rt[_t]=pt,te=_t;else break t}}return vt}function l(rt,vt){var pt=rt.sortIndex-vt.sortIndex;return pt!==0?pt:rt.id-vt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var m=Date,y=m.now();r.unstable_now=function(){return m.now()-y}}var v=[],T=[],A=1,C=null,O=3,j=!1,J=!1,W=!1,Q=!1,at=typeof setTimeout=="function"?setTimeout:null,ut=typeof clearTimeout=="function"?clearTimeout:null,ft=typeof setImmediate<"u"?setImmediate:null;function xt(rt){for(var vt=n(T);vt!==null;){if(vt.callback===null)s(T);else if(vt.startTime<=rt)s(T),vt.sortIndex=vt.expirationTime,t(v,vt);else break;vt=n(T)}}function kt(rt){if(W=!1,xt(rt),!J)if(n(v)!==null)J=!0,Dt||(Dt=!0,q());else{var vt=n(T);vt!==null&&Je(kt,vt.startTime-rt)}}var Dt=!1,D=-1,N=5,P=-1;function H(){return Q?!0:!(r.unstable_now()-P<N)}function U(){if(Q=!1,Dt){var rt=r.unstable_now();P=rt;var vt=!0;try{t:{J=!1,W&&(W=!1,ut(D),D=-1),j=!0;var pt=O;try{e:{for(xt(rt),C=n(v);C!==null&&!(C.expirationTime>rt&&H());){var te=C.callback;if(typeof te=="function"){C.callback=null,O=C.priorityLevel;var bt=te(C.expirationTime<=rt);if(rt=r.unstable_now(),typeof bt=="function"){C.callback=bt,xt(rt),vt=!0;break e}C===n(v)&&s(v),xt(rt)}else s(v);C=n(v)}if(C!==null)vt=!0;else{var z=n(T);z!==null&&Je(kt,z.startTime-rt),vt=!1}}break t}finally{C=null,O=pt,j=!1}vt=void 0}}finally{vt?q():Dt=!1}}}var q;if(typeof ft=="function")q=function(){ft(U)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,oe=k.port2;k.port1.onmessage=U,q=function(){oe.postMessage(null)}}else q=function(){at(U,0)};function Je(rt,vt){D=at(function(){rt(r.unstable_now())},vt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(rt){rt.callback=null},r.unstable_forceFrameRate=function(rt){0>rt||125<rt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<rt?Math.floor(1e3/rt):5},r.unstable_getCurrentPriorityLevel=function(){return O},r.unstable_next=function(rt){switch(O){case 1:case 2:case 3:var vt=3;break;default:vt=O}var pt=O;O=vt;try{return rt()}finally{O=pt}},r.unstable_requestPaint=function(){Q=!0},r.unstable_runWithPriority=function(rt,vt){switch(rt){case 1:case 2:case 3:case 4:case 5:break;default:rt=3}var pt=O;O=rt;try{return vt()}finally{O=pt}},r.unstable_scheduleCallback=function(rt,vt,pt){var te=r.unstable_now();switch(typeof pt=="object"&&pt!==null?(pt=pt.delay,pt=typeof pt=="number"&&0<pt?te+pt:te):pt=te,rt){case 1:var bt=-1;break;case 2:bt=250;break;case 5:bt=1073741823;break;case 4:bt=1e4;break;default:bt=5e3}return bt=pt+bt,rt={id:A++,callback:vt,priorityLevel:rt,startTime:pt,expirationTime:bt,sortIndex:-1},pt>te?(rt.sortIndex=pt,t(T,rt),n(v)===null&&rt===n(T)&&(W?(ut(D),D=-1):W=!0,Je(kt,pt-te))):(rt.sortIndex=bt,t(v,rt),J||j||(J=!0,Dt||(Dt=!0,q()))),rt},r.unstable_shouldYield=H,r.unstable_wrapCallback=function(rt){var vt=O;return function(){var pt=O;O=vt;try{return rt.apply(this,arguments)}finally{O=pt}}}})(ep)),ep}var uT;function RA(){return uT||(uT=1,tp.exports=AA()),tp.exports}var np={exports:{}},Bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function CA(){if(cT)return Bn;cT=1;var r=Qp();function t(v){var T="https://react.dev/errors/"+v;if(1<arguments.length){T+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)T+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+v+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(v,T,A){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:C==null?null:""+C,children:v,containerInfo:T,implementation:A}}var m=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,T){if(v==="font")return"";if(typeof T=="string")return T==="use-credentials"?T:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Bn.createPortal=function(v,T){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T||T.nodeType!==1&&T.nodeType!==9&&T.nodeType!==11)throw Error(t(299));return h(v,T,null,A)},Bn.flushSync=function(v){var T=m.T,A=s.p;try{if(m.T=null,s.p=2,v)return v()}finally{m.T=T,s.p=A,s.d.f()}},Bn.preconnect=function(v,T){typeof v=="string"&&(T?(T=T.crossOrigin,T=typeof T=="string"?T==="use-credentials"?T:"":void 0):T=null,s.d.C(v,T))},Bn.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},Bn.preinit=function(v,T){if(typeof v=="string"&&T&&typeof T.as=="string"){var A=T.as,C=y(A,T.crossOrigin),O=typeof T.integrity=="string"?T.integrity:void 0,j=typeof T.fetchPriority=="string"?T.fetchPriority:void 0;A==="style"?s.d.S(v,typeof T.precedence=="string"?T.precedence:void 0,{crossOrigin:C,integrity:O,fetchPriority:j}):A==="script"&&s.d.X(v,{crossOrigin:C,integrity:O,fetchPriority:j,nonce:typeof T.nonce=="string"?T.nonce:void 0})}},Bn.preinitModule=function(v,T){if(typeof v=="string")if(typeof T=="object"&&T!==null){if(T.as==null||T.as==="script"){var A=y(T.as,T.crossOrigin);s.d.M(v,{crossOrigin:A,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0})}}else T==null&&s.d.M(v)},Bn.preload=function(v,T){if(typeof v=="string"&&typeof T=="object"&&T!==null&&typeof T.as=="string"){var A=T.as,C=y(A,T.crossOrigin);s.d.L(v,A,{crossOrigin:C,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0,type:typeof T.type=="string"?T.type:void 0,fetchPriority:typeof T.fetchPriority=="string"?T.fetchPriority:void 0,referrerPolicy:typeof T.referrerPolicy=="string"?T.referrerPolicy:void 0,imageSrcSet:typeof T.imageSrcSet=="string"?T.imageSrcSet:void 0,imageSizes:typeof T.imageSizes=="string"?T.imageSizes:void 0,media:typeof T.media=="string"?T.media:void 0})}},Bn.preloadModule=function(v,T){if(typeof v=="string")if(T){var A=y(T.as,T.crossOrigin);s.d.m(v,{as:typeof T.as=="string"&&T.as!=="script"?T.as:void 0,crossOrigin:A,integrity:typeof T.integrity=="string"?T.integrity:void 0})}else s.d.m(v)},Bn.requestFormReset=function(v){s.d.r(v)},Bn.unstable_batchedUpdates=function(v,T){return v(T)},Bn.useFormState=function(v,T,A){return m.H.useFormState(v,T,A)},Bn.useFormStatus=function(){return m.H.useHostTransitionStatus()},Bn.version="19.2.0",Bn}var hT;function e0(){if(hT)return np.exports;hT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),np.exports=CA(),np.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function IA(){if(fT)return oc;fT=1;var r=RA(),t=Qp(),n=e0();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var i=e,o=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(o=i.return),e=i.return;while(e)}return i.tag===3?o:null}function m(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function y(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function v(e){if(h(e)!==e)throw Error(s(188))}function T(e){var i=e.alternate;if(!i){if(i=h(e),i===null)throw Error(s(188));return i!==e?null:e}for(var o=e,c=i;;){var p=o.return;if(p===null)break;var g=p.alternate;if(g===null){if(c=p.return,c!==null){o=c;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===o)return v(p),e;if(g===c)return v(p),i;g=g.sibling}throw Error(s(188))}if(o.return!==c.return)o=p,c=g;else{for(var b=!1,I=p.child;I;){if(I===o){b=!0,o=p,c=g;break}if(I===c){b=!0,c=p,o=g;break}I=I.sibling}if(!b){for(I=g.child;I;){if(I===o){b=!0,o=g,c=p;break}if(I===c){b=!0,c=g,o=p;break}I=I.sibling}if(!b)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?e:i}function A(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=A(e),i!==null)return i;e=e.sibling}return null}var C=Object.assign,O=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),J=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),at=Symbol.for("react.profiler"),ut=Symbol.for("react.consumer"),ft=Symbol.for("react.context"),xt=Symbol.for("react.forward_ref"),kt=Symbol.for("react.suspense"),Dt=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(e){return e===null||typeof e!="object"?null:(e=U&&e[U]||e["@@iterator"],typeof e=="function"?e:null)}var k=Symbol.for("react.client.reference");function oe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===k?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case at:return"Profiler";case Q:return"StrictMode";case kt:return"Suspense";case Dt:return"SuspenseList";case P:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case J:return"Portal";case ft:return e.displayName||"Context";case ut:return(e._context.displayName||"Context")+".Consumer";case xt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return i=e.displayName||null,i!==null?i:oe(e.type)||"Memo";case N:i=e._payload,e=e._init;try{return oe(e(i))}catch{}}return null}var Je=Array.isArray,rt=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt={pending:!1,data:null,method:null,action:null},te=[],bt=-1;function z(e){return{current:e}}function st(e){0>bt||(e.current=te[bt],te[bt]=null,bt--)}function gt(e,i){bt++,te[bt]=e.current,e.current=i}var _t=z(null),wt=z(null),Et=z(null),Ht=z(null);function we(e,i){switch(gt(Et,i),gt(wt,e),gt(_t,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Cv(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Cv(i),e=Iv(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}st(_t),gt(_t,e)}function Re(){st(_t),st(wt),st(Et)}function ur(e){e.memoizedState!==null&&gt(Ht,e);var i=_t.current,o=Iv(i,e.type);i!==o&&(gt(wt,e),gt(_t,o))}function Or(e){wt.current===e&&(st(_t),st(wt)),Ht.current===e&&(st(Ht),nc._currentValue=pt)}var zi,Lr;function Bi(e){if(zi===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);zi=i&&i[1]||"",Lr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zi+e+Lr}var Qs=!1;function Nr(e,i){if(!e||Qs)return"";Qs=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(it){var et=it}Reflect.construct(e,[],ht)}else{try{ht.call()}catch(it){et=it}e.call(ht.prototype)}}else{try{throw Error()}catch(it){et=it}(ht=e())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(it){if(it&&et&&typeof it.stack=="string")return[it.stack,et.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),b=g[0],I=g[1];if(b&&I){var V=b.split(`
`),X=I.split(`
`);for(p=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(c===V.length||p===X.length)for(c=V.length-1,p=X.length-1;1<=c&&0<=p&&V[c]!==X[p];)p--;for(;1<=c&&0<=p;c--,p--)if(V[c]!==X[p]){if(c!==1||p!==1)do if(c--,p--,0>p||V[c]!==X[p]){var ot=`
`+V[c].replace(" at new "," at ");return e.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",e.displayName)),ot}while(1<=c&&0<=p);break}}}finally{Qs=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?Bi(o):""}function fs(e,i){switch(e.tag){case 26:case 27:case 5:return Bi(e.type);case 16:return Bi("Lazy");case 13:return e.child!==i&&i!==null?Bi("Suspense Fallback"):Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 15:return Nr(e.type,!1);case 11:return Nr(e.type.render,!1);case 1:return Nr(e.type,!0);case 31:return Bi("Activity");default:return""}}function Pr(e){try{var i="",o=null;do i+=fs(e,o),o=e,e=e.return;while(e);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Fe=Object.prototype.hasOwnProperty,Ge=r.unstable_scheduleCallback,ji=r.unstable_cancelCallback,ol=r.unstable_shouldYield,no=r.unstable_requestPaint,Cn=r.unstable_now,ds=r.unstable_getCurrentPriorityLevel,ms=r.unstable_ImmediatePriority,$s=r.unstable_UserBlockingPriority,cr=r.unstable_NormalPriority,Eu=r.unstable_LowPriority,io=r.unstable_IdlePriority,ro=r.log,ll=r.unstable_setDisableYieldValue,Jn=null,tn=null;function Gn(e){if(typeof ro=="function"&&ll(e),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(Jn,e)}catch{}}var Ve=Math.clz32?Math.clz32:ul,Mr=Math.log,Xs=Math.LN2;function ul(e){return e>>>=0,e===0?32:31-(Mr(e)/Xs|0)|0}var vi=256,Dr=262144,Ue=4194304;function Hi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qi(e,i,o){var c=e.pendingLanes;if(c===0)return 0;var p=0,g=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var I=c&134217727;return I!==0?(c=I&~g,c!==0?p=Hi(c):(b&=I,b!==0?p=Hi(b):o||(o=I&~e,o!==0&&(p=Hi(o))))):(I=c&~g,I!==0?p=Hi(I):b!==0?p=Hi(b):o||(o=c&~e,o!==0&&(p=Hi(o)))),p===0?0:i!==0&&i!==p&&(i&g)===0&&(g=p&-p,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:p}function Ti(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function wu(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cl(){var e=Ue;return Ue<<=1,(Ue&62914560)===0&&(Ue=4194304),e}function Fi(e){for(var i=[],o=0;31>o;o++)i.push(e);return i}function hr(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function bu(e,i,o,c,p,g){var b=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var I=e.entanglements,V=e.expirationTimes,X=e.hiddenUpdates;for(o=b&~o;0<o;){var ot=31-Ve(o),ht=1<<ot;I[ot]=0,V[ot]=-1;var et=X[ot];if(et!==null)for(X[ot]=null,ot=0;ot<et.length;ot++){var it=et[ot];it!==null&&(it.lane&=-536870913)}o&=~ht}c!==0&&ps(e,c,0),g!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=g&~(b&~i))}function ps(e,i,o){e.pendingLanes|=i,e.suspendedLanes&=~i;var c=31-Ve(i);e.entangledLanes|=i,e.entanglements[c]=e.entanglements[c]|1073741824|o&261930}function so(e,i){var o=e.entangledLanes|=i;for(e=e.entanglements;o;){var c=31-Ve(o),p=1<<c;p&i|e[c]&i&&(e[c]|=i),o&=~p}}function ao(e,i){var o=i&-i;return o=(o&42)!==0?1:yn(o),(o&(e.suspendedLanes|i))!==0?0:o}function yn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ct(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function oo(){var e=vt.p;return e!==0?e:(e=window.event,e===void 0?32:Xv(e.type))}function ti(e,i){var o=vt.p;try{return vt.p=e,i()}finally{vt.p=o}}var ei=Math.random().toString(36).slice(2),ze="__reactFiber$"+ei,Ze="__reactProps$"+ei,Ei="__reactContainer$"+ei,wi="__reactEvents$"+ei,hl="__reactListeners$"+ei,fl="__reactHandles$"+ei,dl="__reactResources$"+ei,Gi="__reactMarker$"+ei;function Ws(e){delete e[ze],delete e[Ze],delete e[wi],delete e[hl],delete e[fl]}function bi(e){var i=e[ze];if(i)return i;for(var o=e.parentNode;o;){if(i=o[Ei]||o[ze]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(e=Dv(e);e!==null;){if(o=e[ze])return o;e=Dv(e)}return i}e=o,o=e.parentNode}return null}function ni(e){if(e=e[ze]||e[Ei]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function vn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Zi(e){var i=e[dl];return i||(i=e[dl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ke(e){e[Gi]=!0}var lo=new Set,uo={};function Ki(e,i){ii(e,i),ii(e+"Capture",i)}function ii(e,i){for(uo[e]=i,e=0;e<i.length;e++)lo.add(i[e])}var fr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Js={},ta={};function kr(e){return Fe.call(ta,e)?!0:Fe.call(Js,e)?!1:fr.test(e)?ta[e]=!0:(Js[e]=!0,!1)}function Qt(e,i,o){if(kr(i))if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+o)}}function $t(e,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+o)}}function Ne(e,i,o,c){if(c===null)e.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(i,o,""+c)}}function Pe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zn(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function gs(e,i,o){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,g=c.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return p.call(this)},set:function(b){o=""+b,g.call(this,b)}}),Object.defineProperty(e,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function St(e){if(!e._valueTracker){var i=Zn(e)?"checked":"value";e._valueTracker=gs(e,i,""+e[i])}}function ye(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return e&&(c=Zn(e)?e.checked?"true":"false":e.value),e=c,e!==o?(i.setValue(e),!0):!1}function ri(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Yi=/[\n"\\]/g;function Ce(e){return e.replace(Yi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ea(e,i,o,c,p,g,b,I){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),i!=null?b==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Pe(i)):e.value!==""+Pe(i)&&(e.value=""+Pe(i)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),i!=null?Si(e,b,Pe(i)):o!=null?Si(e,b,Pe(o)):c!=null&&e.removeAttribute("value"),p==null&&g!=null&&(e.defaultChecked=!!g),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?e.name=""+Pe(I):e.removeAttribute("name")}function _s(e,i,o,c,p,g,b,I){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){St(e);return}o=o!=null?""+Pe(o):"",i=i!=null?""+Pe(i):o,I||i===e.value||(e.value=i),e.defaultValue=i}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=I?e.checked:!!c,e.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),St(e)}function Si(e,i,o){i==="number"&&ri(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function ve(e,i,o,c){if(e=e.options,i){i={};for(var p=0;p<o.length;p++)i["$"+o[p]]=!0;for(o=0;o<e.length;o++)p=i.hasOwnProperty("$"+e[o].value),e[o].selected!==p&&(e[o].selected=p),p&&c&&(e[o].defaultSelected=!0)}else{for(o=""+Pe(o),i=null,p=0;p<e.length;p++){if(e[p].value===o){e[p].selected=!0,c&&(e[p].defaultSelected=!0);return}i!==null||e[p].disabled||(i=e[p])}i!==null&&(i.selected=!0)}}function Qi(e,i,o){if(i!=null&&(i=""+Pe(i),i!==e.value&&(e.value=i),o==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=o!=null?""+Pe(o):""}function si(e,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(s(92));if(Je(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=Pe(i),e.defaultValue=o,c=e.textContent,c===o&&c!==""&&c!==null&&(e.value=c),St(e)}function sn(e,i){if(i){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=i;return}}e.textContent=i}var na=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dr(e,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":c?e.setProperty(i,o):typeof o!="number"||o===0||na.has(i)?i==="float"?e.cssFloat=o:e[i]=(""+o).trim():e[i]=o+"px"}function ys(e,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var p in i)c=i[p],i.hasOwnProperty(p)&&o[p]!==c&&dr(e,p,c)}else for(var g in i)i.hasOwnProperty(g)&&dr(e,g,i[g])}function Vr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$i=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ur(e){return $i.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Mn(){}var ia=null;function Dn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zr=null,Mt=null;function Tn(e){var i=ni(e);if(i&&(e=i.stateNode)){var o=e[Ze]||null;t:switch(e=i.stateNode,i.type){case"input":if(ea(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ce(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==e&&c.form===e.form){var p=c[Ze]||null;if(!p)throw Error(s(90));ea(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===e.form&&ye(c)}break t;case"textarea":Qi(e,o.value,o.defaultValue);break t;case"select":i=o.value,i!=null&&ve(e,!!o.multiple,i,!1)}}}var he=!1;function mr(e,i,o){if(he)return e(i,o);he=!0;try{var c=e(i);return c}finally{if(he=!1,(zr!==null||Mt!==null)&&(Lh(),zr&&(i=zr,e=Mt,Mt=zr=null,Tn(i),e)))for(i=0;i<e.length;i++)Tn(e[i])}}function Kn(e,i){var o=e.stateNode;if(o===null)return null;var c=o[Ze]||null;if(c===null)return null;o=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pr=!1;if(kn)try{var ee={};Object.defineProperty(ee,"passive",{get:function(){pr=!0}}),window.addEventListener("test",ee,ee),window.removeEventListener("test",ee,ee)}catch{pr=!1}var ai=null,gr=null,Me=null;function Ai(){if(Me)return Me;var e,i=gr,o=i.length,c,p="value"in ai?ai.value:ai.textContent,g=p.length;for(e=0;e<o&&i[e]===p[e];e++);var b=o-e;for(c=1;c<=b&&i[o-c]===p[g-c];c++);return Me=p.slice(e,1<c?1-c:void 0)}function Br(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Xi(){return!0}function Ri(){return!1}function an(e){function i(o,c,p,g,b){this._reactName=o,this._targetInst=p,this.type=c,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var I in e)e.hasOwnProperty(I)&&(o=e[I],this[I]=o?o(g):g[I]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Xi:Ri,this.isPropagationStopped=Ri,this}return C(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),i}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wi=an(Ci),_r=C({},Ci,{view:0,detail:0}),Yt=an(_r),jr,En,Vn,Ts=C({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vn&&(Vn&&e.type==="mousemove"?(jr=e.screenX-Vn.screenX,En=e.screenY-Vn.screenY):En=jr=0,Vn=e),jr)},movementY:function(e){return"movementY"in e?e.movementY:En}}),co=an(Ts),yr=C({},Ts,{dataTransfer:0}),ml=an(yr),ho=C({},_r,{relatedTarget:0}),Es=an(ho),fo=C({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),ra=an(fo),sa=C({},Ci,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yn=an(sa),pl=C({},Ci,{data:0}),Ii=an(pl),xi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},po={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aa(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=po[e])?!!i[e]:!1}function Hr(){return aa}var wn=C({},_r,{key:function(e){if(e.key){var i=xi[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Br(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hr,charCode:function(e){return e.type==="keypress"?Br(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Br(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),go=an(wn),gl=C({},Ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vr=an(gl),f=C({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hr}),E=an(f),S=C({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=an(S),Y=C({},Ts,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nt=an(Y),yt=C({},Ci,{newState:0,oldState:0}),zt=an(yt),le=[9,13,27,32],ue=kn&&"CompositionEvent"in window,Ie=null;kn&&"documentMode"in document&&(Ie=document.documentMode);var oi=kn&&"TextEvent"in window&&!Ie,li=kn&&(!ue||Ie&&8<Ie&&11>=Ie),Qn=" ",Oi=!1;function ws(e,i){switch(e){case"keyup":return le.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bs(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var oa=!1;function Li(e,i){switch(e){case"compositionend":return bs(i);case"keypress":return i.which!==32?null:(Oi=!0,Qn);case"textInput":return e=i.data,e===Qn&&Oi?null:e;default:return null}}function la(e,i){if(oa)return e==="compositionend"||!ue&&ws(e,i)?(e=Ai(),Me=gr=ai=null,oa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return li&&i.locale!=="ko"?null:i.data;default:return null}}var pd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ji(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!pd[e.type]:i==="textarea"}function Yc(e,i,o,c){zr?Mt?Mt.push(c):Mt=[c]:zr=c,i=Uh(i,"onChange"),0<i.length&&(o=new Wi("onChange","change",null,o,c),e.push({event:o,listeners:i}))}var tr=null,_o=null;function yo(e){Ev(e,0)}function vo(e){var i=vn(e);if(ye(i))return e}function To(e,i){if(e==="change")return i}var Qc=!1;if(kn){var er;if(kn){var ua="oninput"in document;if(!ua){var $c=document.createElement("div");$c.setAttribute("oninput","return;"),ua=typeof $c.oninput=="function"}er=ua}else er=!1;Qc=er&&(!document.documentMode||9<document.documentMode)}function _l(){tr&&(tr.detachEvent("onpropertychange",Xc),_o=tr=null)}function Xc(e){if(e.propertyName==="value"&&vo(_o)){var i=[];Yc(i,_o,e,Dn(e)),mr(yo,i)}}function Tr(e,i,o){e==="focusin"?(_l(),tr=i,_o=o,tr.attachEvent("onpropertychange",Xc)):e==="focusout"&&_l()}function gd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vo(_o)}function ca(e,i){if(e==="click")return vo(i)}function _d(e,i){if(e==="input"||e==="change")return vo(i)}function Er(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var bn=typeof Object.is=="function"?Object.is:Er;function ha(e,i){if(bn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var o=Object.keys(e),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var p=o[c];if(!Fe.call(i,p)||!bn(e[p],i[p]))return!1}return!0}function yl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Eo(e,i){var o=yl(e);e=0;for(var c;o;){if(o.nodeType===3){if(c=e+o.textContent.length,e<=i&&c>=i)return{node:o,offset:i-e};e=c}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=yl(o)}}function vl(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?vl(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function wo(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=ri(e.document);i instanceof e.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)e=i.contentWindow;else break;i=ri(e.document)}return i}function qr(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Tl=kn&&"documentMode"in document&&11>=document.documentMode,Fr=null,El=null,bo=null,fa=!1;function Wc(e,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;fa||Fr==null||Fr!==ri(c)||(c=Fr,"selectionStart"in c&&qr(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),bo&&ha(bo,c)||(bo=c,c=Uh(El,"onSelect"),0<c.length&&(i=new Wi("onSelect","select",null,i,o),e.push({event:i,listeners:c}),i.target=Fr)))}function Gr(e,i){var o={};return o[e.toLowerCase()]=i.toLowerCase(),o["Webkit"+e]="webkit"+i,o["Moz"+e]="moz"+i,o}var da={animationend:Gr("Animation","AnimationEnd"),animationiteration:Gr("Animation","AnimationIteration"),animationstart:Gr("Animation","AnimationStart"),transitionrun:Gr("Transition","TransitionRun"),transitionstart:Gr("Transition","TransitionStart"),transitioncancel:Gr("Transition","TransitionCancel"),transitionend:Gr("Transition","TransitionEnd")},wl={},Jc={};kn&&(Jc=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function Sn(e){if(wl[e])return wl[e];if(!da[e])return e;var i=da[e],o;for(o in i)if(i.hasOwnProperty(o)&&o in Jc)return wl[e]=i[o];return e}var So=Sn("animationend"),th=Sn("animationiteration"),Ao=Sn("animationstart"),yd=Sn("transitionrun"),eh=Sn("transitionstart"),vd=Sn("transitioncancel"),ma=Sn("transitionend"),nh=new Map,Zr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zr.push("scrollEnd");function ui(e,i){nh.set(e,i),Ki(i,[e])}var Ro=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ci=[],Un=0,bl=0;function Co(){for(var e=Un,i=bl=Un=0;i<e;){var o=ci[i];ci[i++]=null;var c=ci[i];ci[i++]=null;var p=ci[i];ci[i++]=null;var g=ci[i];if(ci[i++]=null,c!==null&&p!==null){var b=c.pending;b===null?p.next=p:(p.next=b.next,b.next=p),c.pending=p}g!==0&&pa(o,p,g)}}function Kr(e,i,o,c){ci[Un++]=e,ci[Un++]=i,ci[Un++]=o,ci[Un++]=c,bl|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Su(e,i,o,c){return Kr(e,i,o,c),Io(e)}function nr(e,i){return Kr(e,null,null,i),Io(e)}function pa(e,i,o){e.lanes|=o;var c=e.alternate;c!==null&&(c.lanes|=o);for(var p=!1,g=e.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(p=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,p&&i!==null&&(p=31-Ve(o),e=g.hiddenUpdates,c=e[p],c===null?e[p]=[i]:c.push(i),i.lane=o|536870912),g):null}function Io(e){if(50<Qu)throw Qu=0,Em=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Ss={};function Td(e,i,o,c){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(e,i,o,c){return new Td(e,i,o,c)}function Sl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ir(e,i){var o=e.alternate;return o===null?(o=zn(e.tag,i,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=i,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,i=e.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Au(e,i){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,i=o.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function xo(e,i,o,c,p,g){var b=0;if(c=e,typeof e=="function")Sl(e)&&(b=1);else if(typeof e=="string")b=cA(e,o,_t.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case P:return e=zn(31,o,i,p),e.elementType=P,e.lanes=g,e;case W:return As(o.children,p,g,i);case Q:b=8,p|=24;break;case at:return e=zn(12,o,i,p|2),e.elementType=at,e.lanes=g,e;case kt:return e=zn(13,o,i,p),e.elementType=kt,e.lanes=g,e;case Dt:return e=zn(19,o,i,p),e.elementType=Dt,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ft:b=10;break t;case ut:b=9;break t;case xt:b=11;break t;case D:b=14;break t;case N:b=16,c=null;break t}b=29,o=Error(s(130,e===null?"null":typeof e,"")),c=null}return i=zn(b,o,i,p),i.elementType=e,i.type=c,i.lanes=g,i}function As(e,i,o,c){return e=zn(7,e,c,i),e.lanes=o,e}function Al(e,i,o){return e=zn(6,e,null,i),e.lanes=o,e}function Ru(e){var i=zn(18,null,null,0);return i.stateNode=e,i}function Cu(e,i,o){return i=zn(4,e.children!==null?e.children:[],e.key,i),i.lanes=o,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var a=new WeakMap;function u(e,i){if(typeof e=="object"&&e!==null){var o=a.get(e);return o!==void 0?o:(i={value:e,source:i,stack:Pr(i)},a.set(e,i),i)}return{value:e,source:i,stack:Pr(i)}}var d=[],_=0,w=null,R=0,M=[],Z=0,tt=null,ct=1,Tt="";function Lt(e,i){d[_++]=R,d[_++]=w,w=e,R=i}function Zt(e,i,o){M[Z++]=ct,M[Z++]=Tt,M[Z++]=tt,tt=e;var c=ct;e=Tt;var p=32-Ve(c)-1;c&=~(1<<p),o+=1;var g=32-Ve(i)+p;if(30<g){var b=p-p%5;g=(c&(1<<b)-1).toString(32),c>>=b,p-=b,ct=1<<32-Ve(i)+p|o<<p|c,Tt=g+e}else ct=1<<g|o<<p|c,Tt=e}function pn(e){e.return!==null&&(Lt(e,1),Zt(e,1,0))}function Ye(e){for(;e===w;)w=d[--_],d[_]=null,R=d[--_],d[_]=null;for(;e===tt;)tt=M[--Z],M[Z]=null,Tt=M[--Z],M[Z]=null,ct=M[--Z],M[Z]=null}function $n(e,i){M[Z++]=ct,M[Z++]=Tt,M[Z++]=tt,ct=i.id,Tt=i.overflow,tt=e}var fe=null,de=null,Xt=!1,Yr=null,hi=!1,Rl=Error(s(519));function Qr(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oo(u(i,e)),Rl}function Iu(e){var i=e.stateNode,o=e.type,c=e.memoizedProps;switch(i[ze]=e,i[Ze]=c,o){case"dialog":Jt("cancel",i),Jt("close",i);break;case"iframe":case"object":case"embed":Jt("load",i);break;case"video":case"audio":for(o=0;o<Xu.length;o++)Jt(Xu[o],i);break;case"source":Jt("error",i);break;case"img":case"image":case"link":Jt("error",i),Jt("load",i);break;case"details":Jt("toggle",i);break;case"input":Jt("invalid",i),_s(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Jt("invalid",i);break;case"textarea":Jt("invalid",i),si(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||Av(i.textContent,o)?(c.popover!=null&&(Jt("beforetoggle",i),Jt("toggle",i)),c.onScroll!=null&&Jt("scroll",i),c.onScrollEnd!=null&&Jt("scrollend",i),c.onClick!=null&&(i.onclick=Mn),i=!0):i=!1,i||Qr(e,!0)}function Be(e){for(fe=e.return;fe;)switch(fe.tag){case 5:case 31:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:fe=fe.return}}function wr(e){if(e!==fe)return!1;if(!Xt)return Be(e),Xt=!0,!1;var i=e.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||km(e.type,e.memoizedProps)),o=!o),o&&de&&Qr(e),Be(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));de=Mv(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));de=Mv(e)}else i===27?(i=de,xa(e.type)?(e=jm,jm=null,de=e):de=i):de=fe?sr(e.stateNode.nextSibling):null;return!0}function Rs(){de=fe=null,Xt=!1}function xu(){var e=Yr;return e!==null&&(pi===null?pi=e:pi.push.apply(pi,e),Yr=null),e}function Oo(e){Yr===null?Yr=[e]:Yr.push(e)}var Lo=z(null),$r=null,br=null;function ga(e,i,o){gt(Lo,i._currentValue),i._currentValue=o}function Cs(e){e._currentValue=Lo.current,st(Lo)}function Ed(e,i,o){for(;e!==null;){var c=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),e===o)break;e=e.return}}function wd(e,i,o,c){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var g=p.dependencies;if(g!==null){var b=p.child;g=g.firstContext;t:for(;g!==null;){var I=g;g=p;for(var V=0;V<i.length;V++)if(I.context===i[V]){g.lanes|=o,I=g.alternate,I!==null&&(I.lanes|=o),Ed(g.return,o,e),c||(b=null);break t}g=I.next}}else if(p.tag===18){if(b=p.return,b===null)throw Error(s(341));b.lanes|=o,g=b.alternate,g!==null&&(g.lanes|=o),Ed(b,o,e),b=null}else b=p.child;if(b!==null)b.return=p;else for(b=p;b!==null;){if(b===e){b=null;break}if(p=b.sibling,p!==null){p.return=b.return,b=p;break}b=b.return}p=b}}function Cl(e,i,o,c){e=null;for(var p=i,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var b=p.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var I=p.type;bn(p.pendingProps.value,b.value)||(e!==null?e.push(I):e=[I])}}else if(p===Ht.current){if(b=p.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(nc):e=[nc])}p=p.return}e!==null&&wd(i,e,o,c),i.flags|=262144}function ih(e){for(e=e.firstContext;e!==null;){if(!bn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function No(e){$r=e,br=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function In(e){return c_($r,e)}function rh(e,i){return $r===null&&No(e),c_(e,i)}function c_(e,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},br===null){if(e===null)throw Error(s(308));br=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else br=br.next=i;return o}var aS=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(o,c){e.push(c)}};this.abort=function(){i.aborted=!0,e.forEach(function(o){return o()})}},oS=r.unstable_scheduleCallback,lS=r.unstable_NormalPriority,on={$$typeof:ft,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bd(){return{controller:new aS,data:new Map,refCount:0}}function Ou(e){e.refCount--,e.refCount===0&&oS(lS,function(){e.controller.abort()})}var Lu=null,Sd=0,Il=0,xl=null;function uS(e,i){if(Lu===null){var o=Lu=[];Sd=0,Il=Cm(),xl={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Sd++,i.then(h_,h_),i}function h_(){if(--Sd===0&&Lu!==null){xl!==null&&(xl.status="fulfilled");var e=Lu;Lu=null,Il=0,xl=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function cS(e,i){var o=[],c={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return e.then(function(){c.status="fulfilled",c.value=i;for(var p=0;p<o.length;p++)(0,o[p])(i)},function(p){for(c.status="rejected",c.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),c}var f_=rt.S;rt.S=function(e,i){Qy=Cn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&uS(e,i),f_!==null&&f_(e,i)};var Po=z(null);function Ad(){var e=Po.current;return e!==null?e:xe.pooledCache}function sh(e,i){i===null?gt(Po,Po.current):gt(Po,i.pool)}function d_(){var e=Ad();return e===null?null:{parent:on._currentValue,pool:e}}var Ol=Error(s(460)),Rd=Error(s(474)),ah=Error(s(542)),oh={then:function(){}};function m_(e){return e=e.status,e==="fulfilled"||e==="rejected"}function p_(e,i,o){switch(o=e[o],o===void 0?e.push(i):o!==i&&(i.then(Mn,Mn),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,__(e),e;default:if(typeof i.status=="string")i.then(Mn,Mn);else{if(e=xe,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(c){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=c}},function(c){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,__(e),e}throw Do=i,Ol}}function Mo(e){try{var i=e._init;return i(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Do=o,Ol):o}}var Do=null;function g_(){if(Do===null)throw Error(s(459));var e=Do;return Do=null,e}function __(e){if(e===Ol||e===ah)throw Error(s(483))}var Ll=null,Nu=0;function lh(e){var i=Nu;return Nu+=1,Ll===null&&(Ll=[]),p_(Ll,e,i)}function Pu(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function uh(e,i){throw i.$$typeof===O?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function y_(e){function i(G,B){if(e){var $=G.deletions;$===null?(G.deletions=[B],G.flags|=16):$.push(B)}}function o(G,B){if(!e)return null;for(;B!==null;)i(G,B),B=B.sibling;return null}function c(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function p(G,B){return G=ir(G,B),G.index=0,G.sibling=null,G}function g(G,B,$){return G.index=$,e?($=G.alternate,$!==null?($=$.index,$<B?(G.flags|=67108866,B):$):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function b(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function I(G,B,$,lt){return B===null||B.tag!==6?(B=Al($,G.mode,lt),B.return=G,B):(B=p(B,$),B.return=G,B)}function V(G,B,$,lt){var Nt=$.type;return Nt===W?ot(G,B,$.props.children,lt,$.key):B!==null&&(B.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===N&&Mo(Nt)===B.type)?(B=p(B,$.props),Pu(B,$),B.return=G,B):(B=xo($.type,$.key,$.props,null,G.mode,lt),Pu(B,$),B.return=G,B)}function X(G,B,$,lt){return B===null||B.tag!==4||B.stateNode.containerInfo!==$.containerInfo||B.stateNode.implementation!==$.implementation?(B=Cu($,G.mode,lt),B.return=G,B):(B=p(B,$.children||[]),B.return=G,B)}function ot(G,B,$,lt,Nt){return B===null||B.tag!==7?(B=As($,G.mode,lt,Nt),B.return=G,B):(B=p(B,$),B.return=G,B)}function ht(G,B,$){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Al(""+B,G.mode,$),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case j:return $=xo(B.type,B.key,B.props,null,G.mode,$),Pu($,B),$.return=G,$;case J:return B=Cu(B,G.mode,$),B.return=G,B;case N:return B=Mo(B),ht(G,B,$)}if(Je(B)||q(B))return B=As(B,G.mode,$,null),B.return=G,B;if(typeof B.then=="function")return ht(G,lh(B),$);if(B.$$typeof===ft)return ht(G,rh(G,B),$);uh(G,B)}return null}function et(G,B,$,lt){var Nt=B!==null?B.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Nt!==null?null:I(G,B,""+$,lt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case j:return $.key===Nt?V(G,B,$,lt):null;case J:return $.key===Nt?X(G,B,$,lt):null;case N:return $=Mo($),et(G,B,$,lt)}if(Je($)||q($))return Nt!==null?null:ot(G,B,$,lt,null);if(typeof $.then=="function")return et(G,B,lh($),lt);if($.$$typeof===ft)return et(G,B,rh(G,$),lt);uh(G,$)}return null}function it(G,B,$,lt,Nt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return G=G.get($)||null,I(B,G,""+lt,Nt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case j:return G=G.get(lt.key===null?$:lt.key)||null,V(B,G,lt,Nt);case J:return G=G.get(lt.key===null?$:lt.key)||null,X(B,G,lt,Nt);case N:return lt=Mo(lt),it(G,B,$,lt,Nt)}if(Je(lt)||q(lt))return G=G.get($)||null,ot(B,G,lt,Nt,null);if(typeof lt.then=="function")return it(G,B,$,lh(lt),Nt);if(lt.$$typeof===ft)return it(G,B,$,rh(B,lt),Nt);uh(B,lt)}return null}function It(G,B,$,lt){for(var Nt=null,me=null,Ot=B,Kt=B=0,ie=null;Ot!==null&&Kt<$.length;Kt++){Ot.index>Kt?(ie=Ot,Ot=null):ie=Ot.sibling;var pe=et(G,Ot,$[Kt],lt);if(pe===null){Ot===null&&(Ot=ie);break}e&&Ot&&pe.alternate===null&&i(G,Ot),B=g(pe,B,Kt),me===null?Nt=pe:me.sibling=pe,me=pe,Ot=ie}if(Kt===$.length)return o(G,Ot),Xt&&Lt(G,Kt),Nt;if(Ot===null){for(;Kt<$.length;Kt++)Ot=ht(G,$[Kt],lt),Ot!==null&&(B=g(Ot,B,Kt),me===null?Nt=Ot:me.sibling=Ot,me=Ot);return Xt&&Lt(G,Kt),Nt}for(Ot=c(Ot);Kt<$.length;Kt++)ie=it(Ot,G,Kt,$[Kt],lt),ie!==null&&(e&&ie.alternate!==null&&Ot.delete(ie.key===null?Kt:ie.key),B=g(ie,B,Kt),me===null?Nt=ie:me.sibling=ie,me=ie);return e&&Ot.forEach(function(Ma){return i(G,Ma)}),Xt&&Lt(G,Kt),Nt}function Vt(G,B,$,lt){if($==null)throw Error(s(151));for(var Nt=null,me=null,Ot=B,Kt=B=0,ie=null,pe=$.next();Ot!==null&&!pe.done;Kt++,pe=$.next()){Ot.index>Kt?(ie=Ot,Ot=null):ie=Ot.sibling;var Ma=et(G,Ot,pe.value,lt);if(Ma===null){Ot===null&&(Ot=ie);break}e&&Ot&&Ma.alternate===null&&i(G,Ot),B=g(Ma,B,Kt),me===null?Nt=Ma:me.sibling=Ma,me=Ma,Ot=ie}if(pe.done)return o(G,Ot),Xt&&Lt(G,Kt),Nt;if(Ot===null){for(;!pe.done;Kt++,pe=$.next())pe=ht(G,pe.value,lt),pe!==null&&(B=g(pe,B,Kt),me===null?Nt=pe:me.sibling=pe,me=pe);return Xt&&Lt(G,Kt),Nt}for(Ot=c(Ot);!pe.done;Kt++,pe=$.next())pe=it(Ot,G,Kt,pe.value,lt),pe!==null&&(e&&pe.alternate!==null&&Ot.delete(pe.key===null?Kt:pe.key),B=g(pe,B,Kt),me===null?Nt=pe:me.sibling=pe,me=pe);return e&&Ot.forEach(function(EA){return i(G,EA)}),Xt&&Lt(G,Kt),Nt}function Ae(G,B,$,lt){if(typeof $=="object"&&$!==null&&$.type===W&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case j:t:{for(var Nt=$.key;B!==null;){if(B.key===Nt){if(Nt=$.type,Nt===W){if(B.tag===7){o(G,B.sibling),lt=p(B,$.props.children),lt.return=G,G=lt;break t}}else if(B.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===N&&Mo(Nt)===B.type){o(G,B.sibling),lt=p(B,$.props),Pu(lt,$),lt.return=G,G=lt;break t}o(G,B);break}else i(G,B);B=B.sibling}$.type===W?(lt=As($.props.children,G.mode,lt,$.key),lt.return=G,G=lt):(lt=xo($.type,$.key,$.props,null,G.mode,lt),Pu(lt,$),lt.return=G,G=lt)}return b(G);case J:t:{for(Nt=$.key;B!==null;){if(B.key===Nt)if(B.tag===4&&B.stateNode.containerInfo===$.containerInfo&&B.stateNode.implementation===$.implementation){o(G,B.sibling),lt=p(B,$.children||[]),lt.return=G,G=lt;break t}else{o(G,B);break}else i(G,B);B=B.sibling}lt=Cu($,G.mode,lt),lt.return=G,G=lt}return b(G);case N:return $=Mo($),Ae(G,B,$,lt)}if(Je($))return It(G,B,$,lt);if(q($)){if(Nt=q($),typeof Nt!="function")throw Error(s(150));return $=Nt.call($),Vt(G,B,$,lt)}if(typeof $.then=="function")return Ae(G,B,lh($),lt);if($.$$typeof===ft)return Ae(G,B,rh(G,$),lt);uh(G,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,B!==null&&B.tag===6?(o(G,B.sibling),lt=p(B,$),lt.return=G,G=lt):(o(G,B),lt=Al($,G.mode,lt),lt.return=G,G=lt),b(G)):o(G,B)}return function(G,B,$,lt){try{Nu=0;var Nt=Ae(G,B,$,lt);return Ll=null,Nt}catch(Ot){if(Ot===Ol||Ot===ah)throw Ot;var me=zn(29,Ot,null,G.mode);return me.lanes=lt,me.return=G,me}finally{}}}var ko=y_(!0),v_=y_(!1),_a=!1;function Cd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ya(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function va(e,i,o){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(ge&2)!==0){var p=c.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),c.pending=i,i=Io(e),pa(e,null,o),i}return Kr(e,c,i,o),Io(e)}function Mu(e,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=e.pendingLanes,o|=c,i.lanes=o,so(e,o)}}function xd(e,i){var o=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var p=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?p=g=b:g=g.next=b,o=o.next}while(o!==null);g===null?p=g=i:g=g.next=i}else p=g=i;o={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=i:e.next=i,o.lastBaseUpdate=i}var Od=!1;function Du(){if(Od){var e=xl;if(e!==null)throw e}}function ku(e,i,o,c){Od=!1;var p=e.updateQueue;_a=!1;var g=p.firstBaseUpdate,b=p.lastBaseUpdate,I=p.shared.pending;if(I!==null){p.shared.pending=null;var V=I,X=V.next;V.next=null,b===null?g=X:b.next=X,b=V;var ot=e.alternate;ot!==null&&(ot=ot.updateQueue,I=ot.lastBaseUpdate,I!==b&&(I===null?ot.firstBaseUpdate=X:I.next=X,ot.lastBaseUpdate=V))}if(g!==null){var ht=p.baseState;b=0,ot=X=V=null,I=g;do{var et=I.lane&-536870913,it=et!==I.lane;if(it?(ne&et)===et:(c&et)===et){et!==0&&et===Il&&(Od=!0),ot!==null&&(ot=ot.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});t:{var It=e,Vt=I;et=i;var Ae=o;switch(Vt.tag){case 1:if(It=Vt.payload,typeof It=="function"){ht=It.call(Ae,ht,et);break t}ht=It;break t;case 3:It.flags=It.flags&-65537|128;case 0:if(It=Vt.payload,et=typeof It=="function"?It.call(Ae,ht,et):It,et==null)break t;ht=C({},ht,et);break t;case 2:_a=!0}}et=I.callback,et!==null&&(e.flags|=64,it&&(e.flags|=8192),it=p.callbacks,it===null?p.callbacks=[et]:it.push(et))}else it={lane:et,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ot===null?(X=ot=it,V=ht):ot=ot.next=it,b|=et;if(I=I.next,I===null){if(I=p.shared.pending,I===null)break;it=I,I=it.next,it.next=null,p.lastBaseUpdate=it,p.shared.pending=null}}while(!0);ot===null&&(V=ht),p.baseState=V,p.firstBaseUpdate=X,p.lastBaseUpdate=ot,g===null&&(p.shared.lanes=0),Sa|=b,e.lanes=b,e.memoizedState=ht}}function T_(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function E_(e,i){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)T_(o[e],i)}var Nl=z(null),ch=z(0);function w_(e,i){e=ks,gt(ch,e),gt(Nl,i),ks=e|i.baseLanes}function Ld(){gt(ch,ks),gt(Nl,Nl.current)}function Nd(){ks=ch.current,st(Nl),st(ch)}var Ni=z(null),rr=null;function Ta(e){var i=e.alternate;gt(en,en.current&1),gt(Ni,e),rr===null&&(i===null||Nl.current!==null||i.memoizedState!==null)&&(rr=e)}function Pd(e){gt(en,en.current),gt(Ni,e),rr===null&&(rr=e)}function b_(e){e.tag===22?(gt(en,en.current),gt(Ni,e),rr===null&&(rr=e)):Ea()}function Ea(){gt(en,en.current),gt(Ni,Ni.current)}function Pi(e){st(Ni),rr===e&&(rr=null),st(en)}var en=z(0);function hh(e){for(var i=e;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||zm(o)||Bm(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Is=0,Gt=null,be=null,ln=null,fh=!1,Pl=!1,Vo=!1,dh=0,Vu=0,Ml=null,hS=0;function Qe(){throw Error(s(321))}function Md(e,i){if(i===null)return!1;for(var o=0;o<i.length&&o<e.length;o++)if(!bn(e[o],i[o]))return!1;return!0}function Dd(e,i,o,c,p,g){return Is=g,Gt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,rt.H=e===null||e.memoizedState===null?ay:$d,Vo=!1,g=o(c,p),Vo=!1,Pl&&(g=A_(i,o,c,p)),S_(e),g}function S_(e){rt.H=Bu;var i=be!==null&&be.next!==null;if(Is=0,ln=be=Gt=null,fh=!1,Vu=0,Ml=null,i)throw Error(s(300));e===null||un||(e=e.dependencies,e!==null&&ih(e)&&(un=!0))}function A_(e,i,o,c){Gt=e;var p=0;do{if(Pl&&(Ml=null),Vu=0,Pl=!1,25<=p)throw Error(s(301));if(p+=1,ln=be=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}rt.H=oy,g=i(o,c)}while(Pl);return g}function fS(){var e=rt.H,i=e.useState()[0];return i=typeof i.then=="function"?Uu(i):i,e=e.useState()[0],(be!==null?be.memoizedState:null)!==e&&(Gt.flags|=1024),i}function kd(){var e=dh!==0;return dh=0,e}function Vd(e,i,o){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~o}function Ud(e){if(fh){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}fh=!1}Is=0,ln=be=Gt=null,Pl=!1,Vu=dh=0,Ml=null}function Xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Gt.memoizedState=ln=e:ln=ln.next=e,ln}function nn(){if(be===null){var e=Gt.alternate;e=e!==null?e.memoizedState:null}else e=be.next;var i=ln===null?Gt.memoizedState:ln.next;if(i!==null)ln=i,be=e;else{if(e===null)throw Gt.alternate===null?Error(s(467)):Error(s(310));be=e,e={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},ln===null?Gt.memoizedState=ln=e:ln=ln.next=e}return ln}function mh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uu(e){var i=Vu;return Vu+=1,Ml===null&&(Ml=[]),e=p_(Ml,e,i),i=Gt,(ln===null?i.memoizedState:ln.next)===null&&(i=i.alternate,rt.H=i===null||i.memoizedState===null?ay:$d),e}function ph(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Uu(e);if(e.$$typeof===ft)return In(e)}throw Error(s(438,String(e)))}function zd(e){var i=null,o=Gt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=Gt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=mh(),Gt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(e),c=0;c<e;c++)o[c]=H;return i.index++,o}function xs(e,i){return typeof i=="function"?i(e):i}function gh(e){var i=nn();return Bd(i,be,e)}function Bd(e,i,o){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var p=e.baseQueue,g=c.pending;if(g!==null){if(p!==null){var b=p.next;p.next=g.next,g.next=b}i.baseQueue=p=g,c.pending=null}if(g=e.baseState,p===null)e.memoizedState=g;else{i=p.next;var I=b=null,V=null,X=i,ot=!1;do{var ht=X.lane&-536870913;if(ht!==X.lane?(ne&ht)===ht:(Is&ht)===ht){var et=X.revertLane;if(et===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ht===Il&&(ot=!0);else if((Is&et)===et){X=X.next,et===Il&&(ot=!0);continue}else ht={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},V===null?(I=V=ht,b=g):V=V.next=ht,Gt.lanes|=et,Sa|=et;ht=X.action,Vo&&o(g,ht),g=X.hasEagerState?X.eagerState:o(g,ht)}else et={lane:ht,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},V===null?(I=V=et,b=g):V=V.next=et,Gt.lanes|=ht,Sa|=ht;X=X.next}while(X!==null&&X!==i);if(V===null?b=g:V.next=I,!bn(g,e.memoizedState)&&(un=!0,ot&&(o=xl,o!==null)))throw o;e.memoizedState=g,e.baseState=b,e.baseQueue=V,c.lastRenderedState=g}return p===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function jd(e){var i=nn(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var c=o.dispatch,p=o.pending,g=i.memoizedState;if(p!==null){o.pending=null;var b=p=p.next;do g=e(g,b.action),b=b.next;while(b!==p);bn(g,i.memoizedState)||(un=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,c]}function R_(e,i,o){var c=Gt,p=nn(),g=Xt;if(g){if(o===void 0)throw Error(s(407));o=o()}else o=i();var b=!bn((be||p).memoizedState,o);if(b&&(p.memoizedState=o,un=!0),p=p.queue,Fd(x_.bind(null,c,p,e),[e]),p.getSnapshot!==i||b||ln!==null&&ln.memoizedState.tag&1){if(c.flags|=2048,Dl(9,{destroy:void 0},I_.bind(null,c,p,o,i),null),xe===null)throw Error(s(349));g||(Is&127)!==0||C_(c,i,o)}return o}function C_(e,i,o){e.flags|=16384,e={getSnapshot:i,value:o},i=Gt.updateQueue,i===null?(i=mh(),Gt.updateQueue=i,i.stores=[e]):(o=i.stores,o===null?i.stores=[e]:o.push(e))}function I_(e,i,o,c){i.value=o,i.getSnapshot=c,O_(i)&&L_(e)}function x_(e,i,o){return o(function(){O_(i)&&L_(e)})}function O_(e){var i=e.getSnapshot;e=e.value;try{var o=i();return!bn(e,o)}catch{return!0}}function L_(e){var i=nr(e,2);i!==null&&gi(i,e,2)}function Hd(e){var i=Xn();if(typeof e=="function"){var o=e;if(e=o(),Vo){Gn(!0);try{o()}finally{Gn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},i}function N_(e,i,o,c){return e.baseState=o,Bd(e,be,typeof c=="function"?c:xs)}function dS(e,i,o,c,p){if(vh(e))throw Error(s(485));if(e=i.action,e!==null){var g={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};rt.T!==null?o(!0):g.isTransition=!1,c(g),o=i.pending,o===null?(g.next=i.pending=g,P_(i,g)):(g.next=o.next,i.pending=o.next=g)}}function P_(e,i){var o=i.action,c=i.payload,p=e.state;if(i.isTransition){var g=rt.T,b={};rt.T=b;try{var I=o(p,c),V=rt.S;V!==null&&V(b,I),M_(e,i,I)}catch(X){qd(e,i,X)}finally{g!==null&&b.types!==null&&(g.types=b.types),rt.T=g}}else try{g=o(p,c),M_(e,i,g)}catch(X){qd(e,i,X)}}function M_(e,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){D_(e,i,c)},function(c){return qd(e,i,c)}):D_(e,i,o)}function D_(e,i,o){i.status="fulfilled",i.value=o,k_(i),e.state=o,i=e.pending,i!==null&&(o=i.next,o===i?e.pending=null:(o=o.next,i.next=o,P_(e,o)))}function qd(e,i,o){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,k_(i),i=i.next;while(i!==c)}e.action=null}function k_(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function V_(e,i){return i}function U_(e,i){if(Xt){var o=xe.formState;if(o!==null){t:{var c=Gt;if(Xt){if(de){e:{for(var p=de,g=hi;p.nodeType!==8;){if(!g){p=null;break e}if(p=sr(p.nextSibling),p===null){p=null;break e}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){de=sr(p.nextSibling),c=p.data==="F!";break t}}Qr(c)}c=!1}c&&(i=o[0])}}return o=Xn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:V_,lastRenderedState:i},o.queue=c,o=iy.bind(null,Gt,c),c.dispatch=o,c=Hd(!1),g=Qd.bind(null,Gt,!1,c.queue),c=Xn(),p={state:i,dispatch:null,action:e,pending:null},c.queue=p,o=dS.bind(null,Gt,p,g,o),p.dispatch=o,c.memoizedState=e,[i,o,!1]}function z_(e){var i=nn();return B_(i,be,e)}function B_(e,i,o){if(i=Bd(e,i,V_)[0],e=gh(xs)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Uu(i)}catch(b){throw b===Ol?ah:b}else c=i;i=nn();var p=i.queue,g=p.dispatch;return o!==i.memoizedState&&(Gt.flags|=2048,Dl(9,{destroy:void 0},mS.bind(null,p,o),null)),[c,g,e]}function mS(e,i){e.action=i}function j_(e){var i=nn(),o=be;if(o!==null)return B_(i,o,e);nn(),i=i.memoizedState,o=nn();var c=o.queue.dispatch;return o.memoizedState=e,[i,c,!1]}function Dl(e,i,o,c){return e={tag:e,create:o,deps:c,inst:i,next:null},i=Gt.updateQueue,i===null&&(i=mh(),Gt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=e.next=e:(c=o.next,o.next=e,e.next=c,i.lastEffect=e),e}function H_(){return nn().memoizedState}function _h(e,i,o,c){var p=Xn();Gt.flags|=e,p.memoizedState=Dl(1|i,{destroy:void 0},o,c===void 0?null:c)}function yh(e,i,o,c){var p=nn();c=c===void 0?null:c;var g=p.memoizedState.inst;be!==null&&c!==null&&Md(c,be.memoizedState.deps)?p.memoizedState=Dl(i,g,o,c):(Gt.flags|=e,p.memoizedState=Dl(1|i,g,o,c))}function q_(e,i){_h(8390656,8,e,i)}function Fd(e,i){yh(2048,8,e,i)}function pS(e){Gt.flags|=4;var i=Gt.updateQueue;if(i===null)i=mh(),Gt.updateQueue=i,i.events=[e];else{var o=i.events;o===null?i.events=[e]:o.push(e)}}function F_(e){var i=nn().memoizedState;return pS({ref:i,nextImpl:e}),function(){if((ge&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function G_(e,i){return yh(4,2,e,i)}function Z_(e,i){return yh(4,4,e,i)}function K_(e,i){if(typeof i=="function"){e=e();var o=i(e);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Y_(e,i,o){o=o!=null?o.concat([e]):null,yh(4,4,K_.bind(null,i,e),o)}function Gd(){}function Q_(e,i){var o=nn();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Md(i,c[1])?c[0]:(o.memoizedState=[e,i],e)}function $_(e,i){var o=nn();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Md(i,c[1]))return c[0];if(c=e(),Vo){Gn(!0);try{e()}finally{Gn(!1)}}return o.memoizedState=[c,i],c}function Zd(e,i,o){return o===void 0||(Is&1073741824)!==0&&(ne&261930)===0?e.memoizedState=i:(e.memoizedState=o,e=Xy(),Gt.lanes|=e,Sa|=e,o)}function X_(e,i,o,c){return bn(o,i)?o:Nl.current!==null?(e=Zd(e,o,c),bn(e,i)||(un=!0),e):(Is&42)===0||(Is&1073741824)!==0&&(ne&261930)===0?(un=!0,e.memoizedState=o):(e=Xy(),Gt.lanes|=e,Sa|=e,i)}function W_(e,i,o,c,p){var g=vt.p;vt.p=g!==0&&8>g?g:8;var b=rt.T,I={};rt.T=I,Qd(e,!1,i,o);try{var V=p(),X=rt.S;if(X!==null&&X(I,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ot=cS(V,c);zu(e,i,ot,ki(e))}else zu(e,i,c,ki(e))}catch(ht){zu(e,i,{then:function(){},status:"rejected",reason:ht},ki())}finally{vt.p=g,b!==null&&I.types!==null&&(b.types=I.types),rt.T=b}}function gS(){}function Kd(e,i,o,c){if(e.tag!==5)throw Error(s(476));var p=J_(e).queue;W_(e,p,i,pt,o===null?gS:function(){return ty(e),o(c)})}function J_(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:pt,baseState:pt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:pt},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:o},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function ty(e){var i=J_(e);i.next===null&&(i=e.alternate.memoizedState),zu(e,i.next.queue,{},ki())}function Yd(){return In(nc)}function ey(){return nn().memoizedState}function ny(){return nn().memoizedState}function _S(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var o=ki();e=ya(o);var c=va(i,e,o);c!==null&&(gi(c,i,o),Mu(c,i,o)),i={cache:bd()},e.payload=i;return}i=i.return}}function yS(e,i,o){var c=ki();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},vh(e)?ry(i,o):(o=Su(e,i,o,c),o!==null&&(gi(o,e,c),sy(o,i,c)))}function iy(e,i,o){var c=ki();zu(e,i,o,c)}function zu(e,i,o,c){var p={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(vh(e))ry(i,p);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var b=i.lastRenderedState,I=g(b,o);if(p.hasEagerState=!0,p.eagerState=I,bn(I,b))return Kr(e,i,p,0),xe===null&&Co(),!1}catch{}finally{}if(o=Su(e,i,p,c),o!==null)return gi(o,e,c),sy(o,i,c),!0}return!1}function Qd(e,i,o,c){if(c={lane:2,revertLane:Cm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},vh(e)){if(i)throw Error(s(479))}else i=Su(e,o,c,2),i!==null&&gi(i,e,2)}function vh(e){var i=e.alternate;return e===Gt||i!==null&&i===Gt}function ry(e,i){Pl=fh=!0;var o=e.pending;o===null?i.next=i:(i.next=o.next,o.next=i),e.pending=i}function sy(e,i,o){if((o&4194048)!==0){var c=i.lanes;c&=e.pendingLanes,o|=c,i.lanes=o,so(e,o)}}var Bu={readContext:In,use:ph,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe};Bu.useEffectEvent=Qe;var ay={readContext:In,use:ph,useCallback:function(e,i){return Xn().memoizedState=[e,i===void 0?null:i],e},useContext:In,useEffect:q_,useImperativeHandle:function(e,i,o){o=o!=null?o.concat([e]):null,_h(4194308,4,K_.bind(null,i,e),o)},useLayoutEffect:function(e,i){return _h(4194308,4,e,i)},useInsertionEffect:function(e,i){_h(4,2,e,i)},useMemo:function(e,i){var o=Xn();i=i===void 0?null:i;var c=e();if(Vo){Gn(!0);try{e()}finally{Gn(!1)}}return o.memoizedState=[c,i],c},useReducer:function(e,i,o){var c=Xn();if(o!==void 0){var p=o(i);if(Vo){Gn(!0);try{o(i)}finally{Gn(!1)}}}else p=i;return c.memoizedState=c.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},c.queue=e,e=e.dispatch=yS.bind(null,Gt,e),[c.memoizedState,e]},useRef:function(e){var i=Xn();return e={current:e},i.memoizedState=e},useState:function(e){e=Hd(e);var i=e.queue,o=iy.bind(null,Gt,i);return i.dispatch=o,[e.memoizedState,o]},useDebugValue:Gd,useDeferredValue:function(e,i){var o=Xn();return Zd(o,e,i)},useTransition:function(){var e=Hd(!1);return e=W_.bind(null,Gt,e.queue,!0,!1),Xn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,o){var c=Gt,p=Xn();if(Xt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),xe===null)throw Error(s(349));(ne&127)!==0||C_(c,i,o)}p.memoizedState=o;var g={value:o,getSnapshot:i};return p.queue=g,q_(x_.bind(null,c,g,e),[e]),c.flags|=2048,Dl(9,{destroy:void 0},I_.bind(null,c,g,o,i),null),o},useId:function(){var e=Xn(),i=xe.identifierPrefix;if(Xt){var o=Tt,c=ct;o=(c&~(1<<32-Ve(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=dh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=hS++,i="_"+i+"r_"+o.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Yd,useFormState:U_,useActionState:U_,useOptimistic:function(e){var i=Xn();i.memoizedState=i.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Qd.bind(null,Gt,!0,o),o.dispatch=i,[e,i]},useMemoCache:zd,useCacheRefresh:function(){return Xn().memoizedState=_S.bind(null,Gt)},useEffectEvent:function(e){var i=Xn(),o={impl:e};return i.memoizedState=o,function(){if((ge&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},$d={readContext:In,use:ph,useCallback:Q_,useContext:In,useEffect:Fd,useImperativeHandle:Y_,useInsertionEffect:G_,useLayoutEffect:Z_,useMemo:$_,useReducer:gh,useRef:H_,useState:function(){return gh(xs)},useDebugValue:Gd,useDeferredValue:function(e,i){var o=nn();return X_(o,be.memoizedState,e,i)},useTransition:function(){var e=gh(xs)[0],i=nn().memoizedState;return[typeof e=="boolean"?e:Uu(e),i]},useSyncExternalStore:R_,useId:ey,useHostTransitionStatus:Yd,useFormState:z_,useActionState:z_,useOptimistic:function(e,i){var o=nn();return N_(o,be,e,i)},useMemoCache:zd,useCacheRefresh:ny};$d.useEffectEvent=F_;var oy={readContext:In,use:ph,useCallback:Q_,useContext:In,useEffect:Fd,useImperativeHandle:Y_,useInsertionEffect:G_,useLayoutEffect:Z_,useMemo:$_,useReducer:jd,useRef:H_,useState:function(){return jd(xs)},useDebugValue:Gd,useDeferredValue:function(e,i){var o=nn();return be===null?Zd(o,e,i):X_(o,be.memoizedState,e,i)},useTransition:function(){var e=jd(xs)[0],i=nn().memoizedState;return[typeof e=="boolean"?e:Uu(e),i]},useSyncExternalStore:R_,useId:ey,useHostTransitionStatus:Yd,useFormState:j_,useActionState:j_,useOptimistic:function(e,i){var o=nn();return be!==null?N_(o,be,e,i):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:zd,useCacheRefresh:ny};oy.useEffectEvent=F_;function Xd(e,i,o,c){i=e.memoizedState,o=o(c,i),o=o==null?i:C({},i,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Wd={enqueueSetState:function(e,i,o){e=e._reactInternals;var c=ki(),p=ya(c);p.payload=i,o!=null&&(p.callback=o),i=va(e,p,c),i!==null&&(gi(i,e,c),Mu(i,e,c))},enqueueReplaceState:function(e,i,o){e=e._reactInternals;var c=ki(),p=ya(c);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=va(e,p,c),i!==null&&(gi(i,e,c),Mu(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var o=ki(),c=ya(o);c.tag=2,i!=null&&(c.callback=i),i=va(e,c,o),i!==null&&(gi(i,e,o),Mu(i,e,o))}};function ly(e,i,o,c,p,g,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,g,b):i.prototype&&i.prototype.isPureReactComponent?!ha(o,c)||!ha(p,g):!0}function uy(e,i,o,c){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==e&&Wd.enqueueReplaceState(i,i.state,null)}function Uo(e,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(e=e.defaultProps){o===i&&(o=C({},o));for(var p in e)o[p]===void 0&&(o[p]=e[p])}return o}function cy(e){Ro(e)}function hy(e){console.error(e)}function fy(e){Ro(e)}function Th(e,i){try{var o=e.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function dy(e,i,o){try{var c=e.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Jd(e,i,o){return o=ya(o),o.tag=3,o.payload={element:null},o.callback=function(){Th(e,i)},o}function my(e){return e=ya(e),e.tag=3,e}function py(e,i,o,c){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var g=c.value;e.payload=function(){return p(g)},e.callback=function(){dy(i,o,c)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){dy(i,o,c),typeof p!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function vS(e,i,o,c,p){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&Cl(i,o,p,!0),o=Ni.current,o!==null){switch(o.tag){case 31:case 13:return rr===null?Nh():o.alternate===null&&$e===0&&($e=3),o.flags&=-257,o.flags|=65536,o.lanes=p,c===oh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),Sm(e,c,p)),!1;case 22:return o.flags|=65536,c===oh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),Sm(e,c,p)),!1}throw Error(s(435,o.tag))}return Sm(e,c,p),Nh(),!1}if(Xt)return i=Ni.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,c!==Rl&&(e=Error(s(422),{cause:c}),Oo(u(e,o)))):(c!==Rl&&(i=Error(s(423),{cause:c}),Oo(u(i,o))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,c=u(c,o),p=Jd(e.stateNode,c,p),xd(e,p),$e!==4&&($e=2)),!1;var g=Error(s(520),{cause:c});if(g=u(g,o),Yu===null?Yu=[g]:Yu.push(g),$e!==4&&($e=2),i===null)return!0;c=u(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,e=p&-p,o.lanes|=e,e=Jd(o.stateNode,c,e),xd(o,e),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Aa===null||!Aa.has(g))))return o.flags|=65536,p&=-p,o.lanes|=p,p=my(p),py(p,e,o,c),xd(o,p),!1}o=o.return}while(o!==null);return!1}var tm=Error(s(461)),un=!1;function xn(e,i,o,c){i.child=e===null?v_(i,null,o,c):ko(i,e.child,o,c)}function gy(e,i,o,c,p){o=o.render;var g=i.ref;if("ref"in c){var b={};for(var I in c)I!=="ref"&&(b[I]=c[I])}else b=c;return No(i),c=Dd(e,i,o,b,g,p),I=kd(),e!==null&&!un?(Vd(e,i,p),Os(e,i,p)):(Xt&&I&&pn(i),i.flags|=1,xn(e,i,c,p),i.child)}function _y(e,i,o,c,p){if(e===null){var g=o.type;return typeof g=="function"&&!Sl(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,yy(e,i,g,c,p)):(e=xo(o.type,null,c,i,i.mode,p),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!lm(e,p)){var b=g.memoizedProps;if(o=o.compare,o=o!==null?o:ha,o(b,c)&&e.ref===i.ref)return Os(e,i,p)}return i.flags|=1,e=ir(g,c),e.ref=i.ref,e.return=i,i.child=e}function yy(e,i,o,c,p){if(e!==null){var g=e.memoizedProps;if(ha(g,c)&&e.ref===i.ref)if(un=!1,i.pendingProps=c=g,lm(e,p))(e.flags&131072)!==0&&(un=!0);else return i.lanes=e.lanes,Os(e,i,p)}return em(e,i,o,c,p)}function vy(e,i,o,c){var p=c.children,g=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,e!==null){for(c=i.child=e.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~g}else c=0,i.child=null;return Ty(e,i,g,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&sh(i,g!==null?g.cachePool:null),g!==null?w_(i,g):Ld(),b_(i);else return c=i.lanes=536870912,Ty(e,i,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(sh(i,g.cachePool),w_(i,g),Ea(),i.memoizedState=null):(e!==null&&sh(i,null),Ld(),Ea());return xn(e,i,p,o),i.child}function ju(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ty(e,i,o,c,p){var g=Ad();return g=g===null?null:{parent:on._currentValue,pool:g},i.memoizedState={baseLanes:o,cachePool:g},e!==null&&sh(i,null),Ld(),b_(i),e!==null&&Cl(e,i,c,!0),i.childLanes=p,null}function Eh(e,i){return i=bh({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function Ey(e,i,o){return ko(i,e.child,null,o),e=Eh(i,i.pendingProps),e.flags|=2,Pi(i),i.memoizedState=null,e}function TS(e,i,o){var c=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Xt){if(c.mode==="hidden")return e=Eh(i,c),i.lanes=536870912,ju(null,e);if(Pd(i),(e=de)?(e=Pv(e,hi),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:tt!==null?{id:ct,overflow:Tt}:null,retryLane:536870912,hydrationErrors:null},o=Ru(e),o.return=i,i.child=o,fe=i,de=null)):e=null,e===null)throw Qr(i);return i.lanes=536870912,null}return Eh(i,c)}var g=e.memoizedState;if(g!==null){var b=g.dehydrated;if(Pd(i),p)if(i.flags&256)i.flags&=-257,i=Ey(e,i,o);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(un||Cl(e,i,o,!1),p=(o&e.childLanes)!==0,un||p){if(c=xe,c!==null&&(b=ao(c,o),b!==0&&b!==g.retryLane))throw g.retryLane=b,nr(e,b),gi(c,e,b),tm;Nh(),i=Ey(e,i,o)}else e=g.treeContext,de=sr(b.nextSibling),fe=i,Xt=!0,Yr=null,hi=!1,e!==null&&$n(i,e),i=Eh(i,c),i.flags|=4096;return i}return e=ir(e.child,{mode:c.mode,children:c.children}),e.ref=i.ref,i.child=e,e.return=i,e}function wh(e,i){var o=i.ref;if(o===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(e===null||e.ref!==o)&&(i.flags|=4194816)}}function em(e,i,o,c,p){return No(i),o=Dd(e,i,o,c,void 0,p),c=kd(),e!==null&&!un?(Vd(e,i,p),Os(e,i,p)):(Xt&&c&&pn(i),i.flags|=1,xn(e,i,o,p),i.child)}function wy(e,i,o,c,p,g){return No(i),i.updateQueue=null,o=A_(i,c,o,p),S_(e),c=kd(),e!==null&&!un?(Vd(e,i,g),Os(e,i,g)):(Xt&&c&&pn(i),i.flags|=1,xn(e,i,o,g),i.child)}function by(e,i,o,c,p){if(No(i),i.stateNode===null){var g=Ss,b=o.contextType;typeof b=="object"&&b!==null&&(g=In(b)),g=new o(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Wd,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},Cd(i),b=o.contextType,g.context=typeof b=="object"&&b!==null?In(b):Ss,g.state=i.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(Xd(i,o,b,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&Wd.enqueueReplaceState(g,g.state,null),ku(i,c,g,p),Du(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(e===null){g=i.stateNode;var I=i.memoizedProps,V=Uo(o,I);g.props=V;var X=g.context,ot=o.contextType;b=Ss,typeof ot=="object"&&ot!==null&&(b=In(ot));var ht=o.getDerivedStateFromProps;ot=typeof ht=="function"||typeof g.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,ot||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(I||X!==b)&&uy(i,g,c,b),_a=!1;var et=i.memoizedState;g.state=et,ku(i,c,g,p),Du(),X=i.memoizedState,I||et!==X||_a?(typeof ht=="function"&&(Xd(i,o,ht,c),X=i.memoizedState),(V=_a||ly(i,o,V,c,et,X,b))?(ot||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=X),g.props=c,g.state=X,g.context=b,c=V):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,Id(e,i),b=i.memoizedProps,ot=Uo(o,b),g.props=ot,ht=i.pendingProps,et=g.context,X=o.contextType,V=Ss,typeof X=="object"&&X!==null&&(V=In(X)),I=o.getDerivedStateFromProps,(X=typeof I=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ht||et!==V)&&uy(i,g,c,V),_a=!1,et=i.memoizedState,g.state=et,ku(i,c,g,p),Du();var it=i.memoizedState;b!==ht||et!==it||_a||e!==null&&e.dependencies!==null&&ih(e.dependencies)?(typeof I=="function"&&(Xd(i,o,I,c),it=i.memoizedState),(ot=_a||ly(i,o,ot,c,et,it,V)||e!==null&&e.dependencies!==null&&ih(e.dependencies))?(X||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,it,V),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,it,V)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&et===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&et===e.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=it),g.props=c,g.state=it,g.context=V,c=ot):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&et===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&et===e.memoizedState||(i.flags|=1024),c=!1)}return g=c,wh(e,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&c?(i.child=ko(i,e.child,null,p),i.child=ko(i,null,o,p)):xn(e,i,o,p),i.memoizedState=g.state,e=i.child):e=Os(e,i,p),e}function Sy(e,i,o,c){return Rs(),i.flags|=256,xn(e,i,o,c),i.child}var nm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function im(e){return{baseLanes:e,cachePool:d_()}}function rm(e,i,o){return e=e!==null?e.childLanes&~o:0,i&&(e|=Di),e}function Ay(e,i,o){var c=i.pendingProps,p=!1,g=(i.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(en.current&2)!==0),b&&(p=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,e===null){if(Xt){if(p?Ta(i):Ea(),(e=de)?(e=Pv(e,hi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:tt!==null?{id:ct,overflow:Tt}:null,retryLane:536870912,hydrationErrors:null},o=Ru(e),o.return=i,i.child=o,fe=i,de=null)):e=null,e===null)throw Qr(i);return Bm(e)?i.lanes=32:i.lanes=536870912,null}var I=c.children;return c=c.fallback,p?(Ea(),p=i.mode,I=bh({mode:"hidden",children:I},p),c=As(c,p,o,null),I.return=i,c.return=i,I.sibling=c,i.child=I,c=i.child,c.memoizedState=im(o),c.childLanes=rm(e,b,o),i.memoizedState=nm,ju(null,c)):(Ta(i),sm(i,I))}var V=e.memoizedState;if(V!==null&&(I=V.dehydrated,I!==null)){if(g)i.flags&256?(Ta(i),i.flags&=-257,i=am(e,i,o)):i.memoizedState!==null?(Ea(),i.child=e.child,i.flags|=128,i=null):(Ea(),I=c.fallback,p=i.mode,c=bh({mode:"visible",children:c.children},p),I=As(I,p,o,null),I.flags|=2,c.return=i,I.return=i,c.sibling=I,i.child=c,ko(i,e.child,null,o),c=i.child,c.memoizedState=im(o),c.childLanes=rm(e,b,o),i.memoizedState=nm,i=ju(null,c));else if(Ta(i),Bm(I)){if(b=I.nextSibling&&I.nextSibling.dataset,b)var X=b.dgst;b=X,c=Error(s(419)),c.stack="",c.digest=b,Oo({value:c,source:null,stack:null}),i=am(e,i,o)}else if(un||Cl(e,i,o,!1),b=(o&e.childLanes)!==0,un||b){if(b=xe,b!==null&&(c=ao(b,o),c!==0&&c!==V.retryLane))throw V.retryLane=c,nr(e,c),gi(b,e,c),tm;zm(I)||Nh(),i=am(e,i,o)}else zm(I)?(i.flags|=192,i.child=e.child,i=null):(e=V.treeContext,de=sr(I.nextSibling),fe=i,Xt=!0,Yr=null,hi=!1,e!==null&&$n(i,e),i=sm(i,c.children),i.flags|=4096);return i}return p?(Ea(),I=c.fallback,p=i.mode,V=e.child,X=V.sibling,c=ir(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,X!==null?I=ir(X,I):(I=As(I,p,o,null),I.flags|=2),I.return=i,c.return=i,c.sibling=I,i.child=c,ju(null,c),c=i.child,I=e.child.memoizedState,I===null?I=im(o):(p=I.cachePool,p!==null?(V=on._currentValue,p=p.parent!==V?{parent:V,pool:V}:p):p=d_(),I={baseLanes:I.baseLanes|o,cachePool:p}),c.memoizedState=I,c.childLanes=rm(e,b,o),i.memoizedState=nm,ju(e.child,c)):(Ta(i),o=e.child,e=o.sibling,o=ir(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,e!==null&&(b=i.deletions,b===null?(i.deletions=[e],i.flags|=16):b.push(e)),i.child=o,i.memoizedState=null,o)}function sm(e,i){return i=bh({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function bh(e,i){return e=zn(22,e,null,i),e.lanes=0,e}function am(e,i,o){return ko(i,e.child,null,o),e=sm(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Ry(e,i,o){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i),Ed(e.return,i,o)}function om(e,i,o,c,p,g){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:p,treeForkCount:g}:(b.isBackwards=i,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=o,b.tailMode=p,b.treeForkCount=g)}function Cy(e,i,o){var c=i.pendingProps,p=c.revealOrder,g=c.tail;c=c.children;var b=en.current,I=(b&2)!==0;if(I?(b=b&1|2,i.flags|=128):b&=1,gt(en,b),xn(e,i,c,o),c=Xt?R:0,!I&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ry(e,o,i);else if(e.tag===19)Ry(e,o,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(o=i.child,p=null;o!==null;)e=o.alternate,e!==null&&hh(e)===null&&(p=o),o=o.sibling;o=p,o===null?(p=i.child,i.child=null):(p=o.sibling,o.sibling=null),om(i,!1,p,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=i.child,i.child=null;p!==null;){if(e=p.alternate,e!==null&&hh(e)===null){i.child=p;break}e=p.sibling,p.sibling=o,o=p,p=e}om(i,!0,o,null,g,c);break;case"together":om(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Os(e,i,o){if(e!==null&&(i.dependencies=e.dependencies),Sa|=i.lanes,(o&i.childLanes)===0)if(e!==null){if(Cl(e,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,o=ir(e,e.pendingProps),i.child=o,o.return=i;e.sibling!==null;)e=e.sibling,o=o.sibling=ir(e,e.pendingProps),o.return=i;o.sibling=null}return i.child}function lm(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ih(e)))}function ES(e,i,o){switch(i.tag){case 3:we(i,i.stateNode.containerInfo),ga(i,on,e.memoizedState.cache),Rs();break;case 27:case 5:ur(i);break;case 4:we(i,i.stateNode.containerInfo);break;case 10:ga(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Pd(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ta(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Ay(e,i,o):(Ta(i),e=Os(e,i,o),e!==null?e.sibling:null);Ta(i);break;case 19:var p=(e.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(Cl(e,i,o,!1),c=(o&i.childLanes)!==0),p){if(c)return Cy(e,i,o);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),gt(en,en.current),c)break;return null;case 22:return i.lanes=0,vy(e,i,o,i.pendingProps);case 24:ga(i,on,e.memoizedState.cache)}return Os(e,i,o)}function Iy(e,i,o){if(e!==null)if(e.memoizedProps!==i.pendingProps)un=!0;else{if(!lm(e,o)&&(i.flags&128)===0)return un=!1,ES(e,i,o);un=(e.flags&131072)!==0}else un=!1,Xt&&(i.flags&1048576)!==0&&Zt(i,R,i.index);switch(i.lanes=0,i.tag){case 16:t:{var c=i.pendingProps;if(e=Mo(i.elementType),i.type=e,typeof e=="function")Sl(e)?(c=Uo(e,c),i.tag=1,i=by(null,i,e,c,o)):(i.tag=0,i=em(null,i,e,c,o));else{if(e!=null){var p=e.$$typeof;if(p===xt){i.tag=11,i=gy(null,i,e,c,o);break t}else if(p===D){i.tag=14,i=_y(null,i,e,c,o);break t}}throw i=oe(e)||e,Error(s(306,i,""))}}return i;case 0:return em(e,i,i.type,i.pendingProps,o);case 1:return c=i.type,p=Uo(c,i.pendingProps),by(e,i,c,p,o);case 3:t:{if(we(i,i.stateNode.containerInfo),e===null)throw Error(s(387));c=i.pendingProps;var g=i.memoizedState;p=g.element,Id(e,i),ku(i,c,null,o);var b=i.memoizedState;if(c=b.cache,ga(i,on,c),c!==g.cache&&wd(i,[on],o,!0),Du(),c=b.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Sy(e,i,c,o);break t}else if(c!==p){p=u(Error(s(424)),i),Oo(p),i=Sy(e,i,c,o);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(de=sr(e.firstChild),fe=i,Xt=!0,Yr=null,hi=!0,o=v_(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Rs(),c===p){i=Os(e,i,o);break t}xn(e,i,c,o)}i=i.child}return i;case 26:return wh(e,i),e===null?(o=zv(i.type,null,i.pendingProps,null))?i.memoizedState=o:Xt||(o=i.type,e=i.pendingProps,c=zh(Et.current).createElement(o),c[ze]=i,c[Ze]=e,On(c,o,e),Ke(c),i.stateNode=c):i.memoizedState=zv(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return ur(i),e===null&&Xt&&(c=i.stateNode=kv(i.type,i.pendingProps,Et.current),fe=i,hi=!0,p=de,xa(i.type)?(jm=p,de=sr(c.firstChild)):de=p),xn(e,i,i.pendingProps.children,o),wh(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Xt&&((p=c=de)&&(c=XS(c,i.type,i.pendingProps,hi),c!==null?(i.stateNode=c,fe=i,de=sr(c.firstChild),hi=!1,p=!0):p=!1),p||Qr(i)),ur(i),p=i.type,g=i.pendingProps,b=e!==null?e.memoizedProps:null,c=g.children,km(p,g)?c=null:b!==null&&km(p,b)&&(i.flags|=32),i.memoizedState!==null&&(p=Dd(e,i,fS,null,null,o),nc._currentValue=p),wh(e,i),xn(e,i,c,o),i.child;case 6:return e===null&&Xt&&((e=o=de)&&(o=WS(o,i.pendingProps,hi),o!==null?(i.stateNode=o,fe=i,de=null,e=!0):e=!1),e||Qr(i)),null;case 13:return Ay(e,i,o);case 4:return we(i,i.stateNode.containerInfo),c=i.pendingProps,e===null?i.child=ko(i,null,c,o):xn(e,i,c,o),i.child;case 11:return gy(e,i,i.type,i.pendingProps,o);case 7:return xn(e,i,i.pendingProps,o),i.child;case 8:return xn(e,i,i.pendingProps.children,o),i.child;case 12:return xn(e,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,ga(i,i.type,c.value),xn(e,i,c.children,o),i.child;case 9:return p=i.type._context,c=i.pendingProps.children,No(i),p=In(p),c=c(p),i.flags|=1,xn(e,i,c,o),i.child;case 14:return _y(e,i,i.type,i.pendingProps,o);case 15:return yy(e,i,i.type,i.pendingProps,o);case 19:return Cy(e,i,o);case 31:return TS(e,i,o);case 22:return vy(e,i,o,i.pendingProps);case 24:return No(i),c=In(on),e===null?(p=Ad(),p===null&&(p=xe,g=bd(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=o),p=g),i.memoizedState={parent:c,cache:p},Cd(i),ga(i,on,p)):((e.lanes&o)!==0&&(Id(e,i),ku(i,null,null,o),Du()),p=e.memoizedState,g=i.memoizedState,p.parent!==c?(p={parent:c,cache:c},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),ga(i,on,c)):(c=g.cache,ga(i,on,c),c!==p.cache&&wd(i,[on],o,!0))),xn(e,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ls(e){e.flags|=4}function um(e,i,o,c,p){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(ev())e.flags|=8192;else throw Do=oh,Rd}else e.flags&=-16777217}function xy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Fv(i))if(ev())e.flags|=8192;else throw Do=oh,Rd}function Sh(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?cl():536870912,e.lanes|=i,zl|=i)}function Hu(e,i){if(!Xt)switch(e.tailMode){case"hidden":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function De(e){var i=e.alternate!==null&&e.alternate.child===e.child,o=0,c=0;if(i)for(var p=e.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=c,e.childLanes=o,i}function wS(e,i,o){var c=i.pendingProps;switch(Ye(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(i),null;case 1:return De(i),null;case 3:return o=i.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Cs(on),Re(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(wr(i)?Ls(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,xu())),De(i),null;case 26:var p=i.type,g=i.memoizedState;return e===null?(Ls(i),g!==null?(De(i),xy(i,g)):(De(i),um(i,p,null,c,o))):g?g!==e.memoizedState?(Ls(i),De(i),xy(i,g)):(De(i),i.flags&=-16777217):(e=e.memoizedProps,e!==c&&Ls(i),De(i),um(i,p,e,c,o)),null;case 27:if(Or(i),o=Et.current,p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Ls(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return De(i),null}e=_t.current,wr(i)?Iu(i):(e=kv(p,c,o),i.stateNode=e,Ls(i))}return De(i),null;case 5:if(Or(i),p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Ls(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return De(i),null}if(g=_t.current,wr(i))Iu(i);else{var b=zh(Et.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?b.createElement(p,{is:c.is}):b.createElement(p)}}g[ze]=i,g[Ze]=c;t:for(b=i.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===i)break t;for(;b.sibling===null;){if(b.return===null||b.return===i)break t;b=b.return}b.sibling.return=b.return,b=b.sibling}i.stateNode=g;t:switch(On(g,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&Ls(i)}}return De(i),um(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,o),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==c&&Ls(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(e=Et.current,wr(i)){if(e=i.stateNode,o=i.memoizedProps,c=null,p=fe,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}e[ze]=i,e=!!(e.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Av(e.nodeValue,o)),e||Qr(i,!0)}else e=zh(e).createTextNode(c),e[ze]=i,i.stateNode=e}return De(i),null;case 31:if(o=i.memoizedState,e===null||e.memoizedState!==null){if(c=wr(i),o!==null){if(e===null){if(!c)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[ze]=i}else Rs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;De(i),e=!1}else o=xu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return i.flags&256?(Pi(i),i):(Pi(i),null);if((i.flags&128)!==0)throw Error(s(558))}return De(i),null;case 13:if(c=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=wr(i),c!==null&&c.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[ze]=i}else Rs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;De(i),p=!1}else p=xu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(Pi(i),i):(Pi(i),null)}return Pi(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,e=e!==null&&e.memoizedState!==null,o&&(c=i.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==p&&(c.flags|=2048)),o!==e&&o&&(i.child.flags|=8192),Sh(i,i.updateQueue),De(i),null);case 4:return Re(),e===null&&Lm(i.stateNode.containerInfo),De(i),null;case 10:return Cs(i.type),De(i),null;case 19:if(st(en),c=i.memoizedState,c===null)return De(i),null;if(p=(i.flags&128)!==0,g=c.rendering,g===null)if(p)Hu(c,!1);else{if($e!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=hh(e),g!==null){for(i.flags|=128,Hu(c,!1),e=g.updateQueue,i.updateQueue=e,Sh(i,e),i.subtreeFlags=0,e=o,o=i.child;o!==null;)Au(o,e),o=o.sibling;return gt(en,en.current&1|2),Xt&&Lt(i,c.treeForkCount),i.child}e=e.sibling}c.tail!==null&&Cn()>xh&&(i.flags|=128,p=!0,Hu(c,!1),i.lanes=4194304)}else{if(!p)if(e=hh(g),e!==null){if(i.flags|=128,p=!0,e=e.updateQueue,i.updateQueue=e,Sh(i,e),Hu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Xt)return De(i),null}else 2*Cn()-c.renderingStartTime>xh&&o!==536870912&&(i.flags|=128,p=!0,Hu(c,!1),i.lanes=4194304);c.isBackwards?(g.sibling=i.child,i.child=g):(e=c.last,e!==null?e.sibling=g:i.child=g,c.last=g)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Cn(),e.sibling=null,o=en.current,gt(en,p?o&1|2:o&1),Xt&&Lt(i,c.treeForkCount),e):(De(i),null);case 22:case 23:return Pi(i),Nd(),c=i.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(De(i),i.subtreeFlags&6&&(i.flags|=8192)):De(i),o=i.updateQueue,o!==null&&Sh(i,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),e!==null&&st(Po),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Cs(on),De(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function bS(e,i){switch(Ye(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Cs(on),Re(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Or(i),null;case 31:if(i.memoizedState!==null){if(Pi(i),i.alternate===null)throw Error(s(340));Rs()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Pi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Rs()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return st(en),null;case 4:return Re(),null;case 10:return Cs(i.type),null;case 22:case 23:return Pi(i),Nd(),e!==null&&st(Po),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Cs(on),null;case 25:return null;default:return null}}function Oy(e,i){switch(Ye(i),i.tag){case 3:Cs(on),Re();break;case 26:case 27:case 5:Or(i);break;case 4:Re();break;case 31:i.memoizedState!==null&&Pi(i);break;case 13:Pi(i);break;case 19:st(en);break;case 10:Cs(i.type);break;case 22:case 23:Pi(i),Nd(),e!==null&&st(Po);break;case 24:Cs(on)}}function qu(e,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var p=c.next;o=p;do{if((o.tag&e)===e){c=void 0;var g=o.create,b=o.inst;c=g(),b.destroy=c}o=o.next}while(o!==p)}}catch(I){Ee(i,i.return,I)}}function wa(e,i,o){try{var c=i.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var g=p.next;c=g;do{if((c.tag&e)===e){var b=c.inst,I=b.destroy;if(I!==void 0){b.destroy=void 0,p=i;var V=o,X=I;try{X()}catch(ot){Ee(p,V,ot)}}}c=c.next}while(c!==g)}}catch(ot){Ee(i,i.return,ot)}}function Ly(e){var i=e.updateQueue;if(i!==null){var o=e.stateNode;try{E_(i,o)}catch(c){Ee(e,e.return,c)}}}function Ny(e,i,o){o.props=Uo(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(c){Ee(e,i,c)}}function Fu(e,i){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof o=="function"?e.refCleanup=o(c):o.current=c}}catch(p){Ee(e,i,p)}}function Xr(e,i){var o=e.ref,c=e.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(p){Ee(e,i,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Ee(e,i,p)}else o.current=null}function Py(e){var i=e.type,o=e.memoizedProps,c=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break t;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(p){Ee(e,e.return,p)}}function cm(e,i,o){try{var c=e.stateNode;GS(c,e.type,o,i),c[Ze]=i}catch(p){Ee(e,e.return,p)}}function My(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xa(e.type)||e.tag===4}function hm(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||My(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xa(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fm(e,i,o){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(e),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Mn));else if(c!==4&&(c===27&&xa(e.type)&&(o=e.stateNode,i=null),e=e.child,e!==null))for(fm(e,i,o),e=e.sibling;e!==null;)fm(e,i,o),e=e.sibling}function Ah(e,i,o){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?o.insertBefore(e,i):o.appendChild(e);else if(c!==4&&(c===27&&xa(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(Ah(e,i,o),e=e.sibling;e!==null;)Ah(e,i,o),e=e.sibling}function Dy(e){var i=e.stateNode,o=e.memoizedProps;try{for(var c=e.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);On(i,c,o),i[ze]=e,i[Ze]=o}catch(g){Ee(e,e.return,g)}}var Ns=!1,cn=!1,dm=!1,ky=typeof WeakSet=="function"?WeakSet:Set,An=null;function SS(e,i){if(e=e.containerInfo,Mm=Zh,e=wo(e),qr(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else t:{o=(o=e.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var p=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break t}var b=0,I=-1,V=-1,X=0,ot=0,ht=e,et=null;e:for(;;){for(var it;ht!==o||p!==0&&ht.nodeType!==3||(I=b+p),ht!==g||c!==0&&ht.nodeType!==3||(V=b+c),ht.nodeType===3&&(b+=ht.nodeValue.length),(it=ht.firstChild)!==null;)et=ht,ht=it;for(;;){if(ht===e)break e;if(et===o&&++X===p&&(I=b),et===g&&++ot===c&&(V=b),(it=ht.nextSibling)!==null)break;ht=et,et=ht.parentNode}ht=it}o=I===-1||V===-1?null:{start:I,end:V}}else o=null}o=o||{start:0,end:0}}else o=null;for(Dm={focusedElem:e,selectionRange:o},Zh=!1,An=i;An!==null;)if(i=An,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,An=e;else for(;An!==null;){switch(i=An,g=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)p=e[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,o=i,p=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var It=Uo(o.type,p);e=c.getSnapshotBeforeUpdate(It,g),c.__reactInternalSnapshotBeforeUpdate=e}catch(Vt){Ee(o,o.return,Vt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,o=e.nodeType,o===9)Um(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Um(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,An=e;break}An=i.return}}function Vy(e,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ms(e,o),c&4&&qu(5,o);break;case 1:if(Ms(e,o),c&4)if(e=o.stateNode,i===null)try{e.componentDidMount()}catch(b){Ee(o,o.return,b)}else{var p=Uo(o.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(p,i,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Ee(o,o.return,b)}}c&64&&Ly(o),c&512&&Fu(o,o.return);break;case 3:if(Ms(e,o),c&64&&(e=o.updateQueue,e!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{E_(e,i)}catch(b){Ee(o,o.return,b)}}break;case 27:i===null&&c&4&&Dy(o);case 26:case 5:Ms(e,o),i===null&&c&4&&Py(o),c&512&&Fu(o,o.return);break;case 12:Ms(e,o);break;case 31:Ms(e,o),c&4&&By(e,o);break;case 13:Ms(e,o),c&4&&jy(e,o),c&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=PS.bind(null,o),JS(e,o))));break;case 22:if(c=o.memoizedState!==null||Ns,!c){i=i!==null&&i.memoizedState!==null||cn,p=Ns;var g=cn;Ns=c,(cn=i)&&!g?Ds(e,o,(o.subtreeFlags&8772)!==0):Ms(e,o),Ns=p,cn=g}break;case 30:break;default:Ms(e,o)}}function Uy(e){var i=e.alternate;i!==null&&(e.alternate=null,Uy(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Ws(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ke=null,fi=!1;function Ps(e,i,o){for(o=o.child;o!==null;)zy(e,i,o),o=o.sibling}function zy(e,i,o){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Jn,o)}catch{}switch(o.tag){case 26:cn||Xr(o,i),Ps(e,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:cn||Xr(o,i);var c=ke,p=fi;xa(o.type)&&(ke=o.stateNode,fi=!1),Ps(e,i,o),Ju(o.stateNode),ke=c,fi=p;break;case 5:cn||Xr(o,i);case 6:if(c=ke,p=fi,ke=null,Ps(e,i,o),ke=c,fi=p,ke!==null)if(fi)try{(ke.nodeType===9?ke.body:ke.nodeName==="HTML"?ke.ownerDocument.body:ke).removeChild(o.stateNode)}catch(g){Ee(o,i,g)}else try{ke.removeChild(o.stateNode)}catch(g){Ee(o,i,g)}break;case 18:ke!==null&&(fi?(e=ke,Lv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),Kl(e)):Lv(ke,o.stateNode));break;case 4:c=ke,p=fi,ke=o.stateNode.containerInfo,fi=!0,Ps(e,i,o),ke=c,fi=p;break;case 0:case 11:case 14:case 15:wa(2,o,i),cn||wa(4,o,i),Ps(e,i,o);break;case 1:cn||(Xr(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Ny(o,i,c)),Ps(e,i,o);break;case 21:Ps(e,i,o);break;case 22:cn=(c=cn)||o.memoizedState!==null,Ps(e,i,o),cn=c;break;default:Ps(e,i,o)}}function By(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Kl(e)}catch(o){Ee(i,i.return,o)}}}function jy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Kl(e)}catch(o){Ee(i,i.return,o)}}function AS(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new ky),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new ky),i;default:throw Error(s(435,e.tag))}}function Rh(e,i){var o=AS(e);i.forEach(function(c){if(!o.has(c)){o.add(c);var p=MS.bind(null,e,c);c.then(p,p)}})}function di(e,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var p=o[c],g=e,b=i,I=b;t:for(;I!==null;){switch(I.tag){case 27:if(xa(I.type)){ke=I.stateNode,fi=!1;break t}break;case 5:ke=I.stateNode,fi=!1;break t;case 3:case 4:ke=I.stateNode.containerInfo,fi=!0;break t}I=I.return}if(ke===null)throw Error(s(160));zy(g,b,p),ke=null,fi=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Hy(i,e),i=i.sibling}var Sr=null;function Hy(e,i){var o=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:di(i,e),mi(e),c&4&&(wa(3,e,e.return),qu(3,e),wa(5,e,e.return));break;case 1:di(i,e),mi(e),c&512&&(cn||o===null||Xr(o,o.return)),c&64&&Ns&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var p=Sr;if(di(i,e),mi(e),c&512&&(cn||o===null||Xr(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=e.memoizedState,o===null)if(c===null)if(e.stateNode===null){t:{c=e.type,o=e.memoizedProps,p=p.ownerDocument||p;e:switch(c){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Gi]||g[ze]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(c),p.head.insertBefore(g,p.querySelector("head > title"))),On(g,c,o),g[ze]=e,Ke(g),c=g;break t;case"link":var b=Hv("link","href",p).get(c+(o.href||""));if(b){for(var I=0;I<b.length;I++)if(g=b[I],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(I,1);break e}}g=p.createElement(c),On(g,c,o),p.head.appendChild(g);break;case"meta":if(b=Hv("meta","content",p).get(c+(o.content||""))){for(I=0;I<b.length;I++)if(g=b[I],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(I,1);break e}}g=p.createElement(c),On(g,c,o),p.head.appendChild(g);break;default:throw Error(s(468,c))}g[ze]=e,Ke(g),c=g}e.stateNode=c}else qv(p,e.type,e.stateNode);else e.stateNode=jv(p,c,e.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?qv(p,e.type,e.stateNode):jv(p,c,e.memoizedProps)):c===null&&e.stateNode!==null&&cm(e,e.memoizedProps,o.memoizedProps)}break;case 27:di(i,e),mi(e),c&512&&(cn||o===null||Xr(o,o.return)),o!==null&&c&4&&cm(e,e.memoizedProps,o.memoizedProps);break;case 5:if(di(i,e),mi(e),c&512&&(cn||o===null||Xr(o,o.return)),e.flags&32){p=e.stateNode;try{sn(p,"")}catch(It){Ee(e,e.return,It)}}c&4&&e.stateNode!=null&&(p=e.memoizedProps,cm(e,p,o!==null?o.memoizedProps:p)),c&1024&&(dm=!0);break;case 6:if(di(i,e),mi(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,o=e.stateNode;try{o.nodeValue=c}catch(It){Ee(e,e.return,It)}}break;case 3:if(Hh=null,p=Sr,Sr=Bh(i.containerInfo),di(i,e),Sr=p,mi(e),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Kl(i.containerInfo)}catch(It){Ee(e,e.return,It)}dm&&(dm=!1,qy(e));break;case 4:c=Sr,Sr=Bh(e.stateNode.containerInfo),di(i,e),mi(e),Sr=c;break;case 12:di(i,e),mi(e);break;case 31:di(i,e),mi(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Rh(e,c)));break;case 13:di(i,e),mi(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ih=Cn()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Rh(e,c)));break;case 22:p=e.memoizedState!==null;var V=o!==null&&o.memoizedState!==null,X=Ns,ot=cn;if(Ns=X||p,cn=ot||V,di(i,e),cn=ot,Ns=X,mi(e),c&8192)t:for(i=e.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(o===null||V||Ns||cn||zo(e)),o=null,i=e;;){if(i.tag===5||i.tag===26){if(o===null){V=o=i;try{if(g=V.stateNode,p)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{I=V.stateNode;var ht=V.memoizedProps.style,et=ht!=null&&ht.hasOwnProperty("display")?ht.display:null;I.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(It){Ee(V,V.return,It)}}}else if(i.tag===6){if(o===null){V=i;try{V.stateNode.nodeValue=p?"":V.memoizedProps}catch(It){Ee(V,V.return,It)}}}else if(i.tag===18){if(o===null){V=i;try{var it=V.stateNode;p?Nv(it,!0):Nv(V.stateNode,!1)}catch(It){Ee(V,V.return,It)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=e.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Rh(e,o))));break;case 19:di(i,e),mi(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Rh(e,c)));break;case 30:break;case 21:break;default:di(i,e),mi(e)}}function mi(e){var i=e.flags;if(i&2){try{for(var o,c=e.return;c!==null;){if(My(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var p=o.stateNode,g=hm(e);Ah(e,g,p);break;case 5:var b=o.stateNode;o.flags&32&&(sn(b,""),o.flags&=-33);var I=hm(e);Ah(e,I,b);break;case 3:case 4:var V=o.stateNode.containerInfo,X=hm(e);fm(e,X,V);break;default:throw Error(s(161))}}catch(ot){Ee(e,e.return,ot)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function qy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;qy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Ms(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Vy(e,i.alternate,i),i=i.sibling}function zo(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:wa(4,i,i.return),zo(i);break;case 1:Xr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Ny(i,i.return,o),zo(i);break;case 27:Ju(i.stateNode);case 26:case 5:Xr(i,i.return),zo(i);break;case 22:i.memoizedState===null&&zo(i);break;case 30:zo(i);break;default:zo(i)}e=e.sibling}}function Ds(e,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,p=e,g=i,b=g.flags;switch(g.tag){case 0:case 11:case 15:Ds(p,g,o),qu(4,g);break;case 1:if(Ds(p,g,o),c=g,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){Ee(c,c.return,X)}if(c=g,p=c.updateQueue,p!==null){var I=c.stateNode;try{var V=p.shared.hiddenCallbacks;if(V!==null)for(p.shared.hiddenCallbacks=null,p=0;p<V.length;p++)T_(V[p],I)}catch(X){Ee(c,c.return,X)}}o&&b&64&&Ly(g),Fu(g,g.return);break;case 27:Dy(g);case 26:case 5:Ds(p,g,o),o&&c===null&&b&4&&Py(g),Fu(g,g.return);break;case 12:Ds(p,g,o);break;case 31:Ds(p,g,o),o&&b&4&&By(p,g);break;case 13:Ds(p,g,o),o&&b&4&&jy(p,g);break;case 22:g.memoizedState===null&&Ds(p,g,o),Fu(g,g.return);break;case 30:break;default:Ds(p,g,o)}i=i.sibling}}function mm(e,i){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&Ou(o))}function pm(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Ou(e))}function Ar(e,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Fy(e,i,o,c),i=i.sibling}function Fy(e,i,o,c){var p=i.flags;switch(i.tag){case 0:case 11:case 15:Ar(e,i,o,c),p&2048&&qu(9,i);break;case 1:Ar(e,i,o,c);break;case 3:Ar(e,i,o,c),p&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Ou(e)));break;case 12:if(p&2048){Ar(e,i,o,c),e=i.stateNode;try{var g=i.memoizedProps,b=g.id,I=g.onPostCommit;typeof I=="function"&&I(b,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(V){Ee(i,i.return,V)}}else Ar(e,i,o,c);break;case 31:Ar(e,i,o,c);break;case 13:Ar(e,i,o,c);break;case 23:break;case 22:g=i.stateNode,b=i.alternate,i.memoizedState!==null?g._visibility&2?Ar(e,i,o,c):Gu(e,i):g._visibility&2?Ar(e,i,o,c):(g._visibility|=2,kl(e,i,o,c,(i.subtreeFlags&10256)!==0||!1)),p&2048&&mm(b,i);break;case 24:Ar(e,i,o,c),p&2048&&pm(i.alternate,i);break;default:Ar(e,i,o,c)}}function kl(e,i,o,c,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=e,b=i,I=o,V=c,X=b.flags;switch(b.tag){case 0:case 11:case 15:kl(g,b,I,V,p),qu(8,b);break;case 23:break;case 22:var ot=b.stateNode;b.memoizedState!==null?ot._visibility&2?kl(g,b,I,V,p):Gu(g,b):(ot._visibility|=2,kl(g,b,I,V,p)),p&&X&2048&&mm(b.alternate,b);break;case 24:kl(g,b,I,V,p),p&&X&2048&&pm(b.alternate,b);break;default:kl(g,b,I,V,p)}i=i.sibling}}function Gu(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=e,c=i,p=c.flags;switch(c.tag){case 22:Gu(o,c),p&2048&&mm(c.alternate,c);break;case 24:Gu(o,c),p&2048&&pm(c.alternate,c);break;default:Gu(o,c)}i=i.sibling}}var Zu=8192;function Vl(e,i,o){if(e.subtreeFlags&Zu)for(e=e.child;e!==null;)Gy(e,i,o),e=e.sibling}function Gy(e,i,o){switch(e.tag){case 26:Vl(e,i,o),e.flags&Zu&&e.memoizedState!==null&&hA(o,Sr,e.memoizedState,e.memoizedProps);break;case 5:Vl(e,i,o);break;case 3:case 4:var c=Sr;Sr=Bh(e.stateNode.containerInfo),Vl(e,i,o),Sr=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=Zu,Zu=16777216,Vl(e,i,o),Zu=c):Vl(e,i,o));break;default:Vl(e,i,o)}}function Zy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Ku(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];An=c,Yy(c,e)}Zy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ky(e),e=e.sibling}function Ky(e){switch(e.tag){case 0:case 11:case 15:Ku(e),e.flags&2048&&wa(9,e,e.return);break;case 3:Ku(e);break;case 12:Ku(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Ch(e)):Ku(e);break;default:Ku(e)}}function Ch(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];An=c,Yy(c,e)}Zy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:wa(8,i,i.return),Ch(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Ch(i));break;default:Ch(i)}e=e.sibling}}function Yy(e,i){for(;An!==null;){var o=An;switch(o.tag){case 0:case 11:case 15:wa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ou(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,An=c;else t:for(o=e;An!==null;){c=An;var p=c.sibling,g=c.return;if(Uy(c),c===o){An=null;break t}if(p!==null){p.return=g,An=p;break t}An=g}}}var RS={getCacheForType:function(e){var i=In(on),o=i.data.get(e);return o===void 0&&(o=e(),i.data.set(e,o)),o},cacheSignal:function(){return In(on).controller.signal}},CS=typeof WeakMap=="function"?WeakMap:Map,ge=0,xe=null,Wt=null,ne=0,Te=0,Mi=null,ba=!1,Ul=!1,gm=!1,ks=0,$e=0,Sa=0,Bo=0,_m=0,Di=0,zl=0,Yu=null,pi=null,ym=!1,Ih=0,Qy=0,xh=1/0,Oh=null,Aa=null,gn=0,Ra=null,Bl=null,Vs=0,vm=0,Tm=null,$y=null,Qu=0,Em=null;function ki(){return(ge&2)!==0&&ne!==0?ne&-ne:rt.T!==null?Cm():oo()}function Xy(){if(Di===0)if((ne&536870912)===0||Xt){var e=Dr;Dr<<=1,(Dr&3932160)===0&&(Dr=262144),Di=e}else Di=536870912;return e=Ni.current,e!==null&&(e.flags|=32),Di}function gi(e,i,o){(e===xe&&(Te===2||Te===9)||e.cancelPendingCommit!==null)&&(jl(e,0),Ca(e,ne,Di,!1)),hr(e,o),((ge&2)===0||e!==xe)&&(e===xe&&((ge&2)===0&&(Bo|=o),$e===4&&Ca(e,ne,Di,!1)),Wr(e))}function Wy(e,i,o){if((ge&6)!==0)throw Error(s(327));var c=!o&&(i&127)===0&&(i&e.expiredLanes)===0||Ti(e,i),p=c?OS(e,i):bm(e,i,!0),g=c;do{if(p===0){Ul&&!c&&Ca(e,i,0,!1);break}else{if(o=e.current.alternate,g&&!IS(o)){p=bm(e,i,!1),g=!1;continue}if(p===2){if(g=i,e.errorRecoveryDisabledLanes&g)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;t:{var I=e;p=Yu;var V=I.current.memoizedState.isDehydrated;if(V&&(jl(I,b).flags|=256),b=bm(I,b,!1),b!==2){if(gm&&!V){I.errorRecoveryDisabledLanes|=g,Bo|=g,p=4;break t}g=pi,pi=p,g!==null&&(pi===null?pi=g:pi.push.apply(pi,g))}p=b}if(g=!1,p!==2)continue}}if(p===1){jl(e,0),Ca(e,i,0,!0);break}t:{switch(c=e,g=p,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ca(c,i,Di,!ba);break t;case 2:pi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(p=Ih+300-Cn(),10<p)){if(Ca(c,i,Di,!ba),qi(c,0,!0)!==0)break t;Vs=i,c.timeoutHandle=xv(Jy.bind(null,c,o,pi,Oh,ym,i,Di,Bo,zl,ba,g,"Throttled",-0,0),p);break t}Jy(c,o,pi,Oh,ym,i,Di,Bo,zl,ba,g,null,-0,0)}}break}while(!0);Wr(e)}function Jy(e,i,o,c,p,g,b,I,V,X,ot,ht,et,it){if(e.timeoutHandle=-1,ht=i.subtreeFlags,ht&8192||(ht&16785408)===16785408){ht={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mn},Gy(i,g,ht);var It=(g&62914560)===g?Ih-Cn():(g&4194048)===g?Qy-Cn():0;if(It=fA(ht,It),It!==null){Vs=g,e.cancelPendingCommit=It(ov.bind(null,e,i,g,o,c,p,b,I,V,ot,ht,null,et,it)),Ca(e,g,b,!X);return}}ov(e,i,g,o,c,p,b,I,V)}function IS(e){for(var i=e;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var p=o[c],g=p.getSnapshot;p=p.value;try{if(!bn(g(),p))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ca(e,i,o,c){i&=~_m,i&=~Bo,e.suspendedLanes|=i,e.pingedLanes&=~i,c&&(e.warmLanes|=i),c=e.expirationTimes;for(var p=i;0<p;){var g=31-Ve(p),b=1<<g;c[g]=-1,p&=~b}o!==0&&ps(e,o,i)}function Lh(){return(ge&6)===0?($u(0),!1):!0}function wm(){if(Wt!==null){if(Te===0)var e=Wt.return;else e=Wt,br=$r=null,Ud(e),Ll=null,Nu=0,e=Wt;for(;e!==null;)Oy(e.alternate,e),e=e.return;Wt=null}}function jl(e,i){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,YS(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),Vs=0,wm(),xe=e,Wt=o=ir(e.current,null),ne=i,Te=0,Mi=null,ba=!1,Ul=Ti(e,i),gm=!1,zl=Di=_m=Bo=Sa=$e=0,pi=Yu=null,ym=!1,(i&8)!==0&&(i|=i&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=i;0<c;){var p=31-Ve(c),g=1<<p;i|=e[p],c&=~g}return ks=i,Co(),o}function tv(e,i){Gt=null,rt.H=Bu,i===Ol||i===ah?(i=g_(),Te=3):i===Rd?(i=g_(),Te=4):Te=i===tm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Mi=i,Wt===null&&($e=1,Th(e,u(i,e.current)))}function ev(){var e=Ni.current;return e===null?!0:(ne&4194048)===ne?rr===null:(ne&62914560)===ne||(ne&536870912)!==0?e===rr:!1}function nv(){var e=rt.H;return rt.H=Bu,e===null?Bu:e}function iv(){var e=rt.A;return rt.A=RS,e}function Nh(){$e=4,ba||(ne&4194048)!==ne&&Ni.current!==null||(Ul=!0),(Sa&134217727)===0&&(Bo&134217727)===0||xe===null||Ca(xe,ne,Di,!1)}function bm(e,i,o){var c=ge;ge|=2;var p=nv(),g=iv();(xe!==e||ne!==i)&&(Oh=null,jl(e,i)),i=!1;var b=$e;t:do try{if(Te!==0&&Wt!==null){var I=Wt,V=Mi;switch(Te){case 8:wm(),b=6;break t;case 3:case 2:case 9:case 6:Ni.current===null&&(i=!0);var X=Te;if(Te=0,Mi=null,Hl(e,I,V,X),o&&Ul){b=0;break t}break;default:X=Te,Te=0,Mi=null,Hl(e,I,V,X)}}xS(),b=$e;break}catch(ot){tv(e,ot)}while(!0);return i&&e.shellSuspendCounter++,br=$r=null,ge=c,rt.H=p,rt.A=g,Wt===null&&(xe=null,ne=0,Co()),b}function xS(){for(;Wt!==null;)rv(Wt)}function OS(e,i){var o=ge;ge|=2;var c=nv(),p=iv();xe!==e||ne!==i?(Oh=null,xh=Cn()+500,jl(e,i)):Ul=Ti(e,i);t:do try{if(Te!==0&&Wt!==null){i=Wt;var g=Mi;e:switch(Te){case 1:Te=0,Mi=null,Hl(e,i,g,1);break;case 2:case 9:if(m_(g)){Te=0,Mi=null,sv(i);break}i=function(){Te!==2&&Te!==9||xe!==e||(Te=7),Wr(e)},g.then(i,i);break t;case 3:Te=7;break t;case 4:Te=5;break t;case 7:m_(g)?(Te=0,Mi=null,sv(i)):(Te=0,Mi=null,Hl(e,i,g,7));break;case 5:var b=null;switch(Wt.tag){case 26:b=Wt.memoizedState;case 5:case 27:var I=Wt;if(b?Fv(b):I.stateNode.complete){Te=0,Mi=null;var V=I.sibling;if(V!==null)Wt=V;else{var X=I.return;X!==null?(Wt=X,Ph(X)):Wt=null}break e}}Te=0,Mi=null,Hl(e,i,g,5);break;case 6:Te=0,Mi=null,Hl(e,i,g,6);break;case 8:wm(),$e=6;break t;default:throw Error(s(462))}}LS();break}catch(ot){tv(e,ot)}while(!0);return br=$r=null,rt.H=c,rt.A=p,ge=o,Wt!==null?0:(xe=null,ne=0,Co(),$e)}function LS(){for(;Wt!==null&&!ol();)rv(Wt)}function rv(e){var i=Iy(e.alternate,e,ks);e.memoizedProps=e.pendingProps,i===null?Ph(e):Wt=i}function sv(e){var i=e,o=i.alternate;switch(i.tag){case 15:case 0:i=wy(o,i,i.pendingProps,i.type,void 0,ne);break;case 11:i=wy(o,i,i.pendingProps,i.type.render,i.ref,ne);break;case 5:Ud(i);default:Oy(o,i),i=Wt=Au(i,ks),i=Iy(o,i,ks)}e.memoizedProps=e.pendingProps,i===null?Ph(e):Wt=i}function Hl(e,i,o,c){br=$r=null,Ud(i),Ll=null,Nu=0;var p=i.return;try{if(vS(e,p,i,o,ne)){$e=1,Th(e,u(o,e.current)),Wt=null;return}}catch(g){if(p!==null)throw Wt=p,g;$e=1,Th(e,u(o,e.current)),Wt=null;return}i.flags&32768?(Xt||c===1?e=!0:Ul||(ne&536870912)!==0?e=!1:(ba=e=!0,(c===2||c===9||c===3||c===6)&&(c=Ni.current,c!==null&&c.tag===13&&(c.flags|=16384))),av(i,e)):Ph(i)}function Ph(e){var i=e;do{if((i.flags&32768)!==0){av(i,ba);return}e=i.return;var o=wS(i.alternate,i,ks);if(o!==null){Wt=o;return}if(i=i.sibling,i!==null){Wt=i;return}Wt=i=e}while(i!==null);$e===0&&($e=5)}function av(e,i){do{var o=bS(e.alternate,e);if(o!==null){o.flags&=32767,Wt=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(e=e.sibling,e!==null)){Wt=e;return}Wt=e=o}while(e!==null);$e=6,Wt=null}function ov(e,i,o,c,p,g,b,I,V){e.cancelPendingCommit=null;do Mh();while(gn!==0);if((ge&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=bl,bu(e,o,g,b,I,V),e===xe&&(Wt=xe=null,ne=0),Bl=i,Ra=e,Vs=o,vm=g,Tm=p,$y=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,DS(cr,function(){return fv(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=rt.T,rt.T=null,p=vt.p,vt.p=2,b=ge,ge|=4;try{SS(e,i,o)}finally{ge=b,vt.p=p,rt.T=c}}gn=1,lv(),uv(),cv()}}function lv(){if(gn===1){gn=0;var e=Ra,i=Bl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=rt.T,rt.T=null;var c=vt.p;vt.p=2;var p=ge;ge|=4;try{Hy(i,e);var g=Dm,b=wo(e.containerInfo),I=g.focusedElem,V=g.selectionRange;if(b!==I&&I&&I.ownerDocument&&vl(I.ownerDocument.documentElement,I)){if(V!==null&&qr(I)){var X=V.start,ot=V.end;if(ot===void 0&&(ot=X),"selectionStart"in I)I.selectionStart=X,I.selectionEnd=Math.min(ot,I.value.length);else{var ht=I.ownerDocument||document,et=ht&&ht.defaultView||window;if(et.getSelection){var it=et.getSelection(),It=I.textContent.length,Vt=Math.min(V.start,It),Ae=V.end===void 0?Vt:Math.min(V.end,It);!it.extend&&Vt>Ae&&(b=Ae,Ae=Vt,Vt=b);var G=Eo(I,Vt),B=Eo(I,Ae);if(G&&B&&(it.rangeCount!==1||it.anchorNode!==G.node||it.anchorOffset!==G.offset||it.focusNode!==B.node||it.focusOffset!==B.offset)){var $=ht.createRange();$.setStart(G.node,G.offset),it.removeAllRanges(),Vt>Ae?(it.addRange($),it.extend(B.node,B.offset)):($.setEnd(B.node,B.offset),it.addRange($))}}}}for(ht=[],it=I;it=it.parentNode;)it.nodeType===1&&ht.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ht.length;I++){var lt=ht[I];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}Zh=!!Mm,Dm=Mm=null}finally{ge=p,vt.p=c,rt.T=o}}e.current=i,gn=2}}function uv(){if(gn===2){gn=0;var e=Ra,i=Bl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=rt.T,rt.T=null;var c=vt.p;vt.p=2;var p=ge;ge|=4;try{Vy(e,i.alternate,i)}finally{ge=p,vt.p=c,rt.T=o}}gn=3}}function cv(){if(gn===4||gn===3){gn=0,no();var e=Ra,i=Bl,o=Vs,c=$y;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?gn=5:(gn=0,Bl=Ra=null,hv(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(Aa=null),Ct(o),i=i.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Jn,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=rt.T,p=vt.p,vt.p=2,rt.T=null;try{for(var g=e.onRecoverableError,b=0;b<c.length;b++){var I=c[b];g(I.value,{componentStack:I.stack})}}finally{rt.T=i,vt.p=p}}(Vs&3)!==0&&Mh(),Wr(e),p=e.pendingLanes,(o&261930)!==0&&(p&42)!==0?e===Em?Qu++:(Qu=0,Em=e):Qu=0,$u(0)}}function hv(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Ou(i)))}function Mh(){return lv(),uv(),cv(),fv()}function fv(){if(gn!==5)return!1;var e=Ra,i=vm;vm=0;var o=Ct(Vs),c=rt.T,p=vt.p;try{vt.p=32>o?32:o,rt.T=null,o=Tm,Tm=null;var g=Ra,b=Vs;if(gn=0,Bl=Ra=null,Vs=0,(ge&6)!==0)throw Error(s(331));var I=ge;if(ge|=4,Ky(g.current),Fy(g,g.current,b,o),ge=I,$u(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Jn,g)}catch{}return!0}finally{vt.p=p,rt.T=c,hv(e,i)}}function dv(e,i,o){i=u(o,i),i=Jd(e.stateNode,i,2),e=va(e,i,2),e!==null&&(hr(e,2),Wr(e))}function Ee(e,i,o){if(e.tag===3)dv(e,e,o);else for(;i!==null;){if(i.tag===3){dv(i,e,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Aa===null||!Aa.has(c))){e=u(o,e),o=my(2),c=va(i,o,2),c!==null&&(py(o,c,i,e),hr(c,2),Wr(c));break}}i=i.return}}function Sm(e,i,o){var c=e.pingCache;if(c===null){c=e.pingCache=new CS;var p=new Set;c.set(i,p)}else p=c.get(i),p===void 0&&(p=new Set,c.set(i,p));p.has(o)||(gm=!0,p.add(o),e=NS.bind(null,e,i,o),i.then(e,e))}function NS(e,i,o){var c=e.pingCache;c!==null&&c.delete(i),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,xe===e&&(ne&o)===o&&($e===4||$e===3&&(ne&62914560)===ne&&300>Cn()-Ih?(ge&2)===0&&jl(e,0):_m|=o,zl===ne&&(zl=0)),Wr(e)}function mv(e,i){i===0&&(i=cl()),e=nr(e,i),e!==null&&(hr(e,i),Wr(e))}function PS(e){var i=e.memoizedState,o=0;i!==null&&(o=i.retryLane),mv(e,o)}function MS(e,i){var o=0;switch(e.tag){case 31:case 13:var c=e.stateNode,p=e.memoizedState;p!==null&&(o=p.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),mv(e,o)}function DS(e,i){return Ge(e,i)}var Dh=null,ql=null,Am=!1,kh=!1,Rm=!1,Ia=0;function Wr(e){e!==ql&&e.next===null&&(ql===null?Dh=ql=e:ql=ql.next=e),kh=!0,Am||(Am=!0,VS())}function $u(e,i){if(!Rm&&kh){Rm=!0;do for(var o=!1,c=Dh;c!==null;){if(e!==0){var p=c.pendingLanes;if(p===0)var g=0;else{var b=c.suspendedLanes,I=c.pingedLanes;g=(1<<31-Ve(42|e)+1)-1,g&=p&~(b&~I),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,yv(c,g))}else g=ne,g=qi(c,c===xe?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Ti(c,g)||(o=!0,yv(c,g));c=c.next}while(o);Rm=!1}}function kS(){pv()}function pv(){kh=Am=!1;var e=0;Ia!==0&&KS()&&(e=Ia);for(var i=Cn(),o=null,c=Dh;c!==null;){var p=c.next,g=gv(c,i);g===0?(c.next=null,o===null?Dh=p:o.next=p,p===null&&(ql=o)):(o=c,(e!==0||(g&3)!==0)&&(kh=!0)),c=p}gn!==0&&gn!==5||$u(e),Ia!==0&&(Ia=0)}function gv(e,i){for(var o=e.suspendedLanes,c=e.pingedLanes,p=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var b=31-Ve(g),I=1<<b,V=p[b];V===-1?((I&o)===0||(I&c)!==0)&&(p[b]=wu(I,i)):V<=i&&(e.expiredLanes|=I),g&=~I}if(i=xe,o=ne,o=qi(e,e===i?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,o===0||e===i&&(Te===2||Te===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&ji(c),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Ti(e,o)){if(i=o&-o,i===e.callbackPriority)return i;switch(c!==null&&ji(c),Ct(o)){case 2:case 8:o=$s;break;case 32:o=cr;break;case 268435456:o=io;break;default:o=cr}return c=_v.bind(null,e),o=Ge(o,c),e.callbackPriority=i,e.callbackNode=o,i}return c!==null&&c!==null&&ji(c),e.callbackPriority=2,e.callbackNode=null,2}function _v(e,i){if(gn!==0&&gn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(Mh()&&e.callbackNode!==o)return null;var c=ne;return c=qi(e,e===xe?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Wy(e,c,i),gv(e,Cn()),e.callbackNode!=null&&e.callbackNode===o?_v.bind(null,e):null)}function yv(e,i){if(Mh())return null;Wy(e,i,!0)}function VS(){QS(function(){(ge&6)!==0?Ge(ms,kS):pv()})}function Cm(){if(Ia===0){var e=Il;e===0&&(e=vi,vi<<=1,(vi&261888)===0&&(vi=256)),Ia=e}return Ia}function vv(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ur(""+e)}function Tv(e,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,e.id&&o.setAttribute("form",e.id),i.parentNode.insertBefore(o,i),e=new FormData(e),o.parentNode.removeChild(o),e}function US(e,i,o,c,p){if(i==="submit"&&o&&o.stateNode===p){var g=vv((p[Ze]||null).action),b=c.submitter;b&&(i=(i=b[Ze]||null)?vv(i.formAction):b.getAttribute("formAction"),i!==null&&(g=i,b=null));var I=new Wi("action","action",null,c,p);e.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ia!==0){var V=b?Tv(p,b):new FormData(p);Kd(o,{pending:!0,data:V,method:p.method,action:g},null,V)}}else typeof g=="function"&&(I.preventDefault(),V=b?Tv(p,b):new FormData(p),Kd(o,{pending:!0,data:V,method:p.method,action:g},g,V))},currentTarget:p}]})}}for(var Im=0;Im<Zr.length;Im++){var xm=Zr[Im],zS=xm.toLowerCase(),BS=xm[0].toUpperCase()+xm.slice(1);ui(zS,"on"+BS)}ui(So,"onAnimationEnd"),ui(th,"onAnimationIteration"),ui(Ao,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(yd,"onTransitionRun"),ui(eh,"onTransitionStart"),ui(vd,"onTransitionCancel"),ui(ma,"onTransitionEnd"),ii("onMouseEnter",["mouseout","mouseover"]),ii("onMouseLeave",["mouseout","mouseover"]),ii("onPointerEnter",["pointerout","pointerover"]),ii("onPointerLeave",["pointerout","pointerover"]),Ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xu));function Ev(e,i){i=(i&4)!==0;for(var o=0;o<e.length;o++){var c=e[o],p=c.event;c=c.listeners;t:{var g=void 0;if(i)for(var b=c.length-1;0<=b;b--){var I=c[b],V=I.instance,X=I.currentTarget;if(I=I.listener,V!==g&&p.isPropagationStopped())break t;g=I,p.currentTarget=X;try{g(p)}catch(ot){Ro(ot)}p.currentTarget=null,g=V}else for(b=0;b<c.length;b++){if(I=c[b],V=I.instance,X=I.currentTarget,I=I.listener,V!==g&&p.isPropagationStopped())break t;g=I,p.currentTarget=X;try{g(p)}catch(ot){Ro(ot)}p.currentTarget=null,g=V}}}}function Jt(e,i){var o=i[wi];o===void 0&&(o=i[wi]=new Set);var c=e+"__bubble";o.has(c)||(wv(i,e,2,!1),o.add(c))}function Om(e,i,o){var c=0;i&&(c|=4),wv(o,e,c,i)}var Vh="_reactListening"+Math.random().toString(36).slice(2);function Lm(e){if(!e[Vh]){e[Vh]=!0,lo.forEach(function(o){o!=="selectionchange"&&(jS.has(o)||Om(o,!1,e),Om(o,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Vh]||(i[Vh]=!0,Om("selectionchange",!1,i))}}function wv(e,i,o,c){switch(Xv(i)){case 2:var p=pA;break;case 8:p=gA;break;default:p=Zm}o=p.bind(null,i,o,e),p=void 0,!pr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),c?p!==void 0?e.addEventListener(i,o,{capture:!0,passive:p}):e.addEventListener(i,o,!0):p!==void 0?e.addEventListener(i,o,{passive:p}):e.addEventListener(i,o,!1)}function Nm(e,i,o,c,p){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var I=c.stateNode.containerInfo;if(I===p)break;if(b===4)for(b=c.return;b!==null;){var V=b.tag;if((V===3||V===4)&&b.stateNode.containerInfo===p)return;b=b.return}for(;I!==null;){if(b=bi(I),b===null)return;if(V=b.tag,V===5||V===6||V===26||V===27){c=g=b;continue t}I=I.parentNode}}c=c.return}mr(function(){var X=g,ot=Dn(o),ht=[];t:{var et=nh.get(e);if(et!==void 0){var it=Wi,It=e;switch(e){case"keypress":if(Br(o)===0)break t;case"keydown":case"keyup":it=go;break;case"focusin":It="focus",it=Es;break;case"focusout":It="blur",it=Es;break;case"beforeblur":case"afterblur":it=Es;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=ml;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=E;break;case So:case th:case Ao:it=ra;break;case ma:it=x;break;case"scroll":case"scrollend":it=Yt;break;case"wheel":it=nt;break;case"copy":case"cut":case"paste":it=Yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=vr;break;case"toggle":case"beforetoggle":it=zt}var Vt=(i&4)!==0,Ae=!Vt&&(e==="scroll"||e==="scrollend"),G=Vt?et!==null?et+"Capture":null:et;Vt=[];for(var B=X,$;B!==null;){var lt=B;if($=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||$===null||G===null||(lt=Kn(B,G),lt!=null&&Vt.push(Wu(B,lt,$))),Ae)break;B=B.return}0<Vt.length&&(et=new it(et,It,null,o,ot),ht.push({event:et,listeners:Vt}))}}if((i&7)===0){t:{if(et=e==="mouseover"||e==="pointerover",it=e==="mouseout"||e==="pointerout",et&&o!==ia&&(It=o.relatedTarget||o.fromElement)&&(bi(It)||It[Ei]))break t;if((it||et)&&(et=ot.window===ot?ot:(et=ot.ownerDocument)?et.defaultView||et.parentWindow:window,it?(It=o.relatedTarget||o.toElement,it=X,It=It?bi(It):null,It!==null&&(Ae=h(It),Vt=It.tag,It!==Ae||Vt!==5&&Vt!==27&&Vt!==6)&&(It=null)):(it=null,It=X),it!==It)){if(Vt=co,lt="onMouseLeave",G="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(Vt=vr,lt="onPointerLeave",G="onPointerEnter",B="pointer"),Ae=it==null?et:vn(it),$=It==null?et:vn(It),et=new Vt(lt,B+"leave",it,o,ot),et.target=Ae,et.relatedTarget=$,lt=null,bi(ot)===X&&(Vt=new Vt(G,B+"enter",It,o,ot),Vt.target=$,Vt.relatedTarget=Ae,lt=Vt),Ae=lt,it&&It)e:{for(Vt=HS,G=it,B=It,$=0,lt=G;lt;lt=Vt(lt))$++;lt=0;for(var Nt=B;Nt;Nt=Vt(Nt))lt++;for(;0<$-lt;)G=Vt(G),$--;for(;0<lt-$;)B=Vt(B),lt--;for(;$--;){if(G===B||B!==null&&G===B.alternate){Vt=G;break e}G=Vt(G),B=Vt(B)}Vt=null}else Vt=null;it!==null&&bv(ht,et,it,Vt,!1),It!==null&&Ae!==null&&bv(ht,Ae,It,Vt,!0)}}t:{if(et=X?vn(X):window,it=et.nodeName&&et.nodeName.toLowerCase(),it==="select"||it==="input"&&et.type==="file")var me=To;else if(Ji(et))if(Qc)me=_d;else{me=gd;var Ot=Tr}else it=et.nodeName,!it||it.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?X&&Vr(X.elementType)&&(me=To):me=ca;if(me&&(me=me(e,X))){Yc(ht,me,o,ot);break t}Ot&&Ot(e,et,X),e==="focusout"&&X&&et.type==="number"&&X.memoizedProps.value!=null&&Si(et,"number",et.value)}switch(Ot=X?vn(X):window,e){case"focusin":(Ji(Ot)||Ot.contentEditable==="true")&&(Fr=Ot,El=X,bo=null);break;case"focusout":bo=El=Fr=null;break;case"mousedown":fa=!0;break;case"contextmenu":case"mouseup":case"dragend":fa=!1,Wc(ht,o,ot);break;case"selectionchange":if(Tl)break;case"keydown":case"keyup":Wc(ht,o,ot)}var Kt;if(ue)t:{switch(e){case"compositionstart":var ie="onCompositionStart";break t;case"compositionend":ie="onCompositionEnd";break t;case"compositionupdate":ie="onCompositionUpdate";break t}ie=void 0}else oa?ws(e,o)&&(ie="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(ie="onCompositionStart");ie&&(li&&o.locale!=="ko"&&(oa||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&oa&&(Kt=Ai()):(ai=ot,gr="value"in ai?ai.value:ai.textContent,oa=!0)),Ot=Uh(X,ie),0<Ot.length&&(ie=new Ii(ie,e,null,o,ot),ht.push({event:ie,listeners:Ot}),Kt?ie.data=Kt:(Kt=bs(o),Kt!==null&&(ie.data=Kt)))),(Kt=oi?Li(e,o):la(e,o))&&(ie=Uh(X,"onBeforeInput"),0<ie.length&&(Ot=new Ii("onBeforeInput","beforeinput",null,o,ot),ht.push({event:Ot,listeners:ie}),Ot.data=Kt)),US(ht,e,X,o,ot)}Ev(ht,i)})}function Wu(e,i,o){return{instance:e,listener:i,currentTarget:o}}function Uh(e,i){for(var o=i+"Capture",c=[];e!==null;){var p=e,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Kn(e,o),p!=null&&c.unshift(Wu(e,p,g)),p=Kn(e,i),p!=null&&c.push(Wu(e,p,g))),e.tag===3)return c;e=e.return}return[]}function HS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bv(e,i,o,c,p){for(var g=i._reactName,b=[];o!==null&&o!==c;){var I=o,V=I.alternate,X=I.stateNode;if(I=I.tag,V!==null&&V===c)break;I!==5&&I!==26&&I!==27||X===null||(V=X,p?(X=Kn(o,g),X!=null&&b.unshift(Wu(o,X,V))):p||(X=Kn(o,g),X!=null&&b.push(Wu(o,X,V)))),o=o.return}b.length!==0&&e.push({event:i,listeners:b})}var qS=/\r\n?/g,FS=/\u0000|\uFFFD/g;function Sv(e){return(typeof e=="string"?e:""+e).replace(qS,`
`).replace(FS,"")}function Av(e,i){return i=Sv(i),Sv(e)===i}function Se(e,i,o,c,p,g){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||sn(e,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&sn(e,""+c);break;case"className":$t(e,"class",c);break;case"tabIndex":$t(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":$t(e,o,c);break;case"style":ys(e,c,g);break;case"data":if(i!=="object"){$t(e,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){e.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(o);break}c=Ur(""+c),e.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&Se(e,i,"name",p.name,p,null),Se(e,i,"formEncType",p.formEncType,p,null),Se(e,i,"formMethod",p.formMethod,p,null),Se(e,i,"formTarget",p.formTarget,p,null)):(Se(e,i,"encType",p.encType,p,null),Se(e,i,"method",p.method,p,null),Se(e,i,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(o);break}c=Ur(""+c),e.setAttribute(o,c);break;case"onClick":c!=null&&(e.onclick=Mn);break;case"onScroll":c!=null&&Jt("scroll",e);break;case"onScrollEnd":c!=null&&Jt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}o=Ur(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(o,""+c):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":c===!0?e.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(o,c):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(o,c):e.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(o):e.setAttribute(o,c);break;case"popover":Jt("beforetoggle",e),Jt("toggle",e),Qt(e,"popover",c);break;case"xlinkActuate":Ne(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ne(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ne(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ne(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ne(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ne(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ne(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ne(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ne(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Qt(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=vs.get(o)||o,Qt(e,o,c))}}function Pm(e,i,o,c,p,g){switch(o){case"style":ys(e,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"children":typeof c=="string"?sn(e,c):(typeof c=="number"||typeof c=="bigint")&&sn(e,""+c);break;case"onScroll":c!=null&&Jt("scroll",e);break;case"onScrollEnd":c!=null&&Jt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uo.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),i=o.slice(2,p?o.length-7:void 0),g=e[Ze]||null,g=g!=null?g[o]:null,typeof g=="function"&&e.removeEventListener(i,g,p),typeof c=="function")){typeof g!="function"&&g!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(i,c,p);break t}o in e?e[o]=c:c===!0?e.setAttribute(o,""):Qt(e,o,c)}}}function On(e,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jt("error",e),Jt("load",e);var c=!1,p=!1,g;for(g in o)if(o.hasOwnProperty(g)){var b=o[g];if(b!=null)switch(g){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Se(e,i,g,b,o,null)}}p&&Se(e,i,"srcSet",o.srcSet,o,null),c&&Se(e,i,"src",o.src,o,null);return;case"input":Jt("invalid",e);var I=g=b=p=null,V=null,X=null;for(c in o)if(o.hasOwnProperty(c)){var ot=o[c];if(ot!=null)switch(c){case"name":p=ot;break;case"type":b=ot;break;case"checked":V=ot;break;case"defaultChecked":X=ot;break;case"value":g=ot;break;case"defaultValue":I=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(s(137,i));break;default:Se(e,i,c,ot,o,null)}}_s(e,g,I,V,X,b,p,!1);return;case"select":Jt("invalid",e),c=b=g=null;for(p in o)if(o.hasOwnProperty(p)&&(I=o[p],I!=null))switch(p){case"value":g=I;break;case"defaultValue":b=I;break;case"multiple":c=I;default:Se(e,i,p,I,o,null)}i=g,o=b,e.multiple=!!c,i!=null?ve(e,!!c,i,!1):o!=null&&ve(e,!!c,o,!0);return;case"textarea":Jt("invalid",e),g=p=c=null;for(b in o)if(o.hasOwnProperty(b)&&(I=o[b],I!=null))switch(b){case"value":c=I;break;case"defaultValue":p=I;break;case"children":g=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:Se(e,i,b,I,o,null)}si(e,c,p,g);return;case"option":for(V in o)if(o.hasOwnProperty(V)&&(c=o[V],c!=null))switch(V){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Se(e,i,V,c,o,null)}return;case"dialog":Jt("beforetoggle",e),Jt("toggle",e),Jt("cancel",e),Jt("close",e);break;case"iframe":case"object":Jt("load",e);break;case"video":case"audio":for(c=0;c<Xu.length;c++)Jt(Xu[c],e);break;case"image":Jt("error",e),Jt("load",e);break;case"details":Jt("toggle",e);break;case"embed":case"source":case"link":Jt("error",e),Jt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(c=o[X],c!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Se(e,i,X,c,o,null)}return;default:if(Vr(i)){for(ot in o)o.hasOwnProperty(ot)&&(c=o[ot],c!==void 0&&Pm(e,i,ot,c,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(c=o[I],c!=null&&Se(e,i,I,c,o,null))}function GS(e,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,b=null,I=null,V=null,X=null,ot=null;for(it in o){var ht=o[it];if(o.hasOwnProperty(it)&&ht!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":V=ht;default:c.hasOwnProperty(it)||Se(e,i,it,null,c,ht)}}for(var et in c){var it=c[et];if(ht=o[et],c.hasOwnProperty(et)&&(it!=null||ht!=null))switch(et){case"type":g=it;break;case"name":p=it;break;case"checked":X=it;break;case"defaultChecked":ot=it;break;case"value":b=it;break;case"defaultValue":I=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(s(137,i));break;default:it!==ht&&Se(e,i,et,it,c,ht)}}ea(e,b,I,V,X,ot,g,p);return;case"select":it=b=I=et=null;for(g in o)if(V=o[g],o.hasOwnProperty(g)&&V!=null)switch(g){case"value":break;case"multiple":it=V;default:c.hasOwnProperty(g)||Se(e,i,g,null,c,V)}for(p in c)if(g=c[p],V=o[p],c.hasOwnProperty(p)&&(g!=null||V!=null))switch(p){case"value":et=g;break;case"defaultValue":I=g;break;case"multiple":b=g;default:g!==V&&Se(e,i,p,g,c,V)}i=I,o=b,c=it,et!=null?ve(e,!!o,et,!1):!!c!=!!o&&(i!=null?ve(e,!!o,i,!0):ve(e,!!o,o?[]:"",!1));return;case"textarea":it=et=null;for(I in o)if(p=o[I],o.hasOwnProperty(I)&&p!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Se(e,i,I,null,c,p)}for(b in c)if(p=c[b],g=o[b],c.hasOwnProperty(b)&&(p!=null||g!=null))switch(b){case"value":et=p;break;case"defaultValue":it=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==g&&Se(e,i,b,p,c,g)}Qi(e,et,it);return;case"option":for(var It in o)if(et=o[It],o.hasOwnProperty(It)&&et!=null&&!c.hasOwnProperty(It))switch(It){case"selected":e.selected=!1;break;default:Se(e,i,It,null,c,et)}for(V in c)if(et=c[V],it=o[V],c.hasOwnProperty(V)&&et!==it&&(et!=null||it!=null))switch(V){case"selected":e.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:Se(e,i,V,et,c,it)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in o)et=o[Vt],o.hasOwnProperty(Vt)&&et!=null&&!c.hasOwnProperty(Vt)&&Se(e,i,Vt,null,c,et);for(X in c)if(et=c[X],it=o[X],c.hasOwnProperty(X)&&et!==it&&(et!=null||it!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(s(137,i));break;default:Se(e,i,X,et,c,it)}return;default:if(Vr(i)){for(var Ae in o)et=o[Ae],o.hasOwnProperty(Ae)&&et!==void 0&&!c.hasOwnProperty(Ae)&&Pm(e,i,Ae,void 0,c,et);for(ot in c)et=c[ot],it=o[ot],!c.hasOwnProperty(ot)||et===it||et===void 0&&it===void 0||Pm(e,i,ot,et,c,it);return}}for(var G in o)et=o[G],o.hasOwnProperty(G)&&et!=null&&!c.hasOwnProperty(G)&&Se(e,i,G,null,c,et);for(ht in c)et=c[ht],it=o[ht],!c.hasOwnProperty(ht)||et===it||et==null&&it==null||Se(e,i,ht,et,c,it)}function Rv(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var p=o[c],g=p.transferSize,b=p.initiatorType,I=p.duration;if(g&&I&&Rv(b)){for(b=0,I=p.responseEnd,c+=1;c<o.length;c++){var V=o[c],X=V.startTime;if(X>I)break;var ot=V.transferSize,ht=V.initiatorType;ot&&Rv(ht)&&(V=V.responseEnd,b+=ot*(V<I?1:(I-X)/(V-X)))}if(--c,i+=8*(g+b)/(p.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Mm=null,Dm=null;function zh(e){return e.nodeType===9?e:e.ownerDocument}function Cv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Iv(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function km(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Vm=null;function KS(){var e=window.event;return e&&e.type==="popstate"?e===Vm?!1:(Vm=e,!0):(Vm=null,!1)}var xv=typeof setTimeout=="function"?setTimeout:void 0,YS=typeof clearTimeout=="function"?clearTimeout:void 0,Ov=typeof Promise=="function"?Promise:void 0,QS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ov<"u"?function(e){return Ov.resolve(null).then(e).catch($S)}:xv;function $S(e){setTimeout(function(){throw e})}function xa(e){return e==="head"}function Lv(e,i){var o=i,c=0;do{var p=o.nextSibling;if(e.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(c===0){e.removeChild(p),Kl(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Ju(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,Ju(o);for(var g=o.firstChild;g;){var b=g.nextSibling,I=g.nodeName;g[Gi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=b}}else o==="body"&&Ju(e.ownerDocument.body);o=p}while(o);Kl(i)}function Nv(e,i){var o=e;e=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=c}while(o)}function Um(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Um(o),Ws(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function XS(e,i,o,c){for(;e.nodeType===1;){var p=o;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[Gi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=sr(e.nextSibling),e===null)break}return null}function WS(e,i,o){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=sr(e.nextSibling),e===null))return null;return e}function Pv(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=sr(e.nextSibling),e===null))return null;return e}function zm(e){return e.data==="$?"||e.data==="$~"}function Bm(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function JS(e,i){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function sr(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var jm=null;function Mv(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(i===0)return sr(e.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}e=e.nextSibling}return null}function Dv(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return e;i--}else o!=="/$"&&o!=="/&"||i++}e=e.previousSibling}return null}function kv(e,i,o){switch(i=zh(o),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Ju(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Ws(e)}var ar=new Map,Vv=new Set;function Bh(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Us=vt.d;vt.d={f:tA,r:eA,D:nA,C:iA,L:rA,m:sA,X:oA,S:aA,M:lA};function tA(){var e=Us.f(),i=Lh();return e||i}function eA(e){var i=ni(e);i!==null&&i.tag===5&&i.type==="form"?ty(i):Us.r(e)}var Fl=typeof document>"u"?null:document;function Uv(e,i,o){var c=Fl;if(c&&typeof i=="string"&&i){var p=Ce(i);p='link[rel="'+e+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),Vv.has(p)||(Vv.add(p),e={rel:e,crossOrigin:o,href:i},c.querySelector(p)===null&&(i=c.createElement("link"),On(i,"link",e),Ke(i),c.head.appendChild(i)))}}function nA(e){Us.D(e),Uv("dns-prefetch",e,null)}function iA(e,i){Us.C(e,i),Uv("preconnect",e,i)}function rA(e,i,o){Us.L(e,i,o);var c=Fl;if(c&&e&&i){var p='link[rel="preload"][as="'+Ce(i)+'"]';i==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+Ce(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+Ce(o.imageSizes)+'"]')):p+='[href="'+Ce(e)+'"]';var g=p;switch(i){case"style":g=Gl(e);break;case"script":g=Zl(e)}ar.has(g)||(e=C({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:e,as:i},o),ar.set(g,e),c.querySelector(p)!==null||i==="style"&&c.querySelector(tc(g))||i==="script"&&c.querySelector(ec(g))||(i=c.createElement("link"),On(i,"link",e),Ke(i),c.head.appendChild(i)))}}function sA(e,i){Us.m(e,i);var o=Fl;if(o&&e){var c=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+Ce(c)+'"][href="'+Ce(e)+'"]',g=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Zl(e)}if(!ar.has(g)&&(e=C({rel:"modulepreload",href:e},i),ar.set(g,e),o.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ec(g)))return}c=o.createElement("link"),On(c,"link",e),Ke(c),o.head.appendChild(c)}}}function aA(e,i,o){Us.S(e,i,o);var c=Fl;if(c&&e){var p=Zi(c).hoistableStyles,g=Gl(e);i=i||"default";var b=p.get(g);if(!b){var I={loading:0,preload:null};if(b=c.querySelector(tc(g)))I.loading=5;else{e=C({rel:"stylesheet",href:e,"data-precedence":i},o),(o=ar.get(g))&&Hm(e,o);var V=b=c.createElement("link");Ke(V),On(V,"link",e),V._p=new Promise(function(X,ot){V.onload=X,V.onerror=ot}),V.addEventListener("load",function(){I.loading|=1}),V.addEventListener("error",function(){I.loading|=2}),I.loading|=4,jh(b,i,c)}b={type:"stylesheet",instance:b,count:1,state:I},p.set(g,b)}}}function oA(e,i){Us.X(e,i);var o=Fl;if(o&&e){var c=Zi(o).hoistableScripts,p=Zl(e),g=c.get(p);g||(g=o.querySelector(ec(p)),g||(e=C({src:e,async:!0},i),(i=ar.get(p))&&qm(e,i),g=o.createElement("script"),Ke(g),On(g,"link",e),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function lA(e,i){Us.M(e,i);var o=Fl;if(o&&e){var c=Zi(o).hoistableScripts,p=Zl(e),g=c.get(p);g||(g=o.querySelector(ec(p)),g||(e=C({src:e,async:!0,type:"module"},i),(i=ar.get(p))&&qm(e,i),g=o.createElement("script"),Ke(g),On(g,"link",e),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function zv(e,i,o,c){var p=(p=Et.current)?Bh(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Gl(o.href),o=Zi(p).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=Gl(o.href);var g=Zi(p).hoistableStyles,b=g.get(e);if(b||(p=p.ownerDocument||p,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,b),(g=p.querySelector(tc(e)))&&!g._p&&(b.instance=g,b.state.loading=5),ar.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ar.set(e,o),g||uA(p,e,o,b.state))),i&&c===null)throw Error(s(528,""));return b}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Zl(o),o=Zi(p).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Gl(e){return'href="'+Ce(e)+'"'}function tc(e){return'link[rel="stylesheet"]['+e+"]"}function Bv(e){return C({},e,{"data-precedence":e.precedence,precedence:null})}function uA(e,i,o,c){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=e.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),On(i,"link",o),Ke(i),e.head.appendChild(i))}function Zl(e){return'[src="'+Ce(e)+'"]'}function ec(e){return"script[async]"+e}function jv(e,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=e.querySelector('style[data-href~="'+Ce(o.href)+'"]');if(c)return i.instance=c,Ke(c),c;var p=C({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Ke(c),On(c,"style",p),jh(c,o.precedence,e),i.instance=c;case"stylesheet":p=Gl(o.href);var g=e.querySelector(tc(p));if(g)return i.state.loading|=4,i.instance=g,Ke(g),g;c=Bv(o),(p=ar.get(p))&&Hm(c,p),g=(e.ownerDocument||e).createElement("link"),Ke(g);var b=g;return b._p=new Promise(function(I,V){b.onload=I,b.onerror=V}),On(g,"link",c),i.state.loading|=4,jh(g,o.precedence,e),i.instance=g;case"script":return g=Zl(o.src),(p=e.querySelector(ec(g)))?(i.instance=p,Ke(p),p):(c=o,(p=ar.get(g))&&(c=C({},o),qm(c,p)),e=e.ownerDocument||e,p=e.createElement("script"),Ke(p),On(p,"link",c),e.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,jh(c,o.precedence,e));return i.instance}function jh(e,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,g=p,b=0;b<c.length;b++){var I=c[b];if(I.dataset.precedence===i)g=I;else if(g!==p)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(e,i.firstChild))}function Hm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function qm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Hh=null;function Hv(e,i,o){if(Hh===null){var c=new Map,p=Hh=new Map;p.set(o,c)}else p=Hh,c=p.get(o),c||(c=new Map,p.set(o,c));if(c.has(e))return c;for(c.set(e,null),o=o.getElementsByTagName(e),p=0;p<o.length;p++){var g=o[p];if(!(g[Gi]||g[ze]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(i)||"";b=e+b;var I=c.get(b);I?I.push(g):c.set(b,[g])}}return c}function qv(e,i,o){e=e.ownerDocument||e,e.head.insertBefore(o,i==="title"?e.querySelector("head > title"):null)}function cA(e,i,o){if(o===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Fv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function hA(e,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Gl(c.href),g=i.querySelector(tc(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=qh.bind(e),i.then(e,e)),o.state.loading|=4,o.instance=g,Ke(g);return}g=i.ownerDocument||i,c=Bv(c),(p=ar.get(p))&&Hm(c,p),g=g.createElement("link"),Ke(g);var b=g;b._p=new Promise(function(I,V){b.onload=I,b.onerror=V}),On(g,"link",c),o.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=qh.bind(e),i.addEventListener("load",o),i.addEventListener("error",o))}}var Fm=0;function fA(e,i){return e.stylesheets&&e.count===0&&Gh(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var c=setTimeout(function(){if(e.stylesheets&&Gh(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+i);0<e.imgBytes&&Fm===0&&(Fm=62500*ZS());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Gh(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>Fm?50:800)+i);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function qh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fh=null;function Gh(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fh=new Map,i.forEach(dA,e),Fh=null,qh.call(e))}function dA(e,i){if(!(i.state.loading&4)){var o=Fh.get(e);if(o)var c=o.get(null);else{o=new Map,Fh.set(e,o);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var b=p[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),c=b)}c&&o.set(null,c)}p=i.instance,b=p.getAttribute("data-precedence"),g=o.get(b)||c,g===c&&o.set(null,p),o.set(b,p),this.count++,c=qh.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),g?g.parentNode.insertBefore(p,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),i.state.loading|=4}}var nc={$$typeof:ft,Provider:null,Consumer:null,_currentValue:pt,_currentValue2:pt,_threadCount:0};function mA(e,i,o,c,p,g,b,I,V){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.hiddenUpdates=Fi(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Gv(e,i,o,c,p,g,b,I,V,X,ot,ht){return e=new mA(e,i,o,b,V,X,ot,ht,I),i=1,g===!0&&(i|=24),g=zn(3,null,null,i),e.current=g,g.stateNode=e,i=bd(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:i},Cd(g),e}function Zv(e){return e?(e=Ss,e):Ss}function Kv(e,i,o,c,p,g){p=Zv(p),c.context===null?c.context=p:c.pendingContext=p,c=ya(i),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=va(e,c,i),o!==null&&(gi(o,e,i),Mu(o,e,i))}function Yv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<i?o:i}}function Gm(e,i){Yv(e,i),(e=e.alternate)&&Yv(e,i)}function Qv(e){if(e.tag===13||e.tag===31){var i=nr(e,67108864);i!==null&&gi(i,e,67108864),Gm(e,67108864)}}function $v(e){if(e.tag===13||e.tag===31){var i=ki();i=yn(i);var o=nr(e,i);o!==null&&gi(o,e,i),Gm(e,i)}}var Zh=!0;function pA(e,i,o,c){var p=rt.T;rt.T=null;var g=vt.p;try{vt.p=2,Zm(e,i,o,c)}finally{vt.p=g,rt.T=p}}function gA(e,i,o,c){var p=rt.T;rt.T=null;var g=vt.p;try{vt.p=8,Zm(e,i,o,c)}finally{vt.p=g,rt.T=p}}function Zm(e,i,o,c){if(Zh){var p=Km(c);if(p===null)Nm(e,i,c,Kh,o),Wv(e,c);else if(yA(p,e,i,o,c))c.stopPropagation();else if(Wv(e,c),i&4&&-1<_A.indexOf(e)){for(;p!==null;){var g=ni(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=Hi(g.pendingLanes);if(b!==0){var I=g;for(I.pendingLanes|=2,I.entangledLanes|=2;b;){var V=1<<31-Ve(b);I.entanglements[1]|=V,b&=~V}Wr(g),(ge&6)===0&&(xh=Cn()+500,$u(0))}}break;case 31:case 13:I=nr(g,2),I!==null&&gi(I,g,2),Lh(),Gm(g,2)}if(g=Km(c),g===null&&Nm(e,i,c,Kh,o),g===p)break;p=g}p!==null&&c.stopPropagation()}else Nm(e,i,c,null,o)}}function Km(e){return e=Dn(e),Ym(e)}var Kh=null;function Ym(e){if(Kh=null,e=bi(e),e!==null){var i=h(e);if(i===null)e=null;else{var o=i.tag;if(o===13){if(e=m(i),e!==null)return e;e=null}else if(o===31){if(e=y(i),e!==null)return e;e=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Kh=e,null}function Xv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ds()){case ms:return 2;case $s:return 8;case cr:case Eu:return 32;case io:return 268435456;default:return 32}default:return 32}}var Qm=!1,Oa=null,La=null,Na=null,ic=new Map,rc=new Map,Pa=[],_A="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wv(e,i){switch(e){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":ic.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(i.pointerId)}}function sc(e,i,o,c,p,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[p]},i!==null&&(i=ni(i),i!==null&&Qv(i)),e):(e.eventSystemFlags|=c,i=e.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),e)}function yA(e,i,o,c,p){switch(i){case"focusin":return Oa=sc(Oa,e,i,o,c,p),!0;case"dragenter":return La=sc(La,e,i,o,c,p),!0;case"mouseover":return Na=sc(Na,e,i,o,c,p),!0;case"pointerover":var g=p.pointerId;return ic.set(g,sc(ic.get(g)||null,e,i,o,c,p)),!0;case"gotpointercapture":return g=p.pointerId,rc.set(g,sc(rc.get(g)||null,e,i,o,c,p)),!0}return!1}function Jv(e){var i=bi(e.target);if(i!==null){var o=h(i);if(o!==null){if(i=o.tag,i===13){if(i=m(o),i!==null){e.blockedOn=i,ti(e.priority,function(){$v(o)});return}}else if(i===31){if(i=y(o),i!==null){e.blockedOn=i,ti(e.priority,function(){$v(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yh(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var o=Km(e.nativeEvent);if(o===null){o=e.nativeEvent;var c=new o.constructor(o.type,o);ia=c,o.target.dispatchEvent(c),ia=null}else return i=ni(o),i!==null&&Qv(i),e.blockedOn=o,!1;i.shift()}return!0}function tT(e,i,o){Yh(e)&&o.delete(i)}function vA(){Qm=!1,Oa!==null&&Yh(Oa)&&(Oa=null),La!==null&&Yh(La)&&(La=null),Na!==null&&Yh(Na)&&(Na=null),ic.forEach(tT),rc.forEach(tT)}function Qh(e,i){e.blockedOn===i&&(e.blockedOn=null,Qm||(Qm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,vA)))}var $h=null;function eT(e){$h!==e&&($h=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){$h===e&&($h=null);for(var i=0;i<e.length;i+=3){var o=e[i],c=e[i+1],p=e[i+2];if(typeof c!="function"){if(Ym(c||o)===null)continue;break}var g=ni(o);g!==null&&(e.splice(i,3),i-=3,Kd(g,{pending:!0,data:p,method:o.method,action:c},c,p))}}))}function Kl(e){function i(V){return Qh(V,e)}Oa!==null&&Qh(Oa,e),La!==null&&Qh(La,e),Na!==null&&Qh(Na,e),ic.forEach(i),rc.forEach(i);for(var o=0;o<Pa.length;o++){var c=Pa[o];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Pa.length&&(o=Pa[0],o.blockedOn===null);)Jv(o),o.blockedOn===null&&Pa.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var p=o[c],g=o[c+1],b=p[Ze]||null;if(typeof g=="function")b||eT(o);else if(b){var I=null;if(g&&g.hasAttribute("formAction")){if(p=g,b=g[Ze]||null)I=b.formAction;else if(Ym(p)!==null)continue}else I=b.action;typeof I=="function"?o[c+1]=I:(o.splice(c,3),c-=3),eT(o)}}}function nT(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return p=b})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function $m(e){this._internalRoot=e}Xh.prototype.render=$m.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,c=ki();Kv(o,c,e,i,null,null)},Xh.prototype.unmount=$m.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Kv(e.current,2,null,e,null,null),Lh(),i[Ei]=null}};function Xh(e){this._internalRoot=e}Xh.prototype.unstable_scheduleHydration=function(e){if(e){var i=oo();e={blockedOn:null,target:e,priority:i};for(var o=0;o<Pa.length&&i!==0&&i<Pa[o].priority;o++);Pa.splice(o,0,e),o===0&&Jv(e)}};var iT=t.version;if(iT!=="19.2.0")throw Error(s(527,iT,"19.2.0"));vt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=T(i),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var TA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:rt,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wh.isDisabled&&Wh.supportsFiber)try{Jn=Wh.inject(TA),tn=Wh}catch{}}return oc.createRoot=function(e,i){if(!l(e))throw Error(s(299));var o=!1,c="",p=cy,g=hy,b=fy;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=Gv(e,1,!1,null,null,o,c,null,p,g,b,nT),e[Ei]=i.current,Lm(e),new $m(i)},oc.hydrateRoot=function(e,i,o){if(!l(e))throw Error(s(299));var c=!1,p="",g=cy,b=hy,I=fy,V=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(V=o.formState)),i=Gv(e,1,!0,i,o??null,c,p,V,g,b,I,nT),i.context=Zv(null),o=i.current,c=ki(),c=yn(c),p=ya(c),p.callback=null,va(o,p,c),o=c,i.current.lanes=o,hr(i,o),Wr(i),e[Ei]=i.current,Lm(e),new Xh(i)},oc.version="19.2.0",oc}var dT;function xA(){if(dT)return Jm.exports;dT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Jm.exports=IA(),Jm.exports}var OA=xA();const LA=Yp(OA);/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mT="popstate";function NA(r={}){function t(s,l){let{pathname:h,search:m,hash:y}=s.location;return vp("",{pathname:h,search:m,hash:y},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){return typeof l=="string"?l:wc(l)}return MA(t,n,null,r)}function je(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function os(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function PA(){return Math.random().toString(36).substring(2,10)}function pT(r,t){return{usr:r.state,key:r.key,idx:t}}function vp(r,t,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?du(t):t,state:n,key:t&&t.key||s||PA()}}function wc({pathname:r="/",search:t="",hash:n=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function du(r){let t={};if(r){let n=r.indexOf("#");n>=0&&(t.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(t.search=r.substring(s),r=r.substring(0,s)),r&&(t.pathname=r)}return t}function MA(r,t,n,s={}){let{window:l=document.defaultView,v5Compat:h=!1}=s,m=l.history,y="POP",v=null,T=A();T==null&&(T=0,m.replaceState({...m.state,idx:T},""));function A(){return(m.state||{idx:null}).idx}function C(){y="POP";let Q=A(),at=Q==null?null:Q-T;T=Q,v&&v({action:y,location:W.location,delta:at})}function O(Q,at){y="PUSH";let ut=vp(W.location,Q,at);T=A()+1;let ft=pT(ut,T),xt=W.createHref(ut);try{m.pushState(ft,"",xt)}catch(kt){if(kt instanceof DOMException&&kt.name==="DataCloneError")throw kt;l.location.assign(xt)}h&&v&&v({action:y,location:W.location,delta:1})}function j(Q,at){y="REPLACE";let ut=vp(W.location,Q,at);T=A();let ft=pT(ut,T),xt=W.createHref(ut);m.replaceState(ft,"",xt),h&&v&&v({action:y,location:W.location,delta:0})}function J(Q){return DA(Q)}let W={get action(){return y},get location(){return r(l,m)},listen(Q){if(v)throw new Error("A history only accepts one active listener");return l.addEventListener(mT,C),v=Q,()=>{l.removeEventListener(mT,C),v=null}},createHref(Q){return t(l,Q)},createURL:J,encodeLocation(Q){let at=J(Q);return{pathname:at.pathname,search:at.search,hash:at.hash}},push:O,replace:j,go(Q){return m.go(Q)}};return W}function DA(r,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),je(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:wc(r);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function n0(r,t,n="/"){return kA(r,t,n,!1)}function kA(r,t,n,s){let l=typeof t=="string"?du(t):t,h=qs(l.pathname||"/",n);if(h==null)return null;let m=i0(r);VA(m);let y=null;for(let v=0;y==null&&v<m.length;++v){let T=YA(h);y=ZA(m[v],T,s)}return y}function i0(r,t=[],n=[],s="",l=!1){let h=(m,y,v=l,T)=>{let A={relativePath:T===void 0?m.path||"":T,caseSensitive:m.caseSensitive===!0,childrenIndex:y,route:m};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(s)&&v)return;je(A.relativePath.startsWith(s),`Absolute route path "${A.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(s.length)}let C=Hs([s,A.relativePath]),O=n.concat(A);m.children&&m.children.length>0&&(je(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),i0(m.children,t,O,C,v)),!(m.path==null&&!m.index)&&t.push({path:C,score:FA(C,m.index),routesMeta:O})};return r.forEach((m,y)=>{if(m.path===""||!m.path?.includes("?"))h(m,y);else for(let v of r0(m.path))h(m,y,!0,v)}),t}function r0(r){let t=r.split("/");if(t.length===0)return[];let[n,...s]=t,l=n.endsWith("?"),h=n.replace(/\?$/,"");if(s.length===0)return l?[h,""]:[h];let m=r0(s.join("/")),y=[];return y.push(...m.map(v=>v===""?h:[h,v].join("/"))),l&&y.push(...m),y.map(v=>r.startsWith("/")&&v===""?"/":v)}function VA(r){r.sort((t,n)=>t.score!==n.score?n.score-t.score:GA(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var UA=/^:[\w-]+$/,zA=3,BA=2,jA=1,HA=10,qA=-2,gT=r=>r==="*";function FA(r,t){let n=r.split("/"),s=n.length;return n.some(gT)&&(s+=qA),t&&(s+=BA),n.filter(l=>!gT(l)).reduce((l,h)=>l+(UA.test(h)?zA:h===""?jA:HA),s)}function GA(r,t){return r.length===t.length&&r.slice(0,-1).every((s,l)=>s===t[l])?r[r.length-1]-t[t.length-1]:0}function ZA(r,t,n=!1){let{routesMeta:s}=r,l={},h="/",m=[];for(let y=0;y<s.length;++y){let v=s[y],T=y===s.length-1,A=h==="/"?t:t.slice(h.length)||"/",C=wf({path:v.relativePath,caseSensitive:v.caseSensitive,end:T},A),O=v.route;if(!C&&T&&n&&!s[s.length-1].route.index&&(C=wf({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},A)),!C)return null;Object.assign(l,C.params),m.push({params:l,pathname:Hs([h,C.pathname]),pathnameBase:WA(Hs([h,C.pathnameBase])),route:O}),C.pathnameBase!=="/"&&(h=Hs([h,C.pathnameBase]))}return m}function wf(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=KA(r.path,r.caseSensitive,r.end),l=t.match(n);if(!l)return null;let h=l[0],m=h.replace(/(.)\/+$/,"$1"),y=l.slice(1);return{params:s.reduce((T,{paramName:A,isOptional:C},O)=>{if(A==="*"){let J=y[O]||"";m=h.slice(0,h.length-J.length).replace(/(.)\/+$/,"$1")}const j=y[O];return C&&!j?T[A]=void 0:T[A]=(j||"").replace(/%2F/g,"/"),T},{}),pathname:h,pathnameBase:m,pattern:r}}function KA(r,t=!1,n=!0){os(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],l="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,y,v)=>(s.push({paramName:y,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),l+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":r!==""&&r!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),s]}function YA(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return os(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function qs(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function QA(r,t="/"){let{pathname:n,search:s="",hash:l=""}=typeof r=="string"?du(r):r;return{pathname:n?n.startsWith("/")?n:$A(n,t):t,search:JA(s),hash:t1(l)}}function $A(r,t){let n=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function ip(r,t,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XA(r){return r.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function s0(r){let t=XA(r);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function a0(r,t,n,s=!1){let l;typeof r=="string"?l=du(r):(l={...r},je(!l.pathname||!l.pathname.includes("?"),ip("?","pathname","search",l)),je(!l.pathname||!l.pathname.includes("#"),ip("#","pathname","hash",l)),je(!l.search||!l.search.includes("#"),ip("#","search","hash",l)));let h=r===""||l.pathname==="",m=h?"/":l.pathname,y;if(m==null)y=n;else{let C=t.length-1;if(!s&&m.startsWith("..")){let O=m.split("/");for(;O[0]==="..";)O.shift(),C-=1;l.pathname=O.join("/")}y=C>=0?t[C]:"/"}let v=QA(l,y),T=m&&m!=="/"&&m.endsWith("/"),A=(h||m===".")&&n.endsWith("/");return!v.pathname.endsWith("/")&&(T||A)&&(v.pathname+="/"),v}var Hs=r=>r.join("/").replace(/\/\/+/g,"/"),WA=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),JA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,t1=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function e1(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var o0=["POST","PUT","PATCH","DELETE"];new Set(o0);var n1=["GET",...o0];new Set(n1);var mu=K.createContext(null);mu.displayName="DataRouter";var Hf=K.createContext(null);Hf.displayName="DataRouterState";K.createContext(!1);var l0=K.createContext({isTransitioning:!1});l0.displayName="ViewTransition";var i1=K.createContext(new Map);i1.displayName="Fetchers";var r1=K.createContext(null);r1.displayName="Await";var cs=K.createContext(null);cs.displayName="Navigation";var Pc=K.createContext(null);Pc.displayName="Location";var Ys=K.createContext({outlet:null,matches:[],isDataRoute:!1});Ys.displayName="Route";var $p=K.createContext(null);$p.displayName="RouteError";function s1(r,{relative:t}={}){je(Mc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=K.useContext(cs),{hash:l,pathname:h,search:m}=Dc(r,{relative:t}),y=h;return n!=="/"&&(y=h==="/"?n:Hs([n,h])),s.createHref({pathname:y,search:m,hash:l})}function Mc(){return K.useContext(Pc)!=null}function nl(){return je(Mc(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(Pc).location}var u0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function c0(r){K.useContext(cs).static||K.useLayoutEffect(r)}function a1(){let{isDataRoute:r}=K.useContext(Ys);return r?v1():o1()}function o1(){je(Mc(),"useNavigate() may be used only in the context of a <Router> component.");let r=K.useContext(mu),{basename:t,navigator:n}=K.useContext(cs),{matches:s}=K.useContext(Ys),{pathname:l}=nl(),h=JSON.stringify(s0(s)),m=K.useRef(!1);return c0(()=>{m.current=!0}),K.useCallback((v,T={})=>{if(os(m.current,u0),!m.current)return;if(typeof v=="number"){n.go(v);return}let A=a0(v,JSON.parse(h),l,T.relative==="path");r==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:Hs([t,A.pathname])),(T.replace?n.replace:n.push)(A,T.state,T)},[t,n,h,l,r])}K.createContext(null);function Dc(r,{relative:t}={}){let{matches:n}=K.useContext(Ys),{pathname:s}=nl(),l=JSON.stringify(s0(n));return K.useMemo(()=>a0(r,JSON.parse(l),s,t==="path"),[r,l,s,t])}function l1(r,t){return h0(r,t)}function h0(r,t,n,s,l){je(Mc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=K.useContext(cs),{matches:m}=K.useContext(Ys),y=m[m.length-1],v=y?y.params:{},T=y?y.pathname:"/",A=y?y.pathnameBase:"/",C=y&&y.route;{let ut=C&&C.path||"";f0(T,!C||ut.endsWith("*")||ut.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${T}" (under <Route path="${ut}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ut}"> to <Route path="${ut==="/"?"*":`${ut}/*`}">.`)}let O=nl(),j;if(t){let ut=typeof t=="string"?du(t):t;je(A==="/"||ut.pathname?.startsWith(A),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${ut.pathname}" was given in the \`location\` prop.`),j=ut}else j=O;let J=j.pathname||"/",W=J;if(A!=="/"){let ut=A.replace(/^\//,"").split("/");W="/"+J.replace(/^\//,"").split("/").slice(ut.length).join("/")}let Q=n0(r,{pathname:W});os(C||Q!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),os(Q==null||Q[Q.length-1].route.element!==void 0||Q[Q.length-1].route.Component!==void 0||Q[Q.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let at=d1(Q&&Q.map(ut=>Object.assign({},ut,{params:Object.assign({},v,ut.params),pathname:Hs([A,h.encodeLocation?h.encodeLocation(ut.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ut.pathname]),pathnameBase:ut.pathnameBase==="/"?A:Hs([A,h.encodeLocation?h.encodeLocation(ut.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ut.pathnameBase])})),m,n,s,l);return t&&at?K.createElement(Pc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},at):at}function u1(){let r=y1(),t=e1(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},h={padding:"2px 4px",backgroundColor:s},m=null;return console.error("Error handled by React Router default ErrorBoundary:",r),m=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:h},"ErrorBoundary")," or"," ",K.createElement("code",{style:h},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},t),n?K.createElement("pre",{style:l},n):null,m)}var c1=K.createElement(u1,null),h1=class extends K.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.unstable_onError?this.props.unstable_onError(r,t):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?K.createElement(Ys.Provider,{value:this.props.routeContext},K.createElement($p.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function f1({routeContext:r,match:t,children:n}){let s=K.useContext(mu);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement(Ys.Provider,{value:r},n)}function d1(r,t=[],n=null,s=null,l=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let h=r,m=n?.errors;if(m!=null){let T=h.findIndex(A=>A.route.id&&m?.[A.route.id]!==void 0);je(T>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),h=h.slice(0,Math.min(h.length,T+1))}let y=!1,v=-1;if(n)for(let T=0;T<h.length;T++){let A=h[T];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(v=T),A.route.id){let{loaderData:C,errors:O}=n,j=A.route.loader&&!C.hasOwnProperty(A.route.id)&&(!O||O[A.route.id]===void 0);if(A.route.lazy||j){y=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((T,A,C)=>{let O,j=!1,J=null,W=null;n&&(O=m&&A.route.id?m[A.route.id]:void 0,J=A.route.errorElement||c1,y&&(v<0&&C===0?(f0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,W=null):v===C&&(j=!0,W=A.route.hydrateFallbackElement||null)));let Q=t.concat(h.slice(0,C+1)),at=()=>{let ut;return O?ut=J:j?ut=W:A.route.Component?ut=K.createElement(A.route.Component,null):A.route.element?ut=A.route.element:ut=T,K.createElement(f1,{match:A,routeContext:{outlet:T,matches:Q,isDataRoute:n!=null},children:ut})};return n&&(A.route.ErrorBoundary||A.route.errorElement||C===0)?K.createElement(h1,{location:n.location,revalidation:n.revalidation,component:J,error:O,children:at(),routeContext:{outlet:null,matches:Q,isDataRoute:!0},unstable_onError:s}):at()},null)}function Xp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function m1(r){let t=K.useContext(mu);return je(t,Xp(r)),t}function p1(r){let t=K.useContext(Hf);return je(t,Xp(r)),t}function g1(r){let t=K.useContext(Ys);return je(t,Xp(r)),t}function Wp(r){let t=g1(r),n=t.matches[t.matches.length-1];return je(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function _1(){return Wp("useRouteId")}function y1(){let r=K.useContext($p),t=p1("useRouteError"),n=Wp("useRouteError");return r!==void 0?r:t.errors?.[n]}function v1(){let{router:r}=m1("useNavigate"),t=Wp("useNavigate"),n=K.useRef(!1);return c0(()=>{n.current=!0}),K.useCallback(async(l,h={})=>{os(n.current,u0),n.current&&(typeof l=="number"?r.navigate(l):await r.navigate(l,{fromRouteId:t,...h}))},[r,t])}var _T={};function f0(r,t,n){!t&&!_T[r]&&(_T[r]=!0,os(!1,n))}K.memo(T1);function T1({routes:r,future:t,state:n,unstable_onError:s}){return h0(r,void 0,n,s,t)}function Yl(r){je(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function E1({basename:r="/",children:t=null,location:n,navigationType:s="POP",navigator:l,static:h=!1}){je(!Mc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=r.replace(/^\/*/,"/"),y=K.useMemo(()=>({basename:m,navigator:l,static:h,future:{}}),[m,l,h]);typeof n=="string"&&(n=du(n));let{pathname:v="/",search:T="",hash:A="",state:C=null,key:O="default"}=n,j=K.useMemo(()=>{let J=qs(v,m);return J==null?null:{location:{pathname:J,search:T,hash:A,state:C,key:O},navigationType:s}},[m,v,T,A,C,O,s]);return os(j!=null,`<Router basename="${m}"> is not able to match the URL "${v}${T}${A}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:K.createElement(cs.Provider,{value:y},K.createElement(Pc.Provider,{children:t,value:j}))}function w1({children:r,location:t}){return l1(Tp(r),t)}function Tp(r,t=[]){let n=[];return K.Children.forEach(r,(s,l)=>{if(!K.isValidElement(s))return;let h=[...t,l];if(s.type===K.Fragment){n.push.apply(n,Tp(s.props.children,h));return}je(s.type===Yl,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),je(!s.props.index||!s.props.children,"An index route cannot have child routes.");let m={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(m.children=Tp(s.props.children,h)),n.push(m)}),n}var uf="get",cf="application/x-www-form-urlencoded";function qf(r){return r!=null&&typeof r.tagName=="string"}function b1(r){return qf(r)&&r.tagName.toLowerCase()==="button"}function S1(r){return qf(r)&&r.tagName.toLowerCase()==="form"}function A1(r){return qf(r)&&r.tagName.toLowerCase()==="input"}function R1(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function C1(r,t){return r.button===0&&(!t||t==="_self")&&!R1(r)}var Jh=null;function I1(){if(Jh===null)try{new FormData(document.createElement("form"),0),Jh=!1}catch{Jh=!0}return Jh}var x1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rp(r){return r!=null&&!x1.has(r)?(os(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cf}"`),null):r}function O1(r,t){let n,s,l,h,m;if(S1(r)){let y=r.getAttribute("action");s=y?qs(y,t):null,n=r.getAttribute("method")||uf,l=rp(r.getAttribute("enctype"))||cf,h=new FormData(r)}else if(b1(r)||A1(r)&&(r.type==="submit"||r.type==="image")){let y=r.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=r.getAttribute("formaction")||y.getAttribute("action");if(s=v?qs(v,t):null,n=r.getAttribute("formmethod")||y.getAttribute("method")||uf,l=rp(r.getAttribute("formenctype"))||rp(y.getAttribute("enctype"))||cf,h=new FormData(y,r),!I1()){let{name:T,type:A,value:C}=r;if(A==="image"){let O=T?`${T}.`:"";h.append(`${O}x`,"0"),h.append(`${O}y`,"0")}else T&&h.append(T,C)}}else{if(qf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=uf,s=null,l=cf,m=r}return h&&l==="text/plain"&&(m=h,h=void 0),{action:s,method:n.toLowerCase(),encType:l,formData:h,body:m}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jp(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function L1(r,t,n){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&qs(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function N1(r,t){if(r.id in t)return t[r.id];try{let n=await import(r.module);return t[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function P1(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function M1(r,t,n){let s=await Promise.all(r.map(async l=>{let h=t.routes[l.route.id];if(h){let m=await N1(h,n);return m.links?m.links():[]}return[]}));return U1(s.flat(1).filter(P1).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function yT(r,t,n,s,l,h){let m=(v,T)=>n[T]?v.route.id!==n[T].route.id:!0,y=(v,T)=>n[T].pathname!==v.pathname||n[T].route.path?.endsWith("*")&&n[T].params["*"]!==v.params["*"];return h==="assets"?t.filter((v,T)=>m(v,T)||y(v,T)):h==="data"?t.filter((v,T)=>{let A=s.routes[v.route.id];if(!A||!A.hasLoader)return!1;if(m(v,T)||y(v,T))return!0;if(v.route.shouldRevalidate){let C=v.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function D1(r,t,{includeHydrateFallback:n}={}){return k1(r.map(s=>{let l=t.routes[s.route.id];if(!l)return[];let h=[l.module];return l.clientActionModule&&(h=h.concat(l.clientActionModule)),l.clientLoaderModule&&(h=h.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(h=h.concat(l.hydrateFallbackModule)),l.imports&&(h=h.concat(l.imports)),h}).flat(1))}function k1(r){return[...new Set(r)]}function V1(r){let t={},n=Object.keys(r).sort();for(let s of n)t[s]=r[s];return t}function U1(r,t){let n=new Set;return new Set(t),r.reduce((s,l)=>{let h=JSON.stringify(V1(l));return n.has(h)||(n.add(h),s.push({key:h,link:l})),s},[])}function d0(){let r=K.useContext(mu);return Jp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function z1(){let r=K.useContext(Hf);return Jp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var tg=K.createContext(void 0);tg.displayName="FrameworkContext";function m0(){let r=K.useContext(tg);return Jp(r,"You must render this element inside a <HydratedRouter> element"),r}function B1(r,t){let n=K.useContext(tg),[s,l]=K.useState(!1),[h,m]=K.useState(!1),{onFocus:y,onBlur:v,onMouseEnter:T,onMouseLeave:A,onTouchStart:C}=t,O=K.useRef(null);K.useEffect(()=>{if(r==="render"&&m(!0),r==="viewport"){let W=at=>{at.forEach(ut=>{m(ut.isIntersecting)})},Q=new IntersectionObserver(W,{threshold:.5});return O.current&&Q.observe(O.current),()=>{Q.disconnect()}}},[r]),K.useEffect(()=>{if(s){let W=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(W)}}},[s]);let j=()=>{l(!0)},J=()=>{l(!1),m(!1)};return n?r!=="intent"?[h,O,{}]:[h,O,{onFocus:lc(y,j),onBlur:lc(v,J),onMouseEnter:lc(T,j),onMouseLeave:lc(A,J),onTouchStart:lc(C,j)}]:[!1,O,{}]}function lc(r,t){return n=>{r&&r(n),n.defaultPrevented||t(n)}}function j1({page:r,...t}){let{router:n}=d0(),s=K.useMemo(()=>n0(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?K.createElement(q1,{page:r,matches:s,...t}):null}function H1(r){let{manifest:t,routeModules:n}=m0(),[s,l]=K.useState([]);return K.useEffect(()=>{let h=!1;return M1(r,t,n).then(m=>{h||l(m)}),()=>{h=!0}},[r,t,n]),s}function q1({page:r,matches:t,...n}){let s=nl(),{manifest:l,routeModules:h}=m0(),{basename:m}=d0(),{loaderData:y,matches:v}=z1(),T=K.useMemo(()=>yT(r,t,v,l,s,"data"),[r,t,v,l,s]),A=K.useMemo(()=>yT(r,t,v,l,s,"assets"),[r,t,v,l,s]),C=K.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let J=new Set,W=!1;if(t.forEach(at=>{let ut=l.routes[at.route.id];!ut||!ut.hasLoader||(!T.some(ft=>ft.route.id===at.route.id)&&at.route.id in y&&h[at.route.id]?.shouldRevalidate||ut.hasClientLoader?W=!0:J.add(at.route.id))}),J.size===0)return[];let Q=L1(r,m,"data");return W&&J.size>0&&Q.searchParams.set("_routes",t.filter(at=>J.has(at.route.id)).map(at=>at.route.id).join(",")),[Q.pathname+Q.search]},[m,y,s,l,T,t,r,h]),O=K.useMemo(()=>D1(A,l),[A,l]),j=H1(A);return K.createElement(K.Fragment,null,C.map(J=>K.createElement("link",{key:J,rel:"prefetch",as:"fetch",href:J,...n})),O.map(J=>K.createElement("link",{key:J,rel:"modulepreload",href:J,...n})),j.map(({key:J,link:W})=>K.createElement("link",{key:J,nonce:n.nonce,...W})))}function F1(...r){return t=>{r.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var p0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{p0&&(window.__reactRouterVersion="7.9.3")}catch{}function G1({basename:r,children:t,window:n}){let s=K.useRef();s.current==null&&(s.current=NA({window:n,v5Compat:!0}));let l=s.current,[h,m]=K.useState({action:l.action,location:l.location}),y=K.useCallback(v=>{K.startTransition(()=>m(v))},[m]);return K.useLayoutEffect(()=>l.listen(y),[l,y]),K.createElement(E1,{basename:r,children:t,location:h.location,navigationType:h.action,navigator:l})}var g0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_0=K.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:l,reloadDocument:h,replace:m,state:y,target:v,to:T,preventScrollReset:A,viewTransition:C,...O},j){let{basename:J}=K.useContext(cs),W=typeof T=="string"&&g0.test(T),Q,at=!1;if(typeof T=="string"&&W&&(Q=T,p0))try{let P=new URL(window.location.href),H=T.startsWith("//")?new URL(P.protocol+T):new URL(T),U=qs(H.pathname,J);H.origin===P.origin&&U!=null?T=U+H.search+H.hash:at=!0}catch{os(!1,`<Link to="${T}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ut=s1(T,{relative:l}),[ft,xt,kt]=B1(s,O),Dt=Y1(T,{replace:m,state:y,target:v,preventScrollReset:A,relative:l,viewTransition:C});function D(P){t&&t(P),P.defaultPrevented||Dt(P)}let N=K.createElement("a",{...O,...kt,href:Q||ut,onClick:at||h?t:D,ref:F1(j,xt),target:v,"data-discover":!W&&n==="render"?"true":void 0});return ft&&!W?K.createElement(K.Fragment,null,N,K.createElement(j1,{page:ut})):N});_0.displayName="Link";var Ql=K.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:l=!1,style:h,to:m,viewTransition:y,children:v,...T},A){let C=Dc(m,{relative:T.relative}),O=nl(),j=K.useContext(Hf),{navigator:J,basename:W}=K.useContext(cs),Q=j!=null&&J1(C)&&y===!0,at=J.encodeLocation?J.encodeLocation(C).pathname:C.pathname,ut=O.pathname,ft=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;n||(ut=ut.toLowerCase(),ft=ft?ft.toLowerCase():null,at=at.toLowerCase()),ft&&W&&(ft=qs(ft,W)||ft);const xt=at!=="/"&&at.endsWith("/")?at.length-1:at.length;let kt=ut===at||!l&&ut.startsWith(at)&&ut.charAt(xt)==="/",Dt=ft!=null&&(ft===at||!l&&ft.startsWith(at)&&ft.charAt(at.length)==="/"),D={isActive:kt,isPending:Dt,isTransitioning:Q},N=kt?t:void 0,P;typeof s=="function"?P=s(D):P=[s,kt?"active":null,Dt?"pending":null,Q?"transitioning":null].filter(Boolean).join(" ");let H=typeof h=="function"?h(D):h;return K.createElement(_0,{...T,"aria-current":N,className:P,ref:A,style:H,to:m,viewTransition:y},typeof v=="function"?v(D):v)});Ql.displayName="NavLink";var Z1=K.forwardRef(({discover:r="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:l,state:h,method:m=uf,action:y,onSubmit:v,relative:T,preventScrollReset:A,viewTransition:C,...O},j)=>{let J=X1(),W=W1(y,{relative:T}),Q=m.toLowerCase()==="get"?"get":"post",at=typeof y=="string"&&g0.test(y),ut=ft=>{if(v&&v(ft),ft.defaultPrevented)return;ft.preventDefault();let xt=ft.nativeEvent.submitter,kt=xt?.getAttribute("formmethod")||m;J(xt||ft.currentTarget,{fetcherKey:t,method:kt,navigate:n,replace:l,state:h,relative:T,preventScrollReset:A,viewTransition:C})};return K.createElement("form",{ref:j,method:Q,action:W,onSubmit:s?v:ut,...O,"data-discover":!at&&r==="render"?"true":void 0})});Z1.displayName="Form";function K1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function y0(r){let t=K.useContext(mu);return je(t,K1(r)),t}function Y1(r,{target:t,replace:n,state:s,preventScrollReset:l,relative:h,viewTransition:m}={}){let y=a1(),v=nl(),T=Dc(r,{relative:h});return K.useCallback(A=>{if(C1(A,t)){A.preventDefault();let C=n!==void 0?n:wc(v)===wc(T);y(r,{replace:C,state:s,preventScrollReset:l,relative:h,viewTransition:m})}},[v,y,T,n,s,t,r,l,h,m])}var Q1=0,$1=()=>`__${String(++Q1)}__`;function X1(){let{router:r}=y0("useSubmit"),{basename:t}=K.useContext(cs),n=_1();return K.useCallback(async(s,l={})=>{let{action:h,method:m,encType:y,formData:v,body:T}=O1(s,t);if(l.navigate===!1){let A=l.fetcherKey||$1();await r.fetch(A,n,l.action||h,{preventScrollReset:l.preventScrollReset,formData:v,body:T,formMethod:l.method||m,formEncType:l.encType||y,flushSync:l.flushSync})}else await r.navigate(l.action||h,{preventScrollReset:l.preventScrollReset,formData:v,body:T,formMethod:l.method||m,formEncType:l.encType||y,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,t,n])}function W1(r,{relative:t}={}){let{basename:n}=K.useContext(cs),s=K.useContext(Ys);je(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),h={...Dc(r||".",{relative:t})},m=nl();if(r==null){h.search=m.search;let y=new URLSearchParams(h.search),v=y.getAll("index");if(v.some(A=>A==="")){y.delete("index"),v.filter(C=>C).forEach(C=>y.append("index",C));let A=y.toString();h.search=A?`?${A}`:""}}return(!r||r===".")&&l.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(h.pathname=h.pathname==="/"?n:Hs([n,h.pathname])),wc(h)}function J1(r,{relative:t}={}){let n=K.useContext(l0);je(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=y0("useViewTransitionState"),l=Dc(r,{relative:t});if(!n.isTransitioning)return!1;let h=qs(n.currentLocation.pathname,s)||n.currentLocation.pathname,m=qs(n.nextLocation.pathname,s)||n.nextLocation.pathname;return wf(l.pathname,m)!=null||wf(l.pathname,h)!=null}var tR=e0();const eR=()=>{};var vT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},nR=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const h=r[n++];t[s++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=r[n++],m=r[n++],y=r[n++],v=((l&7)<<18|(h&63)<<12|(m&63)<<6|y&63)-65536;t[s++]=String.fromCharCode(55296+(v>>10)),t[s++]=String.fromCharCode(56320+(v&1023))}else{const h=r[n++],m=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(h&63)<<6|m&63)}}return t.join("")},T0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const h=r[l],m=l+1<r.length,y=m?r[l+1]:0,v=l+2<r.length,T=v?r[l+2]:0,A=h>>2,C=(h&3)<<4|y>>4;let O=(y&15)<<2|T>>6,j=T&63;v||(j=64,m||(O=64)),s.push(n[A],n[C],n[O],n[j])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(v0(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):nR(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const h=n[r.charAt(l++)],y=l<r.length?n[r.charAt(l)]:0;++l;const T=l<r.length?n[r.charAt(l)]:64;++l;const C=l<r.length?n[r.charAt(l)]:64;if(++l,h==null||y==null||T==null||C==null)throw new iR;const O=h<<2|y>>4;if(s.push(O),T!==64){const j=y<<4&240|T>>2;if(s.push(j),C!==64){const J=T<<6&192|C;s.push(J)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class iR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rR=function(r){const t=v0(r);return T0.encodeByteArray(t,!0)},bf=function(r){return rR(r).replace(/\./g,"")},E0=function(r){try{return T0.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=()=>sR().__FIREBASE_DEFAULTS__,oR=()=>{if(typeof process>"u"||typeof vT>"u")return;const r=vT.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},lR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&E0(r[1]);return t&&JSON.parse(t)},Ff=()=>{try{return eR()||aR()||oR()||lR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},w0=r=>Ff()?.emulatorHosts?.[r],b0=r=>{const t=w0(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},S0=()=>Ff()?.config,A0=r=>Ff()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eg(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,h=r.sub||r.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...r};return[bf(JSON.stringify(n)),bf(JSON.stringify(m)),""].join(".")}const pc={};function cR(){const r={prod:[],emulator:[]};for(const t of Object.keys(pc))pc[t]?r.emulator.push(t):r.prod.push(t);return r}function hR(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let TT=!1;function ng(r,t){if(typeof window>"u"||typeof document>"u"||!Ja(window.location.host)||pc[r]===t||pc[r]||TT)return;pc[r]=t;function n(O){return`__firebase__banner__${O}`}const s="__firebase__banner",h=cR().prod.length>0;function m(){const O=document.getElementById(s);O&&O.remove()}function y(O){O.style.display="flex",O.style.background="#7faaf0",O.style.position="fixed",O.style.bottom="5px",O.style.left="5px",O.style.padding=".5em",O.style.borderRadius="5px",O.style.alignItems="center"}function v(O,j){O.setAttribute("width","24"),O.setAttribute("id",j),O.setAttribute("height","24"),O.setAttribute("viewBox","0 0 24 24"),O.setAttribute("fill","none"),O.style.marginLeft="-6px"}function T(){const O=document.createElement("span");return O.style.cursor="pointer",O.style.marginLeft="16px",O.style.fontSize="24px",O.innerHTML=" &times;",O.onclick=()=>{TT=!0,m()},O}function A(O,j){O.setAttribute("id",j),O.innerText="Learn more",O.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",O.setAttribute("target","__blank"),O.style.paddingLeft="5px",O.style.textDecoration="underline"}function C(){const O=hR(s),j=n("text"),J=document.getElementById(j)||document.createElement("span"),W=n("learnmore"),Q=document.getElementById(W)||document.createElement("a"),at=n("preprendIcon"),ut=document.getElementById(at)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(O.created){const ft=O.element;y(ft),A(Q,W);const xt=T();v(ut,at),ft.append(ut,J,Q,xt),document.body.appendChild(ft)}h?(J.innerText="Preview backend disconnected.",ut.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ut.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,J.innerText="Preview backend running in this workspace."),J.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fn())}function dR(){const r=Ff()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function gR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _R(){const r=Fn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function yR(){return!dR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vR(){try{return typeof indexedDB=="object"}catch{return!1}}function TR(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="FirebaseError";class hs extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=ER,Object.setPrototypeOf(this,hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kc.prototype.create)}}class kc{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,h=this.errors[t],m=h?wR(h,s):"Error",y=`${this.serviceName}: ${m} (${l}).`;return new hs(l,y,s)}}function wR(r,t){return r.replace(bR,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const bR=/\{\$([^}]+)}/g;function SR(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Qo(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const h=r[l],m=t[l];if(ET(h)&&ET(m)){if(!Qo(h,m))return!1}else if(h!==m)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function ET(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function AR(r,t){const n=new RR(r,t);return n.subscribe.bind(n)}class RR{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");CR(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=sp),l.error===void 0&&(l.error=sp),l.complete===void 0&&(l.complete=sp);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),h}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CR(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function sp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(r){return r&&r._delegate?r._delegate:r}class Za{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new uR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(OR(t))try{this.getOrInitializeService({instanceIdentifier:jo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const h=this.getOrInitializeService({instanceIdentifier:l});s.resolve(h)}catch{}}}}clearInstance(t=jo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=jo){return this.instances.has(t)}getOptions(t=jo){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[h,m]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(h);s===y&&m.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const h=this.instances.get(s);return h&&t(h,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:xR(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=jo){return this.component?this.component.multipleInstances?t:jo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xR(r){return r===jo?void 0:r}function OR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new IR(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(re||(re={}));const NR={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},PR=re.INFO,MR={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},DR=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=MR[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ig{constructor(t){this.name=t,this._logLevel=PR,this._logHandler=DR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in re))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?NR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...t),this._logHandler(this,re.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...t),this._logHandler(this,re.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,re.INFO,...t),this._logHandler(this,re.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,re.WARN,...t),this._logHandler(this,re.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...t),this._logHandler(this,re.ERROR,...t)}}const kR=(r,t)=>t.some(n=>r instanceof n);let wT,bT;function VR(){return wT||(wT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UR(){return bT||(bT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C0=new WeakMap,Ep=new WeakMap,I0=new WeakMap,ap=new WeakMap,rg=new WeakMap;function zR(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",h),r.removeEventListener("error",m)},h=()=>{n(ja(r.result)),l()},m=()=>{s(r.error),l()};r.addEventListener("success",h),r.addEventListener("error",m)});return t.then(n=>{n instanceof IDBCursor&&C0.set(n,r)}).catch(()=>{}),rg.set(t,r),t}function BR(r){if(Ep.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",h),r.removeEventListener("error",m),r.removeEventListener("abort",m)},h=()=>{n(),l()},m=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",h),r.addEventListener("error",m),r.addEventListener("abort",m)});Ep.set(r,t)}let wp={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Ep.get(r);if(t==="objectStoreNames")return r.objectStoreNames||I0.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ja(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function jR(r){wp=r(wp)}function HR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(op(this),t,...n);return I0.set(s,t.sort?t.sort():[t]),ja(s)}:UR().includes(r)?function(...t){return r.apply(op(this),t),ja(C0.get(this))}:function(...t){return ja(r.apply(op(this),t))}}function qR(r){return typeof r=="function"?HR(r):(r instanceof IDBTransaction&&BR(r),kR(r,VR())?new Proxy(r,wp):r)}function ja(r){if(r instanceof IDBRequest)return zR(r);if(ap.has(r))return ap.get(r);const t=qR(r);return t!==r&&(ap.set(r,t),rg.set(t,r)),t}const op=r=>rg.get(r);function FR(r,t,{blocked:n,upgrade:s,blocking:l,terminated:h}={}){const m=indexedDB.open(r,t),y=ja(m);return s&&m.addEventListener("upgradeneeded",v=>{s(ja(m.result),v.oldVersion,v.newVersion,ja(m.transaction),v)}),n&&m.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),y.then(v=>{h&&v.addEventListener("close",()=>h()),l&&v.addEventListener("versionchange",T=>l(T.oldVersion,T.newVersion,T))}).catch(()=>{}),y}const GR=["get","getKey","getAll","getAllKeys","count"],ZR=["put","add","delete","clear"],lp=new Map;function ST(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(lp.get(t))return lp.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=ZR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||GR.includes(n)))return;const h=async function(m,...y){const v=this.transaction(m,l?"readwrite":"readonly");let T=v.store;return s&&(T=T.index(y.shift())),(await Promise.all([T[n](...y),l&&v.done]))[0]};return lp.set(t,h),h}jR(r=>({...r,get:(t,n,s)=>ST(t,n)||r.get(t,n,s),has:(t,n)=>!!ST(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function YR(r){return r.getComponent()?.type==="VERSION"}const bp="@firebase/app",AT="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new ig("@firebase/app"),QR="@firebase/app-compat",$R="@firebase/analytics-compat",XR="@firebase/analytics",WR="@firebase/app-check-compat",JR="@firebase/app-check",tC="@firebase/auth",eC="@firebase/auth-compat",nC="@firebase/database",iC="@firebase/data-connect",rC="@firebase/database-compat",sC="@firebase/functions",aC="@firebase/functions-compat",oC="@firebase/installations",lC="@firebase/installations-compat",uC="@firebase/messaging",cC="@firebase/messaging-compat",hC="@firebase/performance",fC="@firebase/performance-compat",dC="@firebase/remote-config",mC="@firebase/remote-config-compat",pC="@firebase/storage",gC="@firebase/storage-compat",_C="@firebase/firestore",yC="@firebase/ai",vC="@firebase/firestore-compat",TC="firebase",EC="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="[DEFAULT]",wC={[bp]:"fire-core",[QR]:"fire-core-compat",[XR]:"fire-analytics",[$R]:"fire-analytics-compat",[JR]:"fire-app-check",[WR]:"fire-app-check-compat",[tC]:"fire-auth",[eC]:"fire-auth-compat",[nC]:"fire-rtdb",[iC]:"fire-data-connect",[rC]:"fire-rtdb-compat",[sC]:"fire-fn",[aC]:"fire-fn-compat",[oC]:"fire-iid",[lC]:"fire-iid-compat",[uC]:"fire-fcm",[cC]:"fire-fcm-compat",[hC]:"fire-perf",[fC]:"fire-perf-compat",[dC]:"fire-rc",[mC]:"fire-rc-compat",[pC]:"fire-gcs",[gC]:"fire-gcs-compat",[_C]:"fire-fst",[vC]:"fire-fst-compat",[yC]:"fire-vertex","fire-js":"fire-js",[TC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new Map,bC=new Map,Ap=new Map;function RT(r,t){try{r.container.addComponent(t)}catch(n){Fs.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function $o(r){const t=r.name;if(Ap.has(t))return Fs.debug(`There were multiple attempts to register component ${t}.`),!1;Ap.set(t,r);for(const n of Sf.values())RT(n,r);for(const n of bC.values())RT(n,r);return!0}function Gf(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function or(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ha=new kc("app","Firebase",SC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Za("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ha.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=EC;function x0(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:Sp,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Ha.create("bad-app-name",{appName:String(l)});if(n||(n=S0()),!n)throw Ha.create("no-options");const h=Sf.get(l);if(h){if(Qo(n,h.options)&&Qo(s,h.config))return h;throw Ha.create("duplicate-app",{appName:l})}const m=new LR(l);for(const v of Ap.values())m.addComponent(v);const y=new AC(n,s,m);return Sf.set(l,y),y}function sg(r=Sp){const t=Sf.get(r);if(!t&&r===Sp&&S0())return x0();if(!t)throw Ha.create("no-app",{appName:r});return t}function es(r,t,n){let s=wC[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const m=[`Unable to register library "${s}" with version "${t}":`];l&&m.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&h&&m.push("and"),h&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Fs.warn(m.join(" "));return}$o(new Za(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="firebase-heartbeat-database",CC=1,bc="firebase-heartbeat-store";let up=null;function O0(){return up||(up=FR(RC,CC,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(bc)}catch(n){console.warn(n)}}}}).catch(r=>{throw Ha.create("idb-open",{originalErrorMessage:r.message})})),up}async function IC(r){try{const n=(await O0()).transaction(bc),s=await n.objectStore(bc).get(L0(r));return await n.done,s}catch(t){if(t instanceof hs)Fs.warn(t.message);else{const n=Ha.create("idb-get",{originalErrorMessage:t?.message});Fs.warn(n.message)}}}async function CT(r,t){try{const s=(await O0()).transaction(bc,"readwrite");await s.objectStore(bc).put(t,L0(r)),await s.done}catch(n){if(n instanceof hs)Fs.warn(n.message);else{const s=Ha.create("idb-set",{originalErrorMessage:n?.message});Fs.warn(s.message)}}}function L0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=1024,OC=30;class LC{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=IT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>OC){const l=MC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Fs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=IT(),{heartbeatsToSend:n,unsentEntries:s}=NC(this._heartbeatsCache.heartbeats),l=bf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Fs.warn(t),""}}}function IT(){return new Date().toISOString().substring(0,10)}function NC(r,t=xC){const n=[];let s=r.slice();for(const l of r){const h=n.find(m=>m.agent===l.agent);if(h){if(h.dates.push(l.date),xT(n)>t){h.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),xT(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class PC{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vR()?TR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return CT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return CT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function xT(r){return bf(JSON.stringify({version:2,heartbeats:r})).length}function MC(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(r){$o(new Za("platform-logger",t=>new KR(t),"PRIVATE")),$o(new Za("heartbeat",t=>new LC(t),"PRIVATE")),es(bp,AT,r),es(bp,AT,"esm2020"),es("fire-js","")}DC("");var kC="firebase",VC="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(kC,VC,"app");function N0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UC=N0,P0=new kc("auth","Firebase",N0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new ig("@firebase/auth");function zC(r,...t){Af.logLevel<=re.WARN&&Af.warn(`Auth (${il}): ${r}`,...t)}function hf(r,...t){Af.logLevel<=re.ERROR&&Af.error(`Auth (${il}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(r,...t){throw og(r,...t)}function Cr(r,...t){return og(r,...t)}function ag(r,t,n){const s={...UC(),[t]:n};return new kc("auth","Firebase",s).create(t,{appName:r.name})}function Fo(r){return ag(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BC(r,t,n){const s=n;if(!(t instanceof s))throw s.name!==t.constructor.name&&ls(r,"argument-error"),ag(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function og(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return P0.create(r,...t)}function Bt(r,t,...n){if(!r)throw og(t,...n)}function Bs(r){const t="INTERNAL ASSERTION FAILED: "+r;throw hf(t),new Error(t)}function Gs(r,t){r||Bs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(){return typeof self<"u"&&self.location?.href||""}function jC(){return OT()==="http:"||OT()==="https:"}function OT(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jC()||pR()||"connection"in navigator)?navigator.onLine:!0}function qC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(t,n){this.shortDelay=t,this.longDelay=n,Gs(n>t,"Short delay should be less than long delay!"),this.isMobile=fR()||gR()}get(){return HC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(r,t){Gs(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZC=new Uc(3e4,6e4);function ug(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function pu(r,t,n,s,l={}){return D0(r,l,async()=>{let h={},m={};s&&(t==="GET"?m=s:h={body:JSON.stringify(s)});const y=Vc({key:r.config.apiKey,...m}).slice(1),v=await r._getAdditionalHeaders();v["Content-Type"]="application/json",r.languageCode&&(v["X-Firebase-Locale"]=r.languageCode);const T={method:t,headers:v,...h};return mR()||(T.referrerPolicy="no-referrer"),r.emulatorConfig&&Ja(r.emulatorConfig.host)&&(T.credentials="include"),M0.fetch()(await k0(r,r.config.apiHost,n,y),T)})}async function D0(r,t,n){r._canInitEmulator=!1;const s={...FC,...t};try{const l=new YC(r),h=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const m=await h.json();if("needConfirmation"in m)throw tf(r,"account-exists-with-different-credential",m);if(h.ok&&!("errorMessage"in m))return m;{const y=h.ok?m.errorMessage:m.error.message,[v,T]=y.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw tf(r,"credential-already-in-use",m);if(v==="EMAIL_EXISTS")throw tf(r,"email-already-in-use",m);if(v==="USER_DISABLED")throw tf(r,"user-disabled",m);const A=s[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw ag(r,A,T);ls(r,A)}}catch(l){if(l instanceof hs)throw l;ls(r,"network-request-failed",{message:String(l)})}}async function KC(r,t,n,s,l={}){const h=await pu(r,t,n,s,l);return"mfaPendingCredential"in h&&ls(r,"multi-factor-auth-required",{_serverResponse:h}),h}async function k0(r,t,n,s){const l=`${t}${n}?${s}`,h=r,m=h.config.emulator?lg(r.config,l):`${r.config.apiScheme}://${l}`;return GC.includes(n)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(m).toString():m}class YC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Cr(this.auth,"network-request-failed")),ZC.get())})}}function tf(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=Cr(r,t,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(r,t){return pu(r,"POST","/v1/accounts:delete",t)}async function Rf(r,t){return pu(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function $C(r,t=!1){const n=He(r),s=await n.getIdToken(t),l=cg(s);Bt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const h=typeof l.firebase=="object"?l.firebase:void 0,m=h?.sign_in_provider;return{claims:l,token:s,authTime:gc(cp(l.auth_time)),issuedAtTime:gc(cp(l.iat)),expirationTime:gc(cp(l.exp)),signInProvider:m||null,signInSecondFactor:h?.sign_in_second_factor||null}}function cp(r){return Number(r)*1e3}function cg(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{const l=E0(n);return l?JSON.parse(l):(hf("Failed to decode base64 JWT payload"),null)}catch(l){return hf("Caught error parsing JWT payload as JSON",l?.toString()),null}}function LT(r){const t=cg(r);return Bt(t,"internal-error"),Bt(typeof t.exp<"u","internal-error"),Bt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sc(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof hs&&XC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function XC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cf(r){const t=r.auth,n=await r.getIdToken(),s=await Sc(r,Rf(t,{idToken:n}));Bt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const h=l.providerUserInfo?.length?V0(l.providerUserInfo):[],m=tI(r.providerData,h),y=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!m?.length,T=y?v:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:m,metadata:new Cp(l.createdAt,l.lastLoginAt),isAnonymous:T};Object.assign(r,A)}async function JC(r){const t=He(r);await Cf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function tI(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function V0(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(r,t){const n=await D0(r,{},async()=>{const s=Vc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:h}=r.config,m=await k0(r,l,"/v1/token",`key=${h}`),y=await r._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:y,body:s};return r.emulatorConfig&&Ja(r.emulatorConfig.host)&&(v.credentials="include"),M0.fetch()(m,v)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nI(r,t){return pu(r,"POST","/v2/accounts:revokeToken",ug(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Bt(t.idToken,"internal-error"),Bt(typeof t.idToken<"u","internal-error"),Bt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):LT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Bt(t.length!==0,"internal-error");const n=LT(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Bt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:h}=await eI(t,n);this.updateTokensAndExpiration(s,l,Number(h))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:h}=n,m=new tu;return s&&(Bt(typeof s=="string","internal-error",{appName:t}),m.refreshToken=s),l&&(Bt(typeof l=="string","internal-error",{appName:t}),m.accessToken=l),h&&(Bt(typeof h=="number","internal-error",{appName:t}),m.expirationTime=h),m}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new tu,this.toJSON())}_performRefresh(){return Bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(r,t){Bt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Rr{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new WC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Cp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Sc(this,this.stsTokenManager.getToken(this.auth,t));return Bt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return $C(this,t)}reload(){return JC(this)}_assign(t){this!==t&&(Bt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Rr({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Cf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(Fo(this.auth));const t=await this.getIdToken();return await Sc(this,QC(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,h=n.phoneNumber??void 0,m=n.photoURL??void 0,y=n.tenantId??void 0,v=n._redirectEventId??void 0,T=n.createdAt??void 0,A=n.lastLoginAt??void 0,{uid:C,emailVerified:O,isAnonymous:j,providerData:J,stsTokenManager:W}=n;Bt(C&&W,t,"internal-error");const Q=tu.fromJSON(this.name,W);Bt(typeof C=="string",t,"internal-error"),Da(s,t.name),Da(l,t.name),Bt(typeof O=="boolean",t,"internal-error"),Bt(typeof j=="boolean",t,"internal-error"),Da(h,t.name),Da(m,t.name),Da(y,t.name),Da(v,t.name),Da(T,t.name),Da(A,t.name);const at=new Rr({uid:C,auth:t,email:l,emailVerified:O,displayName:s,isAnonymous:j,photoURL:m,phoneNumber:h,tenantId:y,stsTokenManager:Q,createdAt:T,lastLoginAt:A});return J&&Array.isArray(J)&&(at.providerData=J.map(ut=>({...ut}))),v&&(at._redirectEventId=v),at}static async _fromIdTokenResponse(t,n,s=!1){const l=new tu;l.updateFromServerResponse(n);const h=new Rr({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Cf(h),h}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];Bt(l.localId!==void 0,"internal-error");const h=l.providerUserInfo!==void 0?V0(l.providerUserInfo):[],m=!(l.email&&l.passwordHash)&&!h?.length,y=new tu;y.updateFromIdToken(s);const v=new Rr({uid:l.localId,auth:t,stsTokenManager:y,isAnonymous:m}),T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Cp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!h?.length};return Object.assign(v,T),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=new Map;function js(r){Gs(r instanceof Function,"Expected a class definition");let t=NT.get(r);return t?(Gs(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,NT.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}U0.type="NONE";const PT=U0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(r,t,n){return`firebase:${r}:${t}:${n}`}class eu{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:h}=this.auth;this.fullUserKey=ff(this.userKey,l.apiKey,h),this.fullPersistenceKey=ff("persistence",l.apiKey,h),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Rf(this.auth,{idToken:t}).catch(()=>{});return n?Rr._fromGetAccountInfoResponse(this.auth,n,t):null}return Rr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new eu(js(PT),t,s);const l=(await Promise.all(n.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let h=l[0]||js(PT);const m=ff(s,t.config.apiKey,t.name);let y=null;for(const T of n)try{const A=await T._get(m);if(A){let C;if(typeof A=="string"){const O=await Rf(t,{idToken:A}).catch(()=>{});if(!O)break;C=await Rr._fromGetAccountInfoResponse(t,O,A)}else C=Rr._fromJSON(t,A);T!==h&&(y=C),h=T;break}}catch{}const v=l.filter(T=>T._shouldAllowMigration);return!h._shouldAllowMigration||!v.length?new eu(h,t,s):(h=v[0],y&&await h._set(m,y.toJSON()),await Promise.all(n.map(async T=>{if(T!==h)try{await T._remove(m)}catch{}})),new eu(h,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(H0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(z0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(F0(t))return"Blackberry";if(G0(t))return"Webos";if(B0(t))return"Safari";if((t.includes("chrome/")||j0(t))&&!t.includes("edge/"))return"Chrome";if(q0(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function z0(r=Fn()){return/firefox\//i.test(r)}function B0(r=Fn()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function j0(r=Fn()){return/crios\//i.test(r)}function H0(r=Fn()){return/iemobile/i.test(r)}function q0(r=Fn()){return/android/i.test(r)}function F0(r=Fn()){return/blackberry/i.test(r)}function G0(r=Fn()){return/webos/i.test(r)}function hg(r=Fn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function iI(r=Fn()){return hg(r)&&!!window.navigator?.standalone}function rI(){return _R()&&document.documentMode===10}function Z0(r=Fn()){return hg(r)||q0(r)||G0(r)||F0(r)||/windows phone/i.test(r)||H0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(r,t=[]){let n;switch(r){case"Browser":n=MT(Fn());break;case"Worker":n=`${MT(Fn())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${il}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=h=>new Promise((m,y)=>{try{const v=t(h);m(v)}catch(v){y(v)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(r,t={}){return pu(r,"GET","/v2/passwordPolicy",ug(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=6;class lI{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??oI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,h){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DT(this),this.idTokenSubscription=new DT(this),this.beforeStateQueue=new sI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=js(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await eu.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Rf(this,{idToken:t}),s=await Rr._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(or(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,m=s?._redirectEventId,y=await this.tryRedirectSignIn(t);(!h||h===m)&&y?.user&&(s=y.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Cf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=qC()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(or(this.app))return Promise.reject(Fo(this));const n=t?He(t):null;return n&&Bt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Bt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(Fo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return or(this.app)?Promise.reject(Fo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(js(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await aI(this),n=new lI(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new kc("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await nI(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&js(t)||this._popupRedirectResolver;Bt(n,this,"argument-error"),this.redirectPersistenceManager=await eu.create(this,[js(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const h=typeof n=="function"?n:n.next.bind(n);let m=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(Bt(y,this,"internal-error"),y.then(()=>{m||h(this.currentUser)}),typeof n=="function"){const v=t.addObserver(n,s,l);return()=>{m=!0,v()}}else{const v=t.addObserver(n);return()=>{m=!0,v()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=K0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&zC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Zf(r){return He(r)}class DT{constructor(t){this.auth=t,this.observer=null,this.addObserver=AR(n=>this.observer=n)}get next(){return Bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cI(r){fg=r}function hI(r){return fg.loadJS(r)}function fI(){return fg.gapiScript}function dI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(r,t){const n=Gf(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),h=n.getOptions();if(Qo(h,t??{}))return l;ls(l,"already-initialized")}return n.initialize({options:t})}function pI(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(js);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function gI(r,t,n){const s=Zf(r);Bt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,h=Y0(t),{host:m,port:y}=_I(t),v=y===null?"":`:${y}`,T={url:`${h}//${m}${v}/`},A=Object.freeze({host:m,port:y,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Bt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Bt(Qo(T,s.config.emulator)&&Qo(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=T,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,Ja(m)?(eg(`${h}//${m}${v}`),ng("Auth",!0)):yI()}function Y0(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function _I(r){const t=Y0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const h=l[1];return{host:h,port:kT(s.substr(h.length+1))}}else{const[h,m]=s.split(":");return{host:h,port:kT(m)}}}function kT(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function yI(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Bs("not implemented")}_getIdTokenResponse(t){return Bs("not implemented")}_linkToIdToken(t,n){return Bs("not implemented")}_getReauthenticationResolver(t){return Bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(r,t){return KC(r,"POST","/v1/accounts:signInWithIdp",ug(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="http://localhost";class Xo extends Q0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Xo(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ls("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...h}=n;if(!s||!l)return null;const m=new Xo(s,l);return m.idToken=h.idToken||void 0,m.accessToken=h.accessToken||void 0,m.secret=h.secret,m.nonce=h.nonce,m.pendingToken=h.pendingToken||null,m}_getIdTokenResponse(t){const n=this.buildRequest();return nu(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,nu(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,nu(t,n)}buildRequest(){const t={requestUri:vI,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Vc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends dg{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends zc{constructor(){super("facebook.com")}static credential(t){return Xo._fromParams({providerId:ka.PROVIDER_ID,signInMethod:ka.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ka.credentialFromTaggedObject(t)}static credentialFromError(t){return ka.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ka.credential(t.oauthAccessToken)}catch{return null}}}ka.FACEBOOK_SIGN_IN_METHOD="facebook.com";ka.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends zc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Xo._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return zs.credentialFromTaggedObject(t)}static credentialFromError(t){return zs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return zs.credential(n,s)}catch{return null}}}zs.GOOGLE_SIGN_IN_METHOD="google.com";zs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends zc{constructor(){super("github.com")}static credential(t){return Xo._fromParams({providerId:Va.PROVIDER_ID,signInMethod:Va.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Va.credentialFromTaggedObject(t)}static credentialFromError(t){return Va.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Va.credential(t.oauthAccessToken)}catch{return null}}}Va.GITHUB_SIGN_IN_METHOD="github.com";Va.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends zc{constructor(){super("twitter.com")}static credential(t,n){return Xo._fromParams({providerId:Ua.PROVIDER_ID,signInMethod:Ua.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ua.credentialFromTaggedObject(t)}static credentialFromError(t){return Ua.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Ua.credential(n,s)}catch{return null}}}Ua.TWITTER_SIGN_IN_METHOD="twitter.com";Ua.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const h=await Rr._fromIdTokenResponse(t,s,l),m=VT(s);return new su({user:h,providerId:m,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=VT(s);return new su({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function VT(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends hs{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,If.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new If(t,n,s,l)}}function $0(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?If._fromErrorAndOperation(r,h,t,s):h})}async function TI(r,t,n=!1){const s=await Sc(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return su._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(r,t,n=!1){const{auth:s}=r;if(or(s.app))return Promise.reject(Fo(s));const l="reauthenticate";try{const h=await Sc(r,$0(s,l,t,r),n);Bt(h.idToken,s,"internal-error");const m=cg(h.idToken);Bt(m,s,"internal-error");const{sub:y}=m;return Bt(r.uid===y,s,"user-mismatch"),su._forOperation(r,l,h)}catch(h){throw h?.code==="auth/user-not-found"&&ls(s,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wI(r,t,n=!1){if(or(r.app))return Promise.reject(Fo(r));const s="signIn",l=await $0(r,s,t),h=await su._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(h.user),h}function bI(r,t,n,s){return He(r).onIdTokenChanged(t,n,s)}function SI(r,t,n){return He(r).beforeAuthStateChanged(t,n)}function AI(r,t,n,s){return He(r).onAuthStateChanged(t,n,s)}function RI(r){return He(r).signOut()}const xf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xf,"1"),this.storage.removeItem(xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=1e3,II=10;class W0 extends X0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((m,y,v)=>{this.notifyListeners(m,v)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const m=this.storage.getItem(s);!n&&this.localCache[s]===m||this.notifyListeners(s,m)},h=this.storage.getItem(s);rI()&&h!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,II):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},CI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}W0.type="LOCAL";const xI=W0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0 extends X0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}J0.type="SESSION";const tw=J0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new Kf(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:h}=n.data,m=this.handlersMap[l];if(!m?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const y=Array.from(m).map(async T=>T(n.origin,h)),v=await OI(y);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:v})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let h,m;return new Promise((y,v)=>{const T=mg("",20);l.port1.start();const A=setTimeout(()=>{v(new Error("unsupported_event"))},s);m={messageChannel:l,onMessage(C){const O=C;if(O.data.eventId===T)switch(O.data.status){case"ack":clearTimeout(A),h=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),y(O.data.response);break;default:clearTimeout(A),clearTimeout(h),v(new Error("invalid_response"));break}}},this.handlers.add(m),l.port1.addEventListener("message",m.onMessage),this.target.postMessage({eventType:t,eventId:T,data:n},[l.port2])}).finally(()=>{m&&this.removeMessageHandler(m)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(){return window}function NI(r){ns().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(){return typeof ns().WorkerGlobalScope<"u"&&typeof ns().importScripts=="function"}async function PI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MI(){return navigator?.serviceWorker?.controller||null}function DI(){return ew()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="firebaseLocalStorageDb",kI=1,Of="firebaseLocalStorage",iw="fbase_key";class Bc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yf(r,t){return r.transaction([Of],t?"readwrite":"readonly").objectStore(Of)}function VI(){const r=indexedDB.deleteDatabase(nw);return new Bc(r).toPromise()}function Ip(){const r=indexedDB.open(nw,kI);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Of,{keyPath:iw})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Of)?t(s):(s.close(),await VI(),t(await Ip()))})})}async function UT(r,t,n){const s=Yf(r,!0).put({[iw]:t,value:n});return new Bc(s).toPromise()}async function UI(r,t){const n=Yf(r,!1).get(t),s=await new Bc(n).toPromise();return s===void 0?null:s.value}function zT(r,t){const n=Yf(r,!0).delete(t);return new Bc(n).toPromise()}const zI=800,BI=3;class rw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ip(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>BI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ew()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kf._getInstance(DI()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await PI(),!this.activeServiceWorker)return;this.sender=new LI(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||MI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ip();return await UT(t,xf,"1"),await zT(t,xf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>UT(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>UI(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>zT(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const h=Yf(l,!1).getAll();return new Bc(h).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:h}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(h)&&(this.notifyListeners(l,h),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rw.type="LOCAL";const jI=rw;new Uc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(r,t){return t?js(t):(Bt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg extends Q0{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return nu(t,this._buildIdpRequest())}_linkToIdToken(t,n){return nu(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return nu(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function HI(r){return wI(r.auth,new pg(r),r.bypassAuthState)}function qI(r){const{auth:t,user:n}=r;return Bt(n,t,"internal-error"),EI(n,new pg(r),r.bypassAuthState)}async function FI(r){const{auth:t,user:n}=r;return Bt(n,t,"internal-error"),TI(n,new pg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t,n,s,l,h=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:h,error:m,type:y}=t;if(m){this.reject(m);return}const v={auth:this.auth,requestUri:n,sessionId:s,tenantId:h||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(v))}catch(T){this.reject(T)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return HI;case"linkViaPopup":case"linkViaRedirect":return FI;case"reauthViaPopup":case"reauthViaRedirect":return qI;default:ls(this.auth,"internal-error")}}resolve(t){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=new Uc(2e3,1e4);async function ZI(r,t,n){if(or(r.app))return Promise.reject(Cr(r,"operation-not-supported-in-this-environment"));const s=Zf(r);BC(r,t,dg);const l=sw(s,n);return new Ho(s,"signInViaPopup",t,l).executeNotNull()}class Ho extends aw{constructor(t,n,s,l,h){super(t,n,l,h),this.provider=s,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Bt(t,this.auth,"internal-error"),t}async onExecution(){Gs(this.filter.length===1,"Popup operations only handle one event");const t=mg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,GI.get())};t()}}Ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="pendingRedirect",df=new Map;class YI extends aw{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=df.get(this.auth._key());if(!t){try{const s=await QI(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}df.set(this.auth._key(),t)}return this.bypassAuthState||df.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QI(r,t){const n=WI(t),s=XI(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function $I(r,t){df.set(r._key(),t)}function XI(r){return js(r._redirectPersistence)}function WI(r){return ff(KI,r.config.apiKey,r.name)}async function JI(r,t,n=!1){if(or(r.app))return Promise.reject(Fo(r));const s=Zf(r),l=sw(s,t),m=await new YI(s,l,n).execute();return m&&!n&&(delete m.user._redirectEventId,await s._persistUserIfCurrent(m.user),await s._setRedirectUser(null,t)),m}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=600*1e3;class ex{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!nx(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!ow(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Cr(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=tx&&this.cachedEventUids.clear(),this.cachedEventUids.has(BT(t))}saveEventToCache(t){this.cachedEventUids.add(BT(t)),this.lastProcessedEventTime=Date.now()}}function BT(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function ow({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function nx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ow(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ix(r,t={}){return pu(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sx=/^https?/;async function ax(r){if(r.config.emulator)return;const{authorizedDomains:t}=await ix(r);for(const n of t)try{if(ox(n))return}catch{}ls(r,"unauthorized-domain")}function ox(r){const t=Rp(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const m=new URL(r);return m.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&m.hostname===s}if(!sx.test(n))return!1;if(rx.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=new Uc(3e4,6e4);function jT(){const r=ns().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function ux(r){return new Promise((t,n)=>{function s(){jT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{jT(),n(Cr(r,"network-request-failed"))},timeout:lx.get()})}if(ns().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ns().gapi?.load)s();else{const l=dI("iframefcb");return ns()[l]=()=>{gapi.load?s():n(Cr(r,"network-request-failed"))},hI(`${fI()}?onload=${l}`).catch(h=>n(h))}}).catch(t=>{throw mf=null,t})}let mf=null;function cx(r){return mf=mf||ux(r),mf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=new Uc(5e3,15e3),fx="__/auth/iframe",dx="emulator/auth/iframe",mx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},px=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gx(r){const t=r.config;Bt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?lg(t,dx):`https://${r.config.authDomain}/${fx}`,s={apiKey:t.apiKey,appName:r.name,v:il},l=px.get(r.config.apiHost);l&&(s.eid=l);const h=r._getFrameworks();return h.length&&(s.fw=h.join(",")),`${n}?${Vc(s).slice(1)}`}async function _x(r){const t=await cx(r),n=ns().gapi;return Bt(n,r,"internal-error"),t.open({where:document.body,url:gx(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mx,dontclear:!0},s=>new Promise(async(l,h)=>{await s.restyle({setHideOnLeave:!1});const m=Cr(r,"network-request-failed"),y=ns().setTimeout(()=>{h(m)},hx.get());function v(){ns().clearTimeout(y),l(s)}s.ping(v).then(v,()=>{h(m)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vx=500,Tx=600,Ex="_blank",wx="http://localhost";class HT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bx(r,t,n,s=vx,l=Tx){const h=Math.max((window.screen.availHeight-l)/2,0).toString(),m=Math.max((window.screen.availWidth-s)/2,0).toString();let y="";const v={...yx,width:s.toString(),height:l.toString(),top:h,left:m},T=Fn().toLowerCase();n&&(y=j0(T)?Ex:n),z0(T)&&(t=t||wx,v.scrollbars="yes");const A=Object.entries(v).reduce((O,[j,J])=>`${O}${j}=${J},`,"");if(iI(T)&&y!=="_self")return Sx(t||"",y),new HT(null);const C=window.open(t||"",y,A);Bt(C,r,"popup-blocked");try{C.focus()}catch{}return new HT(C)}function Sx(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="__/auth/handler",Rx="emulator/auth/handler",Cx=encodeURIComponent("fac");async function qT(r,t,n,s,l,h){Bt(r.config.authDomain,r,"auth-domain-config-required"),Bt(r.config.apiKey,r,"invalid-api-key");const m={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:il,eventId:l};if(t instanceof dg){t.setDefaultLanguage(r.languageCode),m.providerId=t.providerId||"",SR(t.getCustomParameters())||(m.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,C]of Object.entries({}))m[A]=C}if(t instanceof zc){const A=t.getScopes().filter(C=>C!=="");A.length>0&&(m.scopes=A.join(","))}r.tenantId&&(m.tid=r.tenantId);const y=m;for(const A of Object.keys(y))y[A]===void 0&&delete y[A];const v=await r._getAppCheckToken(),T=v?`#${Cx}=${encodeURIComponent(v)}`:"";return`${Ix(r)}?${Vc(y).slice(1)}${T}`}function Ix({config:r}){return r.emulator?lg(r,Rx):`https://${r.authDomain}/${Ax}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="webStorageSupport";class xx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tw,this._completeRedirectFn=JI,this._overrideRedirectResult=$I}async _openPopup(t,n,s,l){Gs(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const h=await qT(t,n,s,Rp(),l);return bx(t,h,mg())}async _openRedirect(t,n,s,l){await this._originValidation(t);const h=await qT(t,n,s,Rp(),l);return NI(h),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:h}=this.eventManagers[n];return l?Promise.resolve(l):(Gs(h,"If manager is not set, promise should be"),h)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await _x(t),s=new ex(t);return n.register("authEvent",l=>(Bt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(hp,{type:hp},l=>{const h=l?.[0]?.[hp];h!==void 0&&n(!!h),ls(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ax(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Z0()||B0()||hg()}}const Ox=xx;var FT="@firebase/auth",GT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Px(r){$o(new Za("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),h=t.getProvider("app-check-internal"),{apiKey:m,authDomain:y}=s.options;Bt(m&&!m.includes(":"),"invalid-api-key",{appName:s.name});const v={apiKey:m,authDomain:y,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:K0(r)},T=new uI(s,l,h,v);return pI(T,n),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),$o(new Za("auth-internal",t=>{const n=Zf(t.getProvider("auth").getImmediate());return(s=>new Lx(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),es(FT,GT,Nx(r)),es(FT,GT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=300,Dx=A0("authIdTokenMaxAge")||Mx;let ZT=null;const kx=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Dx)return;const l=n?.token;ZT!==l&&(ZT=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Vx(r=sg()){const t=Gf(r,"auth");if(t.isInitialized())return t.getImmediate();const n=mI(r,{popupRedirectResolver:Ox,persistence:[jI,xI,tw]}),s=A0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(s,location.origin);if(location.origin===h.origin){const m=kx(h.toString());SI(n,m,()=>m(n.currentUser)),bI(n,y=>m(y))}}const l=w0("auth");return l&&gI(n,`http://${l}`),n}function Ux(){return document.getElementsByTagName("head")?.[0]??document}cI({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const h=Cr("internal-error");h.customData=l,n(h)},s.type="text/javascript",s.charset="UTF-8",Ux().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Px("Browser");var KT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qa,lw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,N){function P(){}P.prototype=N.prototype,D.F=N.prototype,D.prototype=new P,D.prototype.constructor=D,D.D=function(H,U,q){for(var k=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)k[oe-2]=arguments[oe];return N.prototype[U].apply(H,k)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(D,N,P){P||(P=0);const H=Array(16);if(typeof N=="string")for(var U=0;U<16;++U)H[U]=N.charCodeAt(P++)|N.charCodeAt(P++)<<8|N.charCodeAt(P++)<<16|N.charCodeAt(P++)<<24;else for(U=0;U<16;++U)H[U]=N[P++]|N[P++]<<8|N[P++]<<16|N[P++]<<24;N=D.g[0],P=D.g[1],U=D.g[2];let q=D.g[3],k;k=N+(q^P&(U^q))+H[0]+3614090360&4294967295,N=P+(k<<7&4294967295|k>>>25),k=q+(U^N&(P^U))+H[1]+3905402710&4294967295,q=N+(k<<12&4294967295|k>>>20),k=U+(P^q&(N^P))+H[2]+606105819&4294967295,U=q+(k<<17&4294967295|k>>>15),k=P+(N^U&(q^N))+H[3]+3250441966&4294967295,P=U+(k<<22&4294967295|k>>>10),k=N+(q^P&(U^q))+H[4]+4118548399&4294967295,N=P+(k<<7&4294967295|k>>>25),k=q+(U^N&(P^U))+H[5]+1200080426&4294967295,q=N+(k<<12&4294967295|k>>>20),k=U+(P^q&(N^P))+H[6]+2821735955&4294967295,U=q+(k<<17&4294967295|k>>>15),k=P+(N^U&(q^N))+H[7]+4249261313&4294967295,P=U+(k<<22&4294967295|k>>>10),k=N+(q^P&(U^q))+H[8]+1770035416&4294967295,N=P+(k<<7&4294967295|k>>>25),k=q+(U^N&(P^U))+H[9]+2336552879&4294967295,q=N+(k<<12&4294967295|k>>>20),k=U+(P^q&(N^P))+H[10]+4294925233&4294967295,U=q+(k<<17&4294967295|k>>>15),k=P+(N^U&(q^N))+H[11]+2304563134&4294967295,P=U+(k<<22&4294967295|k>>>10),k=N+(q^P&(U^q))+H[12]+1804603682&4294967295,N=P+(k<<7&4294967295|k>>>25),k=q+(U^N&(P^U))+H[13]+4254626195&4294967295,q=N+(k<<12&4294967295|k>>>20),k=U+(P^q&(N^P))+H[14]+2792965006&4294967295,U=q+(k<<17&4294967295|k>>>15),k=P+(N^U&(q^N))+H[15]+1236535329&4294967295,P=U+(k<<22&4294967295|k>>>10),k=N+(U^q&(P^U))+H[1]+4129170786&4294967295,N=P+(k<<5&4294967295|k>>>27),k=q+(P^U&(N^P))+H[6]+3225465664&4294967295,q=N+(k<<9&4294967295|k>>>23),k=U+(N^P&(q^N))+H[11]+643717713&4294967295,U=q+(k<<14&4294967295|k>>>18),k=P+(q^N&(U^q))+H[0]+3921069994&4294967295,P=U+(k<<20&4294967295|k>>>12),k=N+(U^q&(P^U))+H[5]+3593408605&4294967295,N=P+(k<<5&4294967295|k>>>27),k=q+(P^U&(N^P))+H[10]+38016083&4294967295,q=N+(k<<9&4294967295|k>>>23),k=U+(N^P&(q^N))+H[15]+3634488961&4294967295,U=q+(k<<14&4294967295|k>>>18),k=P+(q^N&(U^q))+H[4]+3889429448&4294967295,P=U+(k<<20&4294967295|k>>>12),k=N+(U^q&(P^U))+H[9]+568446438&4294967295,N=P+(k<<5&4294967295|k>>>27),k=q+(P^U&(N^P))+H[14]+3275163606&4294967295,q=N+(k<<9&4294967295|k>>>23),k=U+(N^P&(q^N))+H[3]+4107603335&4294967295,U=q+(k<<14&4294967295|k>>>18),k=P+(q^N&(U^q))+H[8]+1163531501&4294967295,P=U+(k<<20&4294967295|k>>>12),k=N+(U^q&(P^U))+H[13]+2850285829&4294967295,N=P+(k<<5&4294967295|k>>>27),k=q+(P^U&(N^P))+H[2]+4243563512&4294967295,q=N+(k<<9&4294967295|k>>>23),k=U+(N^P&(q^N))+H[7]+1735328473&4294967295,U=q+(k<<14&4294967295|k>>>18),k=P+(q^N&(U^q))+H[12]+2368359562&4294967295,P=U+(k<<20&4294967295|k>>>12),k=N+(P^U^q)+H[5]+4294588738&4294967295,N=P+(k<<4&4294967295|k>>>28),k=q+(N^P^U)+H[8]+2272392833&4294967295,q=N+(k<<11&4294967295|k>>>21),k=U+(q^N^P)+H[11]+1839030562&4294967295,U=q+(k<<16&4294967295|k>>>16),k=P+(U^q^N)+H[14]+4259657740&4294967295,P=U+(k<<23&4294967295|k>>>9),k=N+(P^U^q)+H[1]+2763975236&4294967295,N=P+(k<<4&4294967295|k>>>28),k=q+(N^P^U)+H[4]+1272893353&4294967295,q=N+(k<<11&4294967295|k>>>21),k=U+(q^N^P)+H[7]+4139469664&4294967295,U=q+(k<<16&4294967295|k>>>16),k=P+(U^q^N)+H[10]+3200236656&4294967295,P=U+(k<<23&4294967295|k>>>9),k=N+(P^U^q)+H[13]+681279174&4294967295,N=P+(k<<4&4294967295|k>>>28),k=q+(N^P^U)+H[0]+3936430074&4294967295,q=N+(k<<11&4294967295|k>>>21),k=U+(q^N^P)+H[3]+3572445317&4294967295,U=q+(k<<16&4294967295|k>>>16),k=P+(U^q^N)+H[6]+76029189&4294967295,P=U+(k<<23&4294967295|k>>>9),k=N+(P^U^q)+H[9]+3654602809&4294967295,N=P+(k<<4&4294967295|k>>>28),k=q+(N^P^U)+H[12]+3873151461&4294967295,q=N+(k<<11&4294967295|k>>>21),k=U+(q^N^P)+H[15]+530742520&4294967295,U=q+(k<<16&4294967295|k>>>16),k=P+(U^q^N)+H[2]+3299628645&4294967295,P=U+(k<<23&4294967295|k>>>9),k=N+(U^(P|~q))+H[0]+4096336452&4294967295,N=P+(k<<6&4294967295|k>>>26),k=q+(P^(N|~U))+H[7]+1126891415&4294967295,q=N+(k<<10&4294967295|k>>>22),k=U+(N^(q|~P))+H[14]+2878612391&4294967295,U=q+(k<<15&4294967295|k>>>17),k=P+(q^(U|~N))+H[5]+4237533241&4294967295,P=U+(k<<21&4294967295|k>>>11),k=N+(U^(P|~q))+H[12]+1700485571&4294967295,N=P+(k<<6&4294967295|k>>>26),k=q+(P^(N|~U))+H[3]+2399980690&4294967295,q=N+(k<<10&4294967295|k>>>22),k=U+(N^(q|~P))+H[10]+4293915773&4294967295,U=q+(k<<15&4294967295|k>>>17),k=P+(q^(U|~N))+H[1]+2240044497&4294967295,P=U+(k<<21&4294967295|k>>>11),k=N+(U^(P|~q))+H[8]+1873313359&4294967295,N=P+(k<<6&4294967295|k>>>26),k=q+(P^(N|~U))+H[15]+4264355552&4294967295,q=N+(k<<10&4294967295|k>>>22),k=U+(N^(q|~P))+H[6]+2734768916&4294967295,U=q+(k<<15&4294967295|k>>>17),k=P+(q^(U|~N))+H[13]+1309151649&4294967295,P=U+(k<<21&4294967295|k>>>11),k=N+(U^(P|~q))+H[4]+4149444226&4294967295,N=P+(k<<6&4294967295|k>>>26),k=q+(P^(N|~U))+H[11]+3174756917&4294967295,q=N+(k<<10&4294967295|k>>>22),k=U+(N^(q|~P))+H[2]+718787259&4294967295,U=q+(k<<15&4294967295|k>>>17),k=P+(q^(U|~N))+H[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(U+(k<<21&4294967295|k>>>11))&4294967295,D.g[2]=D.g[2]+U&4294967295,D.g[3]=D.g[3]+q&4294967295}s.prototype.v=function(D,N){N===void 0&&(N=D.length);const P=N-this.blockSize,H=this.C;let U=this.h,q=0;for(;q<N;){if(U==0)for(;q<=P;)l(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<N;)if(H[U++]=D.charCodeAt(q++),U==this.blockSize){l(this,H),U=0;break}}else for(;q<N;)if(H[U++]=D[q++],U==this.blockSize){l(this,H),U=0;break}}this.h=U,this.o+=N},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;N=this.o*8;for(var P=D.length-8;P<D.length;++P)D[P]=N&255,N/=256;for(this.v(D),D=Array(16),N=0,P=0;P<4;++P)for(let H=0;H<32;H+=8)D[N++]=this.g[P]>>>H&255;return D};function h(D,N){var P=y;return Object.prototype.hasOwnProperty.call(P,D)?P[D]:P[D]=N(D)}function m(D,N){this.h=N;const P=[];let H=!0;for(let U=D.length-1;U>=0;U--){const q=D[U]|0;H&&q==N||(P[U]=q,H=!1)}this.g=P}var y={};function v(D){return-128<=D&&D<128?h(D,function(N){return new m([N|0],N<0?-1:0)}):new m([D|0],D<0?-1:0)}function T(D){if(isNaN(D)||!isFinite(D))return C;if(D<0)return Q(T(-D));const N=[];let P=1;for(let H=0;D>=P;H++)N[H]=D/P|0,P*=4294967296;return new m(N,0)}function A(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return Q(A(D.substring(1),N));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=T(Math.pow(N,8));let H=C;for(let q=0;q<D.length;q+=8){var U=Math.min(8,D.length-q);const k=parseInt(D.substring(q,q+U),N);U<8?(U=T(Math.pow(N,U)),H=H.j(U).add(T(k))):(H=H.j(P),H=H.add(T(k)))}return H}var C=v(0),O=v(1),j=v(16777216);r=m.prototype,r.m=function(){if(W(this))return-Q(this).m();let D=0,N=1;for(let P=0;P<this.g.length;P++){const H=this.i(P);D+=(H>=0?H:4294967296+H)*N,N*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(J(this))return"0";if(W(this))return"-"+Q(this).toString(D);const N=T(Math.pow(D,6));var P=this;let H="";for(;;){const U=xt(P,N).g;P=at(P,U.j(N));let q=((P.g.length>0?P.g[0]:P.h)>>>0).toString(D);if(P=U,J(P))return q+H;for(;q.length<6;)q="0"+q;H=q+H}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function J(D){if(D.h!=0)return!1;for(let N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function W(D){return D.h==-1}r.l=function(D){return D=at(this,D),W(D)?-1:J(D)?0:1};function Q(D){const N=D.g.length,P=[];for(let H=0;H<N;H++)P[H]=~D.g[H];return new m(P,~D.h).add(O)}r.abs=function(){return W(this)?Q(this):this},r.add=function(D){const N=Math.max(this.g.length,D.g.length),P=[];let H=0;for(let U=0;U<=N;U++){let q=H+(this.i(U)&65535)+(D.i(U)&65535),k=(q>>>16)+(this.i(U)>>>16)+(D.i(U)>>>16);H=k>>>16,q&=65535,k&=65535,P[U]=k<<16|q}return new m(P,P[P.length-1]&-2147483648?-1:0)};function at(D,N){return D.add(Q(N))}r.j=function(D){if(J(this)||J(D))return C;if(W(this))return W(D)?Q(this).j(Q(D)):Q(Q(this).j(D));if(W(D))return Q(this.j(Q(D)));if(this.l(j)<0&&D.l(j)<0)return T(this.m()*D.m());const N=this.g.length+D.g.length,P=[];for(var H=0;H<2*N;H++)P[H]=0;for(H=0;H<this.g.length;H++)for(let U=0;U<D.g.length;U++){const q=this.i(H)>>>16,k=this.i(H)&65535,oe=D.i(U)>>>16,Je=D.i(U)&65535;P[2*H+2*U]+=k*Je,ut(P,2*H+2*U),P[2*H+2*U+1]+=q*Je,ut(P,2*H+2*U+1),P[2*H+2*U+1]+=k*oe,ut(P,2*H+2*U+1),P[2*H+2*U+2]+=q*oe,ut(P,2*H+2*U+2)}for(D=0;D<N;D++)P[D]=P[2*D+1]<<16|P[2*D];for(D=N;D<2*N;D++)P[D]=0;return new m(P,0)};function ut(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function ft(D,N){this.g=D,this.h=N}function xt(D,N){if(J(N))throw Error("division by zero");if(J(D))return new ft(C,C);if(W(D))return N=xt(Q(D),N),new ft(Q(N.g),Q(N.h));if(W(N))return N=xt(D,Q(N)),new ft(Q(N.g),N.h);if(D.g.length>30){if(W(D)||W(N))throw Error("slowDivide_ only works with positive integers.");for(var P=O,H=N;H.l(D)<=0;)P=kt(P),H=kt(H);var U=Dt(P,1),q=Dt(H,1);for(H=Dt(H,2),P=Dt(P,2);!J(H);){var k=q.add(H);k.l(D)<=0&&(U=U.add(P),q=k),H=Dt(H,1),P=Dt(P,1)}return N=at(D,U.j(N)),new ft(U,N)}for(U=C;D.l(N)>=0;){for(P=Math.max(1,Math.floor(D.m()/N.m())),H=Math.ceil(Math.log(P)/Math.LN2),H=H<=48?1:Math.pow(2,H-48),q=T(P),k=q.j(N);W(k)||k.l(D)>0;)P-=H,q=T(P),k=q.j(N);J(q)&&(q=O),U=U.add(q),D=at(D,k)}return new ft(U,D)}r.B=function(D){return xt(this,D).h},r.and=function(D){const N=Math.max(this.g.length,D.g.length),P=[];for(let H=0;H<N;H++)P[H]=this.i(H)&D.i(H);return new m(P,this.h&D.h)},r.or=function(D){const N=Math.max(this.g.length,D.g.length),P=[];for(let H=0;H<N;H++)P[H]=this.i(H)|D.i(H);return new m(P,this.h|D.h)},r.xor=function(D){const N=Math.max(this.g.length,D.g.length),P=[];for(let H=0;H<N;H++)P[H]=this.i(H)^D.i(H);return new m(P,this.h^D.h)};function kt(D){const N=D.g.length+1,P=[];for(let H=0;H<N;H++)P[H]=D.i(H)<<1|D.i(H-1)>>>31;return new m(P,D.h)}function Dt(D,N){const P=N>>5;N%=32;const H=D.g.length-P,U=[];for(let q=0;q<H;q++)U[q]=N>0?D.i(q+P)>>>N|D.i(q+P+1)<<32-N:D.i(q+P);return new m(U,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,lw=s,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=T,m.fromString=A,qa=m}).apply(typeof KT<"u"?KT:typeof self<"u"?self:typeof window<"u"?window:{});var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uw,cc,cw,pf,xp,hw,fw,dw;(function(){var r,t=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof ef=="object"&&ef];for(var E=0;E<f.length;++E){var S=f[E];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=n(this);function l(f,E){if(E)t:{var S=s;f=f.split(".");for(var x=0;x<f.length-1;x++){var Y=f[x];if(!(Y in S))break t;S=S[Y]}f=f[f.length-1],x=S[f],E=E(x),E!=x&&E!=null&&t(S,f,{configurable:!0,writable:!0,value:E})}}l("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(f){return f||function(E){var S=[],x;for(x in E)Object.prototype.hasOwnProperty.call(E,x)&&S.push([x,E[x]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function y(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function v(f,E,S){return f.call.apply(f.bind,arguments)}function T(f,E,S){return T=v,T.apply(null,arguments)}function A(f,E){var S=Array.prototype.slice.call(arguments,1);return function(){var x=S.slice();return x.push.apply(x,arguments),f.apply(this,x)}}function C(f,E){function S(){}S.prototype=E.prototype,f.Z=E.prototype,f.prototype=new S,f.prototype.constructor=f,f.Ob=function(x,Y,nt){for(var yt=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)yt[zt-2]=arguments[zt];return E.prototype[Y].apply(x,yt)}}var O=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function j(f){const E=f.length;if(E>0){const S=Array(E);for(let x=0;x<E;x++)S[x]=f[x];return S}return[]}function J(f,E){for(let x=1;x<arguments.length;x++){const Y=arguments[x];var S=typeof Y;if(S=S!="object"?S:Y?Array.isArray(Y)?"array":S:"null",S=="array"||S=="object"&&typeof Y.length=="number"){S=f.length||0;const nt=Y.length||0;f.length=S+nt;for(let yt=0;yt<nt;yt++)f[S+yt]=Y[yt]}else f.push(Y)}}class W{constructor(E,S){this.i=E,this.j=S,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function Q(f){m.setTimeout(()=>{throw f},0)}function at(){var f=D;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class ut{constructor(){this.h=this.g=null}add(E,S){const x=ft.get();x.set(E,S),this.h?this.h.next=x:this.g=x,this.h=x}}var ft=new W(()=>new xt,f=>f.reset());class xt{constructor(){this.next=this.g=this.h=null}set(E,S){this.h=E,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let kt,Dt=!1,D=new ut,N=()=>{const f=Promise.resolve(void 0);kt=()=>{f.then(P)}};function P(){for(var f;f=at();){try{f.h.call(f.g)}catch(S){Q(S)}var E=ft;E.j(f),E.h<100&&(E.h++,f.next=E.g,E.g=f)}Dt=!1}function H(){this.u=this.u,this.C=this.C}H.prototype.u=!1,H.prototype.dispose=function(){this.u||(this.u=!0,this.N())},H.prototype[Symbol.dispose]=function(){this.dispose()},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const S=()=>{};m.addEventListener("test",S,E),m.removeEventListener("test",S,E)}catch{}return f})();function k(f){return/^[\s\xa0]*$/.test(f)}function oe(f,E){U.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,E)}C(oe,U),oe.prototype.init=function(f,E){const S=this.type=f.type,x=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget,E||(S=="mouseover"?E=f.fromElement:S=="mouseout"&&(E=f.toElement)),this.relatedTarget=E,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Je="closure_listenable_"+(Math.random()*1e6|0),rt=0;function vt(f,E,S,x,Y){this.listener=f,this.proxy=null,this.src=E,this.type=S,this.capture=!!x,this.ha=Y,this.key=++rt,this.da=this.fa=!1}function pt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function te(f,E,S){for(const x in f)E.call(S,f[x],x,f)}function bt(f,E){for(const S in f)E.call(void 0,f[S],S,f)}function z(f){const E={};for(const S in f)E[S]=f[S];return E}const st="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(f,E){let S,x;for(let Y=1;Y<arguments.length;Y++){x=arguments[Y];for(S in x)f[S]=x[S];for(let nt=0;nt<st.length;nt++)S=st[nt],Object.prototype.hasOwnProperty.call(x,S)&&(f[S]=x[S])}}function _t(f){this.src=f,this.g={},this.h=0}_t.prototype.add=function(f,E,S,x,Y){const nt=f.toString();f=this.g[nt],f||(f=this.g[nt]=[],this.h++);const yt=Et(f,E,x,Y);return yt>-1?(E=f[yt],S||(E.fa=!1)):(E=new vt(E,this.src,nt,!!x,Y),E.fa=S,f.push(E)),E};function wt(f,E){const S=E.type;if(S in f.g){var x=f.g[S],Y=Array.prototype.indexOf.call(x,E,void 0),nt;(nt=Y>=0)&&Array.prototype.splice.call(x,Y,1),nt&&(pt(E),f.g[S].length==0&&(delete f.g[S],f.h--))}}function Et(f,E,S,x){for(let Y=0;Y<f.length;++Y){const nt=f[Y];if(!nt.da&&nt.listener==E&&nt.capture==!!S&&nt.ha==x)return Y}return-1}var Ht="closure_lm_"+(Math.random()*1e6|0),we={};function Re(f,E,S,x,Y){if(Array.isArray(E)){for(let nt=0;nt<E.length;nt++)Re(f,E[nt],S,x,Y);return null}return S=Pr(S),f&&f[Je]?f.J(E,S,y(x)?!!x.capture:!1,Y):ur(f,E,S,!1,x,Y)}function ur(f,E,S,x,Y,nt){if(!E)throw Error("Invalid event type");const yt=y(Y)?!!Y.capture:!!Y;let zt=Nr(f);if(zt||(f[Ht]=zt=new _t(f)),S=zt.add(E,S,x,yt,nt),S.proxy)return S;if(x=Or(),S.proxy=x,x.src=f,x.listener=S,f.addEventListener)q||(Y=yt),Y===void 0&&(Y=!1),f.addEventListener(E.toString(),x,Y);else if(f.attachEvent)f.attachEvent(Bi(E.toString()),x);else if(f.addListener&&f.removeListener)f.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Or(){function f(S){return E.call(f.src,f.listener,S)}const E=Qs;return f}function zi(f,E,S,x,Y){if(Array.isArray(E))for(var nt=0;nt<E.length;nt++)zi(f,E[nt],S,x,Y);else x=y(x)?!!x.capture:!!x,S=Pr(S),f&&f[Je]?(f=f.i,nt=String(E).toString(),nt in f.g&&(E=f.g[nt],S=Et(E,S,x,Y),S>-1&&(pt(E[S]),Array.prototype.splice.call(E,S,1),E.length==0&&(delete f.g[nt],f.h--)))):f&&(f=Nr(f))&&(E=f.g[E.toString()],f=-1,E&&(f=Et(E,S,x,Y)),(S=f>-1?E[f]:null)&&Lr(S))}function Lr(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[Je])wt(E.i,f);else{var S=f.type,x=f.proxy;E.removeEventListener?E.removeEventListener(S,x,f.capture):E.detachEvent?E.detachEvent(Bi(S),x):E.addListener&&E.removeListener&&E.removeListener(x),(S=Nr(E))?(wt(S,f),S.h==0&&(S.src=null,E[Ht]=null)):pt(f)}}}function Bi(f){return f in we?we[f]:we[f]="on"+f}function Qs(f,E){if(f.da)f=!0;else{E=new oe(E,this);const S=f.listener,x=f.ha||f.src;f.fa&&Lr(f),f=S.call(x,E)}return f}function Nr(f){return f=f[Ht],f instanceof _t?f:null}var fs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pr(f){return typeof f=="function"?f:(f[fs]||(f[fs]=function(E){return f.handleEvent(E)}),f[fs])}function Fe(){H.call(this),this.i=new _t(this),this.M=this,this.G=null}C(Fe,H),Fe.prototype[Je]=!0,Fe.prototype.removeEventListener=function(f,E,S,x){zi(this,f,E,S,x)};function Ge(f,E){var S,x=f.G;if(x)for(S=[];x;x=x.G)S.push(x);if(f=f.M,x=E.type||E,typeof E=="string")E=new U(E,f);else if(E instanceof U)E.target=E.target||f;else{var Y=E;E=new U(x,f),gt(E,Y)}Y=!0;let nt,yt;if(S)for(yt=S.length-1;yt>=0;yt--)nt=E.g=S[yt],Y=ji(nt,x,!0,E)&&Y;if(nt=E.g=f,Y=ji(nt,x,!0,E)&&Y,Y=ji(nt,x,!1,E)&&Y,S)for(yt=0;yt<S.length;yt++)nt=E.g=S[yt],Y=ji(nt,x,!1,E)&&Y}Fe.prototype.N=function(){if(Fe.Z.N.call(this),this.i){var f=this.i;for(const E in f.g){const S=f.g[E];for(let x=0;x<S.length;x++)pt(S[x]);delete f.g[E],f.h--}}this.G=null},Fe.prototype.J=function(f,E,S,x){return this.i.add(String(f),E,!1,S,x)},Fe.prototype.K=function(f,E,S,x){return this.i.add(String(f),E,!0,S,x)};function ji(f,E,S,x){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();let Y=!0;for(let nt=0;nt<E.length;++nt){const yt=E[nt];if(yt&&!yt.da&&yt.capture==S){const zt=yt.listener,le=yt.ha||yt.src;yt.fa&&wt(f.i,yt),Y=zt.call(le,x)!==!1&&Y}}return Y&&!x.defaultPrevented}function ol(f,E){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=T(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:m.setTimeout(f,E||0)}function no(f){f.g=ol(()=>{f.g=null,f.i&&(f.i=!1,no(f))},f.l);const E=f.h;f.h=null,f.m.apply(null,E)}class Cn extends H{constructor(E,S){super(),this.m=E,this.l=S,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:no(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ds(f){H.call(this),this.h=f,this.g={}}C(ds,H);var ms=[];function $s(f){te(f.g,function(E,S){this.g.hasOwnProperty(S)&&Lr(E)},f),f.g={}}ds.prototype.N=function(){ds.Z.N.call(this),$s(this)},ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cr=m.JSON.stringify,Eu=m.JSON.parse,io=class{stringify(f){return m.JSON.stringify(f,void 0)}parse(f){return m.JSON.parse(f,void 0)}};function ro(){}function ll(){}var Jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tn(){U.call(this,"d")}C(tn,U);function Gn(){U.call(this,"c")}C(Gn,U);var Ve={},Mr=null;function Xs(){return Mr=Mr||new Fe}Ve.Ia="serverreachability";function ul(f){U.call(this,Ve.Ia,f)}C(ul,U);function vi(f){const E=Xs();Ge(E,new ul(E))}Ve.STAT_EVENT="statevent";function Dr(f,E){U.call(this,Ve.STAT_EVENT,f),this.stat=E}C(Dr,U);function Ue(f){const E=Xs();Ge(E,new Dr(E,f))}Ve.Ja="timingevent";function Hi(f,E){U.call(this,Ve.Ja,f),this.size=E}C(Hi,U);function qi(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){f()},E)}function Ti(){this.g=!0}Ti.prototype.ua=function(){this.g=!1};function wu(f,E,S,x,Y,nt){f.info(function(){if(f.g)if(nt){var yt="",zt=nt.split("&");for(let ue=0;ue<zt.length;ue++){var le=zt[ue].split("=");if(le.length>1){const Ie=le[0];le=le[1];const oi=Ie.split("_");yt=oi.length>=2&&oi[1]=="type"?yt+(Ie+"="+le+"&"):yt+(Ie+"=redacted&")}}}else yt=null;else yt=nt;return"XMLHTTP REQ ("+x+") [attempt "+Y+"]: "+E+`
`+S+`
`+yt})}function cl(f,E,S,x,Y,nt,yt){f.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+Y+"]: "+E+`
`+S+`
`+nt+" "+yt})}function Fi(f,E,S,x){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+bu(f,S)+(x?" "+x:"")})}function hr(f,E){f.info(function(){return"TIMEOUT: "+E})}Ti.prototype.info=function(){};function bu(f,E){if(!f.g)return E;if(!E)return null;try{const nt=JSON.parse(E);if(nt){for(f=0;f<nt.length;f++)if(Array.isArray(nt[f])){var S=nt[f];if(!(S.length<2)){var x=S[1];if(Array.isArray(x)&&!(x.length<1)){var Y=x[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let yt=1;yt<x.length;yt++)x[yt]=""}}}}return cr(nt)}catch{return E}}var ps={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},so={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ao;function yn(){}C(yn,ro),yn.prototype.g=function(){return new XMLHttpRequest},ao=new yn;function Ct(f){return encodeURIComponent(String(f))}function oo(f){var E=1;f=f.split(":");const S=[];for(;E>0&&f.length;)S.push(f.shift()),E--;return f.length&&S.push(f.join(":")),S}function ti(f,E,S,x){this.j=f,this.i=E,this.l=S,this.S=x||1,this.V=new ds(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}var ze={},Ze={};function Ei(f,E,S){f.M=1,f.A=ye(Ne(E)),f.u=S,f.R=!0,wi(f,null)}function wi(f,E){f.F=Date.now(),Gi(f),f.B=Ne(f.A);var S=f.B,x=f.S;Array.isArray(x)||(x=[String(x)]),Vr(S.i,"t",x),f.C=0,S=f.j.L,f.h=new ei,f.g=po(f.j,S?E:null,!f.u),f.P>0&&(f.O=new Cn(T(f.Y,f,f.g),f.P)),E=f.V,S=f.g,x=f.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(ms[0]=Y.toString()),Y=ms);for(let nt=0;nt<Y.length;nt++){const yt=Re(S,Y[nt],x||E.handleEvent,!1,E.h||E);if(!yt)break;E.g[yt.key]=yt}E=f.J?z(f.J):{},f.u?(f.v||(f.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,E)):(f.v="GET",f.g.ea(f.B,f.v,null,E)),vi(),wu(f.i,f.v,f.B,f.l,f.S,f.u)}ti.prototype.ba=function(f){f=f.target;const E=this.O;E&&Ri(f)==3?E.j():this.Y(f)},ti.prototype.Y=function(f){try{if(f==this.g)t:{const zt=Ri(this.g),le=this.g.ya(),ue=this.g.ca();if(!(zt<3)&&(zt!=3||this.g&&(this.h.h||this.g.la()||an(this.g)))){this.K||zt!=4||le==7||(le==8||ue<=0?vi(3):vi(2)),bi(this);var E=this.g.ca();this.X=E;var S=hl(this);if(this.o=E==200,cl(this.i,this.v,this.B,this.l,this.S,zt,E),this.o){if(this.U&&!this.L){e:{if(this.g){var x,Y=this.g;if((x=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(x)){var nt=x;break e}}nt=null}if(f=nt)Fi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zi(this,f);else{this.o=!1,this.m=3,Ue(12),vn(this),ni(this);break t}}if(this.R){f=!0;let Ie;for(;!this.K&&this.C<S.length;)if(Ie=dl(this,S),Ie==Ze){zt==4&&(this.m=4,Ue(14),f=!1),Fi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ie==ze){this.m=4,Ue(15),Fi(this.i,this.l,S,"[Invalid Chunk]"),f=!1;break}else Fi(this.i,this.l,Ie,null),Zi(this,Ie);if(fl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||S.length!=0||this.h.h||(this.m=1,Ue(16),f=!1),this.o=this.o&&f,!f)Fi(this.i,this.l,S,"[Invalid Chunked Response]"),vn(this),ni(this);else if(S.length>0&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.aa&&!yt.P&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),fo(yt),yt.P=!0,Ue(11))}}else Fi(this.i,this.l,S,null),Zi(this,S);zt==4&&vn(this),this.o&&!this.K&&(zt==4?Yn(this.j,this):(this.o=!1,Gi(this)))}else Ci(this.g),E==400&&S.indexOf("Unknown SID")>0?(this.m=3,Ue(12)):(this.m=0,Ue(13)),vn(this),ni(this)}}}catch{}finally{}};function hl(f){if(!fl(f))return f.g.la();const E=an(f.g);if(E==="")return"";let S="";const x=E.length,Y=Ri(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return vn(f),ni(f),"";f.h.i=new m.TextDecoder}for(let nt=0;nt<x;nt++)f.h.h=!0,S+=f.h.i.decode(E[nt],{stream:!(Y&&nt==x-1)});return E.length=0,f.h.g+=S,f.C=0,f.h.g}function fl(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function dl(f,E){var S=f.C,x=E.indexOf(`
`,S);return x==-1?Ze:(S=Number(E.substring(S,x)),isNaN(S)?ze:(x+=1,x+S>E.length?Ze:(E=E.slice(x,x+S),f.C=x+S,E)))}ti.prototype.cancel=function(){this.K=!0,vn(this)};function Gi(f){f.T=Date.now()+f.H,Ws(f,f.H)}function Ws(f,E){if(f.D!=null)throw Error("WatchDog timer not null");f.D=qi(T(f.aa,f),E)}function bi(f){f.D&&(m.clearTimeout(f.D),f.D=null)}ti.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(hr(this.i,this.B),this.M!=2&&(vi(),Ue(17)),vn(this),this.m=2,ni(this)):Ws(this,this.T-f)};function ni(f){f.j.I==0||f.K||Yn(f.j,f)}function vn(f){bi(f);var E=f.O;E&&typeof E.dispose=="function"&&E.dispose(),f.O=null,$s(f.V),f.g&&(E=f.g,f.g=null,E.abort(),E.dispose())}function Zi(f,E){try{var S=f.j;if(S.I!=0&&(S.g==f||ii(S.h,f))){if(!f.L&&ii(S.h,f)&&S.I==3){try{var x=S.Ba.g.parse(E)}catch{x=null}if(Array.isArray(x)&&x.length==3){var Y=x;if(Y[0]==0){t:if(!S.v){if(S.g)if(S.g.F+3e3<f.F)sa(S),jr(S);else break t;Es(S),Ue(18)}}else S.xa=Y[1],0<S.xa-S.K&&Y[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=qi(T(S.Va,S),6e3));Ki(S.h)<=1&&S.ta&&(S.ta=void 0)}else Ii(S,11)}else if((f.L||S.g==f)&&sa(S),!k(E))for(Y=S.Ba.g.parse(E),E=0;E<Y.length;E++){let ue=Y[E];const Ie=ue[0];if(!(Ie<=S.K))if(S.K=Ie,ue=ue[1],S.I==2)if(ue[0]=="c"){S.M=ue[1],S.ba=ue[2];const oi=ue[3];oi!=null&&(S.ka=oi,S.j.info("VER="+S.ka));const li=ue[4];li!=null&&(S.za=li,S.j.info("SVER="+S.za));const Qn=ue[5];Qn!=null&&typeof Qn=="number"&&Qn>0&&(x=1.5*Qn,S.O=x,S.j.info("backChannelRequestTimeoutMs_="+x)),x=S;const Oi=f.g;if(Oi){const ws=Oi.g?Oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ws){var nt=x.h;nt.g||ws.indexOf("spdy")==-1&&ws.indexOf("quic")==-1&&ws.indexOf("h2")==-1||(nt.j=nt.l,nt.g=new Set,nt.h&&(fr(nt,nt.h),nt.h=null))}if(x.G){const bs=Oi.g?Oi.g.getResponseHeader("X-HTTP-Session-Id"):null;bs&&(x.wa=bs,St(x.J,x.G,bs))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-f.F,S.j.info("Handshake RTT: "+S.T+"ms")),x=S;var yt=f;if(x.na=mo(x,x.L?x.ba:null,x.W),yt.L){Js(x.h,yt);var zt=yt,le=x.O;le&&(zt.H=le),zt.D&&(bi(zt),Gi(zt)),x.g=yt}else ho(x);S.i.length>0&&Vn(S)}else ue[0]!="stop"&&ue[0]!="close"||Ii(S,7);else S.I==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Ii(S,7):Yt(S):ue[0]!="noop"&&S.l&&S.l.qa(ue),S.A=0)}}vi(4)}catch{}}var Ke=class{constructor(f,E){this.g=f,this.map=E}};function lo(f){this.l=f||10,m.PerformanceNavigationTiming?(f=m.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function uo(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ki(f){return f.h?1:f.g?f.g.size:0}function ii(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function fr(f,E){f.g?f.g.add(E):f.h=E}function Js(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}lo.prototype.cancel=function(){if(this.i=ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function ta(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let E=f.i;for(const S of f.g.values())E=E.concat(S.G);return E}return j(f.i)}var kr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qt(f,E){if(f){f=f.split("&");for(let S=0;S<f.length;S++){const x=f[S].indexOf("=");let Y,nt=null;x>=0?(Y=f[S].substring(0,x),nt=f[S].substring(x+1)):Y=f[S],E(Y,nt?decodeURIComponent(nt.replace(/\+/g," ")):"")}}}function $t(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;f instanceof $t?(this.l=f.l,Pe(this,f.j),this.o=f.o,this.g=f.g,Zn(this,f.u),this.h=f.h,gs(this,vs(f.i)),this.m=f.m):f&&(E=String(f).match(kr))?(this.l=!1,Pe(this,E[1]||"",!0),this.o=ri(E[2]||""),this.g=ri(E[3]||"",!0),Zn(this,E[4]),this.h=ri(E[5]||"",!0),gs(this,E[6]||"",!0),this.m=ri(E[7]||"")):(this.l=!1,this.i=new si(null,this.l))}$t.prototype.toString=function(){const f=[];var E=this.j;E&&f.push(Yi(E,ea,!0),":");var S=this.g;return(S||E=="file")&&(f.push("//"),(E=this.o)&&f.push(Yi(E,ea,!0),"@"),f.push(Ct(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&f.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&f.push("/"),f.push(Yi(S,S.charAt(0)=="/"?Si:_s,!0))),(S=this.i.toString())&&f.push("?",S),(S=this.m)&&f.push("#",Yi(S,Qi)),f.join("")},$t.prototype.resolve=function(f){const E=Ne(this);let S=!!f.j;S?Pe(E,f.j):S=!!f.o,S?E.o=f.o:S=!!f.g,S?E.g=f.g:S=f.u!=null;var x=f.h;if(S)Zn(E,f.u);else if(S=!!f.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var Y=E.h.lastIndexOf("/");Y!=-1&&(x=E.h.slice(0,Y+1)+x)}if(Y=x,Y==".."||Y==".")x="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){x=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const nt=[];for(let yt=0;yt<Y.length;){const zt=Y[yt++];zt=="."?x&&yt==Y.length&&nt.push(""):zt==".."?((nt.length>1||nt.length==1&&nt[0]!="")&&nt.pop(),x&&yt==Y.length&&nt.push("")):(nt.push(zt),x=!0)}x=nt.join("/")}else x=Y}return S?E.h=x:S=f.i.toString()!=="",S?gs(E,vs(f.i)):S=!!f.m,S&&(E.m=f.m),E};function Ne(f){return new $t(f)}function Pe(f,E,S){f.j=S?ri(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function Zn(f,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);f.u=E}else f.u=null}function gs(f,E,S){E instanceof si?(f.i=E,Ur(f.i,f.l)):(S||(E=Yi(E,ve)),f.i=new si(E,f.l))}function St(f,E,S){f.i.set(E,S)}function ye(f){return St(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function ri(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Yi(f,E,S){return typeof f=="string"?(f=encodeURI(f).replace(E,Ce),S&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Ce(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ea=/[#\/\?@]/g,_s=/[#\?:]/g,Si=/[#\?]/g,ve=/[#\?@]/g,Qi=/#/g;function si(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function sn(f){f.g||(f.g=new Map,f.h=0,f.i&&Qt(f.i,function(E,S){f.add(decodeURIComponent(E.replace(/\+/g," ")),S)}))}r=si.prototype,r.add=function(f,E){sn(this),this.i=null,f=$i(this,f);let S=this.g.get(f);return S||this.g.set(f,S=[]),S.push(E),this.h+=1,this};function na(f,E){sn(f),E=$i(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function dr(f,E){return sn(f),E=$i(f,E),f.g.has(E)}r.forEach=function(f,E){sn(this),this.g.forEach(function(S,x){S.forEach(function(Y){f.call(E,Y,x,this)},this)},this)};function ys(f,E){sn(f);let S=[];if(typeof E=="string")dr(f,E)&&(S=S.concat(f.g.get($i(f,E))));else for(f=Array.from(f.g.values()),E=0;E<f.length;E++)S=S.concat(f[E]);return S}r.set=function(f,E){return sn(this),this.i=null,f=$i(this,f),dr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},r.get=function(f,E){return f?(f=ys(this,f),f.length>0?String(f[0]):E):E};function Vr(f,E,S){na(f,E),S.length>0&&(f.i=null,f.g.set($i(f,E),j(S)),f.h+=S.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],E=Array.from(this.g.keys());for(let x=0;x<E.length;x++){var S=E[x];const Y=Ct(S);S=ys(this,S);for(let nt=0;nt<S.length;nt++){let yt=Y;S[nt]!==""&&(yt+="="+Ct(S[nt])),f.push(yt)}}return this.i=f.join("&")};function vs(f){const E=new si;return E.i=f.i,f.g&&(E.g=new Map(f.g),E.h=f.h),E}function $i(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function Ur(f,E){E&&!f.j&&(sn(f),f.i=null,f.g.forEach(function(S,x){const Y=x.toLowerCase();x!=Y&&(na(this,x),Vr(this,Y,S))},f)),f.j=E}function Mn(f,E){const S=new Ti;if(m.Image){const x=new Image;x.onload=A(Dn,S,"TestLoadImage: loaded",!0,E,x),x.onerror=A(Dn,S,"TestLoadImage: error",!1,E,x),x.onabort=A(Dn,S,"TestLoadImage: abort",!1,E,x),x.ontimeout=A(Dn,S,"TestLoadImage: timeout",!1,E,x),m.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=f}else E(!1)}function ia(f,E){const S=new Ti,x=new AbortController,Y=setTimeout(()=>{x.abort(),Dn(S,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:x.signal}).then(nt=>{clearTimeout(Y),nt.ok?Dn(S,"TestPingServer: ok",!0,E):Dn(S,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),Dn(S,"TestPingServer: error",!1,E)})}function Dn(f,E,S,x,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),x(S)}catch{}}function zr(){this.g=new io}function Mt(f){this.i=f.Sb||null,this.h=f.ab||!1}C(Mt,ro),Mt.prototype.g=function(){return new Tn(this.i,this.h)};function Tn(f,E){Fe.call(this),this.H=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(Tn,Fe),r=Tn.prototype,r.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=E,this.readyState=1,Kn(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(E.body=f),(this.H||m).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},r.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Kn(this)),this.g&&(this.readyState=3,Kn(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;he(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function he(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}r.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?mr(this):Kn(this),this.readyState==3&&he(this)}},r.Oa=function(f){this.g&&(this.response=this.responseText=f,mr(this))},r.Na=function(f){this.g&&(this.response=f,mr(this))},r.ga=function(){this.g&&mr(this)};function mr(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Kn(f)}r.setRequestHeader=function(f,E){this.A.append(f,E)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],E=this.h.entries();for(var S=E.next();!S.done;)S=S.value,f.push(S[0]+": "+S[1]),S=E.next();return f.join(`\r
`)};function Kn(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function kn(f){let E="";return te(f,function(S,x){E+=x,E+=":",E+=S,E+=`\r
`}),E}function pr(f,E,S){t:{for(x in S){var x=!1;break t}x=!0}x||(S=kn(S),typeof f=="string"?S!=null&&Ct(S):St(f,E,S))}function ee(f){Fe.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(ee,Fe);var ai=/^https?$/i,gr=["POST","PUT"];r=ee.prototype,r.Fa=function(f){this.H=f},r.ea=function(f,E,S,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ao.g(),this.g.onreadystatechange=O(T(this.Ca,this));try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(nt){Me(this,nt);return}if(f=S||"",S=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var Y in x)S.set(Y,x[Y]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const nt of x.keys())S.set(nt,x.get(nt));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(S.keys()).find(nt=>nt.toLowerCase()=="content-type"),Y=m.FormData&&f instanceof m.FormData,!(Array.prototype.indexOf.call(gr,E,void 0)>=0)||x||Y||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[nt,yt]of S)this.g.setRequestHeader(nt,yt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(nt){Me(this,nt)}};function Me(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.o=5,Ai(f),Xi(f)}function Ai(f){f.A||(f.A=!0,Ge(f,"complete"),Ge(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Ge(this,"complete"),Ge(this,"abort"),Xi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),ee.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Br(this):this.Xa())},r.Xa=function(){Br(this)};function Br(f){if(f.h&&typeof h<"u"){if(f.v&&Ri(f)==4)setTimeout(f.Ca.bind(f),0);else if(Ge(f,"readystatechange"),Ri(f)==4){f.h=!1;try{const nt=f.ca();t:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break t;default:E=!1}var S;if(!(S=E)){var x;if(x=nt===0){let yt=String(f.D).match(kr)[1]||null;!yt&&m.self&&m.self.location&&(yt=m.self.location.protocol.slice(0,-1)),x=!ai.test(yt?yt.toLowerCase():"")}S=x}if(S)Ge(f,"complete"),Ge(f,"success");else{f.o=6;try{var Y=Ri(f)>2?f.g.statusText:""}catch{Y=""}f.l=Y+" ["+f.ca()+"]",Ai(f)}}finally{Xi(f)}}}}function Xi(f,E){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const S=f.g;f.g=null,E||Ge(f,"ready");try{S.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Ri(f){return f.g?f.g.readyState:0}r.ca=function(){try{return Ri(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),Eu(E)}};function an(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Ci(f){const E={};f=(f.g&&Ri(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<f.length;x++){if(k(f[x]))continue;var S=oo(f[x]);const Y=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const nt=E[Y]||[];E[Y]=nt,nt.push(S)}bt(E,function(x){return x.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wi(f,E,S){return S&&S.internalChannelParams&&S.internalChannelParams[f]||E}function _r(f){this.za=0,this.i=[],this.j=new Ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wi("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wi("baseRetryDelayMs",5e3,f),this.Za=Wi("retryDelaySeedMs",1e4,f),this.Ta=Wi("forwardChannelMaxRetries",2,f),this.va=Wi("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new lo(f&&f.concurrentRequestLimit),this.Ba=new zr,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=_r.prototype,r.ka=8,r.I=1,r.connect=function(f,E,S,x){Ue(0),this.W=f,this.H=E||{},S&&x!==void 0&&(this.H.OSID=S,this.H.OAID=x),this.F=this.X,this.J=mo(this,null,this.W),Vn(this)};function Yt(f){if(En(f),f.I==3){var E=f.V++,S=Ne(f.J);if(St(S,"SID",f.M),St(S,"RID",E),St(S,"TYPE","terminate"),yr(f,S),E=new ti(f,f.j,E),E.M=2,E.A=ye(Ne(S)),S=!1,m.navigator&&m.navigator.sendBeacon)try{S=m.navigator.sendBeacon(E.A.toString(),"")}catch{}!S&&m.Image&&(new Image().src=E.A,S=!0),S||(E.g=po(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Gi(E)}xi(f)}function jr(f){f.g&&(fo(f),f.g.cancel(),f.g=null)}function En(f){jr(f),f.v&&(m.clearTimeout(f.v),f.v=null),sa(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&m.clearTimeout(f.m),f.m=null)}function Vn(f){if(!uo(f.h)&&!f.m){f.m=!0;var E=f.Ea;kt||N(),Dt||(kt(),Dt=!0),D.add(E,f),f.D=0}}function Ts(f,E){return Ki(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=E.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=qi(T(f.Ea,f,E),pl(f,f.D)),f.D++,!0)}r.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Y=new ti(this,this.j,f);let nt=this.o;if(this.U&&(nt?(nt=z(nt),gt(nt,this.U)):nt=this.U),this.u!==null||this.R||(Y.J=nt,nt=null),this.S)t:{for(var E=0,S=0;S<this.i.length;S++){e:{var x=this.i[S];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break e}x=void 0}if(x===void 0)break;if(E+=x,E>4096){E=S;break t}if(E===4096||S===this.i.length-1){E=S+1;break t}}E=1e3}else E=1e3;E=ml(this,Y,E),S=Ne(this.J),St(S,"RID",f),St(S,"CVER",22),this.G&&St(S,"X-HTTP-Session-Id",this.G),yr(this,S),nt&&(this.R?E="headers="+Ct(kn(nt))+"&"+E:this.u&&pr(S,this.u,nt)),fr(this.h,Y),this.Ra&&St(S,"TYPE","init"),this.S?(St(S,"$req",E),St(S,"SID","null"),Y.U=!0,Ei(Y,S,null)):Ei(Y,S,E),this.I=2}}else this.I==3&&(f?co(this,f):this.i.length==0||uo(this.h)||co(this))};function co(f,E){var S;E?S=E.l:S=f.V++;const x=Ne(f.J);St(x,"SID",f.M),St(x,"RID",S),St(x,"AID",f.K),yr(f,x),f.u&&f.o&&pr(x,f.u,f.o),S=new ti(f,f.j,S,f.D+1),f.u===null&&(S.J=f.o),E&&(f.i=E.G.concat(f.i)),E=ml(f,S,1e3),S.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),fr(f.h,S),Ei(S,x,E)}function yr(f,E){f.H&&te(f.H,function(S,x){St(E,x,S)}),f.l&&te({},function(S,x){St(E,x,S)})}function ml(f,E,S){S=Math.min(f.i.length,S);const x=f.l?T(f.l.Ka,f.l,f):null;t:{var Y=f.i;let zt=-1;for(;;){const le=["count="+S];zt==-1?S>0?(zt=Y[0].g,le.push("ofs="+zt)):zt=0:le.push("ofs="+zt);let ue=!0;for(let Ie=0;Ie<S;Ie++){var nt=Y[Ie].g;const oi=Y[Ie].map;if(nt-=zt,nt<0)zt=Math.max(0,Y[Ie].g-100),ue=!1;else try{nt="req"+nt+"_"||"";try{var yt=oi instanceof Map?oi:Object.entries(oi);for(const[li,Qn]of yt){let Oi=Qn;y(Qn)&&(Oi=cr(Qn)),le.push(nt+li+"="+encodeURIComponent(Oi))}}catch(li){throw le.push(nt+"type="+encodeURIComponent("_badmap")),li}}catch{x&&x(oi)}}if(ue){yt=le.join("&");break t}}yt=void 0}return f=f.i.splice(0,S),E.G=f,yt}function ho(f){if(!f.g&&!f.v){f.Y=1;var E=f.Da;kt||N(),Dt||(kt(),Dt=!0),D.add(E,f),f.A=0}}function Es(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=qi(T(f.Da,f),pl(f,f.A)),f.A++,!0)}r.Da=function(){if(this.v=null,ra(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=qi(T(this.Wa,this),f)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ue(10),jr(this),ra(this))};function fo(f){f.B!=null&&(m.clearTimeout(f.B),f.B=null)}function ra(f){f.g=new ti(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var E=Ne(f.na);St(E,"RID","rpc"),St(E,"SID",f.M),St(E,"AID",f.K),St(E,"CI",f.F?"0":"1"),!f.F&&f.ia&&St(E,"TO",f.ia),St(E,"TYPE","xmlhttp"),yr(f,E),f.u&&f.o&&pr(E,f.u,f.o),f.O&&(f.g.H=f.O);var S=f.g;f=f.ba,S.M=1,S.A=ye(Ne(E)),S.u=null,S.R=!0,wi(S,f)}r.Va=function(){this.C!=null&&(this.C=null,jr(this),Es(this),Ue(19))};function sa(f){f.C!=null&&(m.clearTimeout(f.C),f.C=null)}function Yn(f,E){var S=null;if(f.g==E){sa(f),fo(f),f.g=null;var x=2}else if(ii(f.h,E))S=E.G,Js(f.h,E),x=1;else return;if(f.I!=0){if(E.o)if(x==1){S=E.u?E.u.length:0,E=Date.now()-E.F;var Y=f.D;x=Xs(),Ge(x,new Hi(x,S)),Vn(f)}else ho(f);else if(Y=E.m,Y==3||Y==0&&E.X>0||!(x==1&&Ts(f,E)||x==2&&Es(f)))switch(S&&S.length>0&&(E=f.h,E.i=E.i.concat(S)),Y){case 1:Ii(f,5);break;case 4:Ii(f,10);break;case 3:Ii(f,6);break;default:Ii(f,2)}}}function pl(f,E){let S=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(S*=2),S*E}function Ii(f,E){if(f.j.info("Error code "+E),E==2){var S=T(f.bb,f),x=f.Ua;const Y=!x;x=new $t(x||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Pe(x,"https"),ye(x),Y?Mn(x.toString(),S):ia(x.toString(),S)}else Ue(2);f.I=0,f.l&&f.l.pa(E),xi(f),En(f)}r.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Ue(2)):(this.j.info("Failed to ping google.com"),Ue(1))};function xi(f){if(f.I=0,f.ja=[],f.l){const E=ta(f.h);(E.length!=0||f.i.length!=0)&&(J(f.ja,E),J(f.ja,f.i),f.h.i.length=0,j(f.i),f.i.length=0),f.l.oa()}}function mo(f,E,S){var x=S instanceof $t?Ne(S):new $t(S);if(x.g!="")E&&(x.g=E+"."+x.g),Zn(x,x.u);else{var Y=m.location;x=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;const nt=new $t(null);x&&Pe(nt,x),E&&(nt.g=E),Y&&Zn(nt,Y),S&&(nt.h=S),x=nt}return S=f.G,E=f.wa,S&&E&&St(x,S,E),St(x,"VER",f.ka),yr(f,x),x}function po(f,E,S){if(E&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Aa&&!f.ma?new ee(new Mt({ab:S})):new ee(f.ma),E.Fa(f.L),E}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function aa(){}r=aa.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Hr(){}Hr.prototype.g=function(f,E){return new wn(f,E)};function wn(f,E){Fe.call(this),this.g=new _r(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(f?f["X-WebChannel-Client-Profile"]=E.sa:f={"X-WebChannel-Client-Profile":E.sa}),this.g.U=f,(f=E&&E.Qb)&&!k(f)&&(this.g.u=f),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!k(E)&&(this.g.G=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new vr(this)}C(wn,Fe),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){Yt(this.g)},wn.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var S={};S.__data__=f,f=S}else this.v&&(S={},S.__data__=cr(f),f=S);E.i.push(new Ke(E.Ya++,f)),E.I==3&&Vn(E)},wn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,wn.Z.N.call(this)};function go(f){tn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){t:{for(const S in E){f=S;break t}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}C(go,tn);function gl(){Gn.call(this),this.status=1}C(gl,Gn);function vr(f){this.g=f}C(vr,aa),vr.prototype.ra=function(){Ge(this.g,"a")},vr.prototype.qa=function(f){Ge(this.g,new go(f))},vr.prototype.pa=function(f){Ge(this.g,new gl)},vr.prototype.oa=function(){Ge(this.g,"b")},Hr.prototype.createWebChannel=Hr.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,dw=function(){return new Hr},fw=function(){return Xs()},hw=Ve,xp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ps.NO_ERROR=0,ps.TIMEOUT=8,ps.HTTP_ERROR=6,pf=ps,so.COMPLETE="complete",cw=so,ll.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",Fe.prototype.listen=Fe.prototype.J,cc=ll,ee.prototype.listenOnce=ee.prototype.K,ee.prototype.getLastError=ee.prototype.Ha,ee.prototype.getLastErrorCode=ee.prototype.ya,ee.prototype.getStatus=ee.prototype.ca,ee.prototype.getResponseJson=ee.prototype.La,ee.prototype.getResponseText=ee.prototype.la,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Fa,uw=ee}).apply(typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{});const YT="@firebase/firestore",QT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Hn.UNAUTHENTICATED=new Hn(null),Hn.GOOGLE_CREDENTIALS=new Hn("google-credentials-uid"),Hn.FIRST_PARTY=new Hn("first-party-uid"),Hn.MOCK_USER=new Hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new ig("@firebase/firestore");function $l(){return Wo.logLevel}function Rt(r,...t){if(Wo.logLevel<=re.DEBUG){const n=t.map(gg);Wo.debug(`Firestore (${gu}): ${r}`,...n)}}function Zs(r,...t){if(Wo.logLevel<=re.ERROR){const n=t.map(gg);Wo.error(`Firestore (${gu}): ${r}`,...n)}}function au(r,...t){if(Wo.logLevel<=re.WARN){const n=t.map(gg);Wo.warn(`Firestore (${gu}): ${r}`,...n)}}function gg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,mw(r,s,n)}function mw(r,t,n){let s=`FIRESTORE (${gu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Zs(s),new Error(s)}function _e(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||mw(t,l,s)}function Ft(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class At extends hs{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class zx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Hn.UNAUTHENTICATED)))}shutdown(){}}class Bx{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class jx{constructor(t){this.t=t,this.currentUser=Hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){_e(this.o===void 0,42304);let s=this.i;const l=v=>this.i!==s?(s=this.i,n(v)):Promise.resolve();let h=new Go;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Go,t.enqueueRetryable((()=>l(this.currentUser)))};const m=()=>{const v=h;t.enqueueRetryable((async()=>{await v.promise,await l(this.currentUser)}))},y=v=>{Rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((v=>y(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?y(v):(Rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Go)}}),0),m()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(Rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(_e(typeof s.accessToken=="string",31837,{l:s}),new pw(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _e(t===null||typeof t=="string",2055,{h:t}),new Hn(t)}}class Hx{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qx{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new Hx(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $T{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fx{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,or(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){_e(this.o===void 0,3512);const s=h=>{h.error!=null&&Rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const m=h.token!==this.m;return this.m=h.token,Rt("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?n(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable((()=>s(h)))};const l=h=>{Rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>l(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?l(h):Rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $T(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $T(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=Gx(40);for(let h=0;h<l.length;++h)s.length<20&&l[h]<n&&(s+=t.charAt(l[h]%62))}return s}}function se(r,t){return r<t?-1:r>t?1:0}function Op(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),h=t.charAt(s);if(l!==h)return fp(l)===fp(h)?se(l,h):fp(l)?1:-1}return se(r.length,t.length)}const Zx=55296,Kx=57343;function fp(r){const t=r.charCodeAt(0);return t>=Zx&&t<=Kx}function ou(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="__name__";class Jr{constructor(t,n,s){n===void 0?n=0:n>t.length&&Ut(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Ut(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return Jr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Jr?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const h=Jr.compareSegments(t.get(l),n.get(l));if(h!==0)return h}return se(t.length,n.length)}static compareSegments(t,n){const s=Jr.isNumericId(t),l=Jr.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?Jr.extractNumericId(t).compare(Jr.extractNumericId(n)):Op(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return qa.fromString(t.substring(4,t.length-2))}}class Oe extends Jr{construct(t,n,s){return new Oe(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new At(dt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new Oe(n)}static emptyPath(){return new Oe([])}}const Yx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends Jr{construct(t,n,s){return new Nn(t,n,s)}static isValidIdentifier(t){return Yx.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===XT}static keyField(){return new Nn([XT])}static fromServerFormat(t){const n=[];let s="",l=0;const h=()=>{if(s.length===0)throw new At(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let m=!1;for(;l<t.length;){const y=t[l];if(y==="\\"){if(l+1===t.length)throw new At(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const v=t[l+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new At(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=v,l+=2}else y==="`"?(m=!m,l++):y!=="."||m?(s+=y,l++):(h(),l++)}if(h(),m)throw new At(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Nn(n)}static emptyPath(){return new Nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t){this.path=t}static fromPath(t){return new Pt(Oe.fromString(t))}static fromName(t){return new Pt(Oe.fromString(t).popFirst(5))}static empty(){return new Pt(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Oe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Oe.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Pt(new Oe(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(r,t,n){if(!n)throw new At(dt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function Qx(r,t,n,s){if(t===!0&&s===!0)throw new At(dt.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function WT(r){if(!Pt.isDocumentKey(r))throw new At(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function JT(r){if(Pt.isDocumentKey(r))throw new At(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function _w(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Qf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Ut(12329,{type:typeof r})}function Fa(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new At(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qf(r);throw new At(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(r,t){const n={typeString:r};return t&&(n.value=t),n}function jc(r,t){if(!_w(r))throw new At(dt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,h="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const m=r[s];if(l&&typeof m!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(h!==void 0&&m!==h.value){n=`Expected '${s}' field to equal '${h.value}'`;break}}if(n)throw new At(dt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=-62135596800,eE=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(t){return Le.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*eE);return new Le(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new At(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new At(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<tE)throw new At(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new At(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eE}_compareTo(t){return this.seconds===t.seconds?se(this.nanoseconds,t.nanoseconds):se(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(jc(t,Le._jsonSchema))return new Le(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-tE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:dn("string",Le._jsonSchemaVersion),seconds:dn("number"),nanoseconds:dn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{static fromTimestamp(t){return new jt(t)}static min(){return new jt(new Le(0,0))}static max(){return new jt(new Le(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=-1;function $x(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=jt.fromTimestamp(s===1e9?new Le(n+1,0):new Le(n,s));return new Ka(l,Pt.empty(),t)}function Xx(r){return new Ka(r.readTime,r.key,Ac)}class Ka{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Ka(jt.min(),Pt.empty(),Ac)}static max(){return new Ka(jt.max(),Pt.empty(),Ac)}}function Wx(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=Pt.comparator(r.documentKey,t.documentKey),n!==0?n:se(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(r){if(r.code!==dt.FAILED_PRECONDITION||r.message!==Jx)throw r;Rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Ut(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new mt(((s,l)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(s,l)},this.catchCallback=h=>{this.wrapFailure(n,h).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof mt?n:mt.resolve(n)}catch(n){return mt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):mt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):mt.reject(n)}static resolve(t){return new mt(((n,s)=>{n(t)}))}static reject(t){return new mt(((n,s)=>{s(t)}))}static waitFor(t){return new mt(((n,s)=>{let l=0,h=0,m=!1;t.forEach((y=>{++l,y.next((()=>{++h,m&&h===l&&n()}),(v=>s(v)))})),m=!0,h===l&&n()}))}static or(t){let n=mt.resolve(!1);for(const s of t)n=n.next((l=>l?mt.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,h)=>{s.push(n.call(this,l,h))})),this.waitFor(s)}static mapArray(t,n){return new mt(((s,l)=>{const h=t.length,m=new Array(h);let y=0;for(let v=0;v<h;v++){const T=v;n(t[T]).next((A=>{m[T]=A,++y,y===h&&s(m)}),(A=>l(A)))}}))}static doWhile(t,n){return new mt(((s,l)=>{const h=()=>{t()===!0?n().next((()=>{h()}),l):s()};h()}))}}function e2(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yu(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}$f.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=-1;function Xf(r){return r==null}function Lf(r){return r===0&&1/r==-1/0}function n2(r){return typeof r=="number"&&Number.isInteger(r)&&!Lf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="";function i2(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=nE(t)),t=r2(r.get(n),t);return nE(t)}function r2(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const h=r.charAt(l);switch(h){case"\0":n+="";break;case yw:n+="";break;default:n+=h}}return n}function nE(r){return r+yw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function to(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function vw(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(t,n){this.comparator=t,this.root=n||Ln.EMPTY}insert(t,n){return new qe(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(t){return new qe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new nf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new nf(this.root,t,this.comparator,!1)}getReverseIterator(){return new nf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new nf(this.root,t,this.comparator,!0)}}class nf{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=n?s(t.key,n):1,n&&l&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ln{constructor(t,n,s,l,h){this.key=t,this.value=n,this.color=s??Ln.RED,this.left=l??Ln.EMPTY,this.right=h??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,h){return new Ln(t??this.key,n??this.value,s??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const h=s(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,n,s),null):h===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Ln.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ut(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ut(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ut(27949);return t+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Ut(57766)}get value(){throw Ut(16141)}get color(){throw Ut(16727)}get left(){throw Ut(29726)}get right(){throw Ut(36894)}copy(t,n,s,l,h){return this}insert(t,n,s){return new Ln(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this.comparator=t,this.data=new qe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new rE(this.data.getIterator())}getIteratorFrom(t){return new rE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof _n)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,h=s.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new _n(this.comparator);return n.data=t,n}}class rE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t){this.fields=t,t.sort(Nn.comparator)}static empty(){return new Vi([])}unionWith(t){let n=new _n(Nn.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Vi(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ou(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Tw("Invalid base64 string: "+h):h}})(t);return new Pn(n)}static fromUint8Array(t){const n=(function(l){let h="";for(let m=0;m<l.length;++m)h+=String.fromCharCode(l[m]);return h})(t);return new Pn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return se(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const s2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ya(r){if(_e(!!r,39018),typeof r=="string"){let t=0;const n=s2.exec(r);if(_e(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:rn(r.seconds),nanos:rn(r.nanos)}}function rn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Qa(r){return typeof r=="string"?Pn.fromBase64String(r):Pn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="server_timestamp",ww="__type__",bw="__previous_value__",Sw="__local_write_time__";function vg(r){return(r?.mapValue?.fields||{})[ww]?.stringValue===Ew}function Wf(r){const t=r.mapValue.fields[bw];return vg(t)?Wf(t):t}function Rc(r){const t=Ya(r.mapValue.fields[Sw].timestampValue);return new Le(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t,n,s,l,h,m,y,v,T,A){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=h,this.forceLongPolling=m,this.autoDetectLongPolling=y,this.longPollingOptions=v,this.useFetchStreams=T,this.isUsingEmulator=A}}const Nf="(default)";class Cc{constructor(t,n){this.projectId=t,this.database=n||Nf}static empty(){return new Cc("","")}get isDefaultDatabase(){return this.database===Nf}isEqual(t){return t instanceof Cc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="__type__",o2="__max__",rf={mapValue:{}},Rw="__vector__",Pf="value";function $a(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?vg(r)?4:u2(r)?9007199254740991:l2(r)?10:11:Ut(28295,{value:r})}function us(r,t){if(r===t)return!0;const n=$a(r);if(n!==$a(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Rc(r).isEqual(Rc(t));case 3:return(function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const m=Ya(l.timestampValue),y=Ya(h.timestampValue);return m.seconds===y.seconds&&m.nanos===y.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,h){return Qa(l.bytesValue).isEqual(Qa(h.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,h){return rn(l.geoPointValue.latitude)===rn(h.geoPointValue.latitude)&&rn(l.geoPointValue.longitude)===rn(h.geoPointValue.longitude)})(r,t);case 2:return(function(l,h){if("integerValue"in l&&"integerValue"in h)return rn(l.integerValue)===rn(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const m=rn(l.doubleValue),y=rn(h.doubleValue);return m===y?Lf(m)===Lf(y):isNaN(m)&&isNaN(y)}return!1})(r,t);case 9:return ou(r.arrayValue.values||[],t.arrayValue.values||[],us);case 10:case 11:return(function(l,h){const m=l.mapValue.fields||{},y=h.mapValue.fields||{};if(iE(m)!==iE(y))return!1;for(const v in m)if(m.hasOwnProperty(v)&&(y[v]===void 0||!us(m[v],y[v])))return!1;return!0})(r,t);default:return Ut(52216,{left:r})}}function Ic(r,t){return(r.values||[]).find((n=>us(n,t)))!==void 0}function lu(r,t){if(r===t)return 0;const n=$a(r),s=$a(t);if(n!==s)return se(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(r.booleanValue,t.booleanValue);case 2:return(function(h,m){const y=rn(h.integerValue||h.doubleValue),v=rn(m.integerValue||m.doubleValue);return y<v?-1:y>v?1:y===v?0:isNaN(y)?isNaN(v)?0:-1:1})(r,t);case 3:return sE(r.timestampValue,t.timestampValue);case 4:return sE(Rc(r),Rc(t));case 5:return Op(r.stringValue,t.stringValue);case 6:return(function(h,m){const y=Qa(h),v=Qa(m);return y.compareTo(v)})(r.bytesValue,t.bytesValue);case 7:return(function(h,m){const y=h.split("/"),v=m.split("/");for(let T=0;T<y.length&&T<v.length;T++){const A=se(y[T],v[T]);if(A!==0)return A}return se(y.length,v.length)})(r.referenceValue,t.referenceValue);case 8:return(function(h,m){const y=se(rn(h.latitude),rn(m.latitude));return y!==0?y:se(rn(h.longitude),rn(m.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return aE(r.arrayValue,t.arrayValue);case 10:return(function(h,m){const y=h.fields||{},v=m.fields||{},T=y[Pf]?.arrayValue,A=v[Pf]?.arrayValue,C=se(T?.values?.length||0,A?.values?.length||0);return C!==0?C:aE(T,A)})(r.mapValue,t.mapValue);case 11:return(function(h,m){if(h===rf.mapValue&&m===rf.mapValue)return 0;if(h===rf.mapValue)return 1;if(m===rf.mapValue)return-1;const y=h.fields||{},v=Object.keys(y),T=m.fields||{},A=Object.keys(T);v.sort(),A.sort();for(let C=0;C<v.length&&C<A.length;++C){const O=Op(v[C],A[C]);if(O!==0)return O;const j=lu(y[v[C]],T[A[C]]);if(j!==0)return j}return se(v.length,A.length)})(r.mapValue,t.mapValue);default:throw Ut(23264,{he:n})}}function sE(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return se(r,t);const n=Ya(r),s=Ya(t),l=se(n.seconds,s.seconds);return l!==0?l:se(n.nanos,s.nanos)}function aE(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const h=lu(n[l],s[l]);if(h)return h}return se(n.length,s.length)}function uu(r){return Lp(r)}function Lp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Ya(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Qa(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Pt.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const h of n.values||[])l?l=!1:s+=",",s+=Lp(h);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",h=!0;for(const m of s)h?h=!1:l+=",",l+=`${m}:${Lp(n.fields[m])}`;return l+"}"})(r.mapValue):Ut(61005,{value:r})}function gf(r){switch($a(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Wf(r);return t?16+gf(t):16;case 5:return 2*r.stringValue.length;case 6:return Qa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,h)=>l+gf(h)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return to(s.fields,((h,m)=>{l+=h.length+gf(m)})),l})(r.mapValue);default:throw Ut(13486,{value:r})}}function oE(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Np(r){return!!r&&"integerValue"in r}function Tg(r){return!!r&&"arrayValue"in r}function lE(r){return!!r&&"nullValue"in r}function uE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function _f(r){return!!r&&"mapValue"in r}function l2(r){return(r?.mapValue?.fields||{})[Aw]?.stringValue===Rw}function _c(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return to(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=_c(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=_c(r.arrayValue.values[n]);return t}return{...r}}function u2(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===o2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t){this.value=t}static empty(){return new yi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!_f(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=_c(n)}setAll(t){let n=Nn.emptyPath(),s={},l=[];t.forEach(((m,y)=>{if(!n.isImmediateParentOf(y)){const v=this.getFieldsMap(n);this.applyChanges(v,s,l),s={},l=[],n=y.popLast()}m?s[y.lastSegment()]=_c(m):l.push(y.lastSegment())}));const h=this.getFieldsMap(n);this.applyChanges(h,s,l)}delete(t){const n=this.field(t.popLast());_f(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return us(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];_f(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){to(n,((l,h)=>t[l]=h));for(const l of s)delete t[l]}clone(){return new yi(_c(this.value))}}function Cw(r){const t=[];return to(r.fields,((n,s)=>{const l=new Nn([n]);if(_f(s)){const h=Cw(s.mapValue).fields;if(h.length===0)t.push(l);else for(const m of h)t.push(l.child(m))}else t.push(l)})),new Vi(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t,n,s,l,h,m,y){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=h,this.data=m,this.documentState=y}static newInvalidDocument(t){return new qn(t,0,jt.min(),jt.min(),jt.min(),yi.empty(),0)}static newFoundDocument(t,n,s,l){return new qn(t,1,n,jt.min(),s,l,0)}static newNoDocument(t,n){return new qn(t,2,n,jt.min(),jt.min(),yi.empty(),0)}static newUnknownDocument(t,n){return new qn(t,3,n,jt.min(),jt.min(),yi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof qn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(t,n){this.position=t,this.inclusive=n}}function cE(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const h=t[l],m=r.position[l];if(h.field.isKeyField()?s=Pt.comparator(Pt.fromName(m.referenceValue),n.key):s=lu(m,n.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function hE(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!us(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(t,n="asc"){this.field=t,this.dir=n}}function c2(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{}class fn extends Iw{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new f2(t,n,s):n==="array-contains"?new p2(t,s):n==="in"?new g2(t,s):n==="not-in"?new _2(t,s):n==="array-contains-any"?new y2(t,s):new fn(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new d2(t,s):new m2(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(lu(n,this.value)):n!==null&&$a(this.value)===$a(n)&&this.matchesComparison(lu(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ut(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends Iw{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new xr(t,n)}matches(t){return xw(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xw(r){return r.op==="and"}function Ow(r){return h2(r)&&xw(r)}function h2(r){for(const t of r.filters)if(t instanceof xr)return!1;return!0}function Pp(r){if(r instanceof fn)return r.field.canonicalString()+r.op.toString()+uu(r.value);if(Ow(r))return r.filters.map((t=>Pp(t))).join(",");{const t=r.filters.map((n=>Pp(n))).join(",");return`${r.op}(${t})`}}function Lw(r,t){return r instanceof fn?(function(s,l){return l instanceof fn&&s.op===l.op&&s.field.isEqual(l.field)&&us(s.value,l.value)})(r,t):r instanceof xr?(function(s,l){return l instanceof xr&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((h,m,y)=>h&&Lw(m,l.filters[y])),!0):!1})(r,t):void Ut(19439)}function Nw(r){return r instanceof fn?(function(n){return`${n.field.canonicalString()} ${n.op} ${uu(n.value)}`})(r):r instanceof xr?(function(n){return n.op.toString()+" {"+n.getFilters().map(Nw).join(" ,")+"}"})(r):"Filter"}class f2 extends fn{constructor(t,n,s){super(t,n,s),this.key=Pt.fromName(s.referenceValue)}matches(t){const n=Pt.comparator(t.key,this.key);return this.matchesComparison(n)}}class d2 extends fn{constructor(t,n){super(t,"in",n),this.keys=Pw("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class m2 extends fn{constructor(t,n){super(t,"not-in",n),this.keys=Pw("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function Pw(r,t){return(t.arrayValue?.values||[]).map((n=>Pt.fromName(n.referenceValue)))}class p2 extends fn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Tg(n)&&Ic(n.arrayValue,this.value)}}class g2 extends fn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ic(this.value.arrayValue,n)}}class _2 extends fn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ic(this.value.arrayValue,n)}}class y2 extends fn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Ic(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(t,n=null,s=[],l=[],h=null,m=null,y=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=h,this.startAt=m,this.endAt=y,this.Te=null}}function fE(r,t=null,n=[],s=[],l=null,h=null,m=null){return new v2(r,t,n,s,l,h,m)}function Eg(r){const t=Ft(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>Pp(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(h){return h.field.canonicalString()+h.dir})(s))).join(","),Xf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>uu(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>uu(s))).join(",")),t.Te=n}return t.Te}function wg(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!c2(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!Lw(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!hE(r.startAt,t.startAt)&&hE(r.endAt,t.endAt)}function Mp(r){return Pt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t,n=null,s=[],l=[],h=null,m="F",y=null,v=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=h,this.limitType=m,this.startAt=y,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function T2(r,t,n,s,l,h,m,y){return new vu(r,t,n,s,l,h,m,y)}function bg(r){return new vu(r)}function dE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Mw(r){return r.collectionGroup!==null}function yc(r){const t=Ft(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),n.add(h.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let y=new _n(Nn.comparator);return m.filters.forEach((v=>{v.getFlattenedFilters().forEach((T=>{T.isInequality()&&(y=y.add(T.field))}))})),y})(t).forEach((h=>{n.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new xc(h,s))})),n.has(Nn.keyField().canonicalString())||t.Ie.push(new xc(Nn.keyField(),s))}return t.Ie}function is(r){const t=Ft(r);return t.Ee||(t.Ee=E2(t,yc(r))),t.Ee}function E2(r,t){if(r.limitType==="F")return fE(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const h=l.dir==="desc"?"asc":"desc";return new xc(l.field,h)}));const n=r.endAt?new Mf(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Mf(r.startAt.position,r.startAt.inclusive):null;return fE(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function Dp(r,t){const n=r.filters.concat([t]);return new vu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function kp(r,t,n){return new vu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function Jf(r,t){return wg(is(r),is(t))&&r.limitType===t.limitType}function Dw(r){return`${Eg(is(r))}|lt:${r.limitType}`}function Xl(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>Nw(l))).join(", ")}]`),Xf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>uu(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>uu(l))).join(",")),`Target(${s})`})(is(r))}; limitType=${r.limitType})`}function td(r,t){return t.isFoundDocument()&&(function(s,l){const h=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):Pt.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)})(r,t)&&(function(s,l){for(const h of yc(s))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const h of s.filters)if(!h.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(m,y,v){const T=cE(m,y,v);return m.inclusive?T<=0:T<0})(s.startAt,yc(s),l)||s.endAt&&!(function(m,y,v){const T=cE(m,y,v);return m.inclusive?T>=0:T>0})(s.endAt,yc(s),l))})(r,t)}function w2(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function kw(r){return(t,n)=>{let s=!1;for(const l of yc(r)){const h=b2(l,t,n);if(h!==0)return h;s=s||l.field.isKeyField()}return 0}}function b2(r,t,n){const s=r.field.isKeyField()?Pt.comparator(t.key,n.key):(function(h,m,y){const v=m.data.field(h),T=y.data.field(h);return v!==null&&T!==null?lu(v,T):Ut(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ut(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,h]of s)if(this.equalsFn(l,t))return h}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],t))return void(l[h]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){to(this.inner,((n,s)=>{for(const[l,h]of s)t(l,h)}))}isEmpty(){return vw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new qe(Pt.comparator);function Ks(){return S2}const Vw=new qe(Pt.comparator);function hc(...r){let t=Vw;for(const n of r)t=t.insert(n.key,n);return t}function Uw(r){let t=Vw;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function qo(){return vc()}function zw(){return vc()}function vc(){return new rl((r=>r.toString()),((r,t)=>r.isEqual(t)))}const A2=new qe(Pt.comparator),R2=new _n(Pt.comparator);function ae(...r){let t=R2;for(const n of r)t=t.add(n);return t}const C2=new _n(se);function I2(){return C2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lf(t)?"-0":t}}function Bw(r){return{integerValue:""+r}}function x2(r,t){return n2(t)?Bw(t):Sg(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function O2(r,t,n){return r instanceof Oc?(function(l,h){const m={fields:{[ww]:{stringValue:Ew},[Sw]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&vg(h)&&(h=Wf(h)),h&&(m.fields[bw]=h),{mapValue:m}})(n,t):r instanceof Lc?Hw(r,t):r instanceof Nc?qw(r,t):(function(l,h){const m=jw(l,h),y=mE(m)+mE(l.Ae);return Np(m)&&Np(l.Ae)?Bw(y):Sg(l.serializer,y)})(r,t)}function L2(r,t,n){return r instanceof Lc?Hw(r,t):r instanceof Nc?qw(r,t):n}function jw(r,t){return r instanceof Df?(function(s){return Np(s)||(function(h){return!!h&&"doubleValue"in h})(s)})(t)?t:{integerValue:0}:null}class Oc extends ed{}class Lc extends ed{constructor(t){super(),this.elements=t}}function Hw(r,t){const n=Fw(t);for(const s of r.elements)n.some((l=>us(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Nc extends ed{constructor(t){super(),this.elements=t}}function qw(r,t){let n=Fw(t);for(const s of r.elements)n=n.filter((l=>!us(l,s)));return{arrayValue:{values:n}}}class Df extends ed{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function mE(r){return rn(r.integerValue||r.doubleValue)}function Fw(r){return Tg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(t,n){this.field=t,this.transform=n}}function P2(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof Lc&&l instanceof Lc||s instanceof Nc&&l instanceof Nc?ou(s.elements,l.elements,us):s instanceof Df&&l instanceof Df?us(s.Ae,l.Ae):s instanceof Oc&&l instanceof Oc})(r.transform,t.transform)}class M2{constructor(t,n){this.version=t,this.transformResults=n}}class Ir{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ir}static exists(t){return new Ir(void 0,t)}static updateTime(t){return new Ir(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function yf(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class nd{}function Gw(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Ag(r.key,Ir.none()):new Hc(r.key,r.data,Ir.none());{const n=r.data,s=yi.empty();let l=new _n(Nn.comparator);for(let h of t.fields)if(!l.has(h)){let m=n.field(h);m===null&&h.length>1&&(h=h.popLast(),m=n.field(h)),m===null?s.delete(h):s.set(h,m),l=l.add(h)}return new eo(r.key,s,new Vi(l.toArray()),Ir.none())}}function D2(r,t,n){r instanceof Hc?(function(l,h,m){const y=l.value.clone(),v=gE(l.fieldTransforms,h,m.transformResults);y.setAll(v),h.convertToFoundDocument(m.version,y).setHasCommittedMutations()})(r,t,n):r instanceof eo?(function(l,h,m){if(!yf(l.precondition,h))return void h.convertToUnknownDocument(m.version);const y=gE(l.fieldTransforms,h,m.transformResults),v=h.data;v.setAll(Zw(l)),v.setAll(y),h.convertToFoundDocument(m.version,v).setHasCommittedMutations()})(r,t,n):(function(l,h,m){h.convertToNoDocument(m.version).setHasCommittedMutations()})(0,t,n)}function Tc(r,t,n,s){return r instanceof Hc?(function(h,m,y,v){if(!yf(h.precondition,m))return y;const T=h.value.clone(),A=_E(h.fieldTransforms,v,m);return T.setAll(A),m.convertToFoundDocument(m.version,T).setHasLocalMutations(),null})(r,t,n,s):r instanceof eo?(function(h,m,y,v){if(!yf(h.precondition,m))return y;const T=_E(h.fieldTransforms,v,m),A=m.data;return A.setAll(Zw(h)),A.setAll(T),m.convertToFoundDocument(m.version,A).setHasLocalMutations(),y===null?null:y.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((C=>C.field)))})(r,t,n,s):(function(h,m,y){return yf(h.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):y})(r,t,n)}function k2(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),h=jw(s.transform,l||null);h!=null&&(n===null&&(n=yi.empty()),n.set(s.field,h))}return n||null}function pE(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&ou(s,l,((h,m)=>P2(h,m)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Hc extends nd{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class eo extends nd{constructor(t,n,s,l,h=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Zw(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function gE(r,t,n){const s=new Map;_e(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const h=r[l],m=h.transform,y=t.data.field(h.field);s.set(h.field,L2(m,y,n[l]))}return s}function _E(r,t,n){const s=new Map;for(const l of r){const h=l.transform,m=n.data.field(l.field);s.set(l.field,O2(h,m,t))}return s}class Ag extends nd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V2 extends nd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(t.key)&&D2(h,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Tc(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Tc(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=zw();return this.mutations.forEach((l=>{const h=t.get(l.key),m=h.overlayedDocument;let y=this.applyToLocalView(m,h.mutatedFields);y=n.has(l.key)?null:y;const v=Gw(m,y);v!==null&&s.set(l.key,v),m.isValidDocument()||m.convertToNoDocument(jt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),ae())}isEqual(t){return this.batchId===t.batchId&&ou(this.mutations,t.mutations,((n,s)=>pE(n,s)))&&ou(this.baseMutations,t.baseMutations,((n,s)=>pE(n,s)))}}class Rg{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){_e(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return A2})();const h=t.mutations;for(let m=0;m<h.length;m++)l=l.insert(h[m].key,s[m].version);return new Rg(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,ce;function j2(r){switch(r){case dt.OK:return Ut(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Ut(15467,{code:r})}}function Kw(r){if(r===void 0)return Zs("GRPC error has no .code"),dt.UNKNOWN;switch(r){case hn.OK:return dt.OK;case hn.CANCELLED:return dt.CANCELLED;case hn.UNKNOWN:return dt.UNKNOWN;case hn.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case hn.INTERNAL:return dt.INTERNAL;case hn.UNAVAILABLE:return dt.UNAVAILABLE;case hn.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case hn.NOT_FOUND:return dt.NOT_FOUND;case hn.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case hn.ABORTED:return dt.ABORTED;case hn.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case hn.DATA_LOSS:return dt.DATA_LOSS;default:return Ut(39323,{code:r})}}(ce=hn||(hn={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new qa([4294967295,4294967295],0);function yE(r){const t=H2().encode(r),n=new lw;return n.update(t),new Uint8Array(n.digest())}function vE(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new qa([n,s],0),new qa([l,h],0)]}class Cg{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new fc(`Invalid padding: ${n}`);if(s<0)throw new fc(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new fc(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new fc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=qa.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(qa.fromNumber(s)));return l.compare(q2)===1&&(l=new qa([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=yE(t),[s,l]=vE(n);for(let h=0;h<this.hashCount;h++){const m=this.ye(s,l,h);if(!this.we(m))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),m=new Cg(h,l,n);return s.forEach((y=>m.insert(y))),m}insert(t){if(this.ge===0)return;const n=yE(t),[s,l]=vE(n);for(let h=0;h<this.hashCount;h++){const m=this.ye(s,l,h);this.Se(m)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(t,n,s,l,h){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,qc.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new id(jt.min(),l,new qe(se),Ks(),ae())}}class qc{constructor(t,n,s,l,h){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new qc(s,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class Yw{constructor(t,n){this.targetId=t,this.Ce=n}}class Qw{constructor(t,n,s=Pn.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class TE{constructor(){this.ve=0,this.Fe=EE(),this.Me=Pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ae(),n=ae(),s=ae();return this.Fe.forEach(((l,h)=>{switch(h){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Ut(38017,{changeType:h})}})),new qc(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=EE()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class F2{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ks(),this.Je=sf(),this.He=sf(),this.Ye=new qe(se)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:Ut(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const h=l.target;if(Mp(h))if(s===0){const m=new Pt(h.path);this.et(n,m,qn.newNoDocument(m,jt.min()))}else _e(s===1,20013,{expectedCount:s});else{const m=this._t(n);if(m!==s){const y=this.ut(t),v=y?this.ct(y,t,m):1;if(v!==0){this.it(n);const T=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,T)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:h=0}=n;let m,y;try{m=Qa(s).toUint8Array()}catch(v){if(v instanceof Tw)return au("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{y=new Cg(m,l,h)}catch(v){return au(v instanceof fc?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return y.ge===0?null:y}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((h=>{const m=this.Ge.ht(),y=`projects/${m.projectId}/databases/${m.database}/documents/${h.path.canonicalString()}`;t.mightContain(y)||(this.et(n,h,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((h,m)=>{const y=this.ot(m);if(y){if(h.current&&Mp(y.target)){const v=new Pt(y.target.path);this.It(v).has(m)||this.Et(m,v)||this.et(m,v,qn.newNoDocument(v,t))}h.Be&&(n.set(m,h.ke()),h.qe())}}));let s=ae();this.He.forEach(((h,m)=>{let y=!0;m.forEachWhile((v=>{const T=this.ot(v);return!T||T.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(s=s.add(h))})),this.je.forEach(((h,m)=>m.setReadTime(t)));const l=new id(t,n,this.Ye,this.je,s);return this.je=Ks(),this.Je=sf(),this.He=sf(),this.Ye=new qe(se),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new TE,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new _n(se),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new _n(se),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||Rt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new TE),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function sf(){return new qe(Pt.comparator)}function EE(){return new qe(Pt.comparator)}const G2={asc:"ASCENDING",desc:"DESCENDING"},Z2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K2={and:"AND",or:"OR"};class Y2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Vp(r,t){return r.useProto3Json||Xf(t)?t:{value:t}}function kf(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function $w(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function Q2(r,t){return kf(r,t.toTimestamp())}function rs(r){return _e(!!r,49232),jt.fromTimestamp((function(n){const s=Ya(n);return new Le(s.seconds,s.nanos)})(r))}function Ig(r,t){return Up(r,t).canonicalString()}function Up(r,t){const n=(function(l){return new Oe(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function Xw(r){const t=Oe.fromString(r);return _e(nb(t),10190,{key:t.toString()}),t}function zp(r,t){return Ig(r.databaseId,t.path)}function dp(r,t){const n=Xw(t);if(n.get(1)!==r.databaseId.projectId)throw new At(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new At(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Pt(Jw(n))}function Ww(r,t){return Ig(r.databaseId,t)}function $2(r){const t=Xw(r);return t.length===4?Oe.emptyPath():Jw(t)}function Bp(r){return new Oe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Jw(r){return _e(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function wE(r,t,n){return{name:zp(r,t),fields:n.value.mapValue.fields}}function X2(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:Ut(39313,{state:T})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],h=(function(T,A){return T.useProto3Json?(_e(A===void 0||typeof A=="string",58123),Pn.fromBase64String(A||"")):(_e(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Pn.fromUint8Array(A||new Uint8Array))})(r,t.targetChange.resumeToken),m=t.targetChange.cause,y=m&&(function(T){const A=T.code===void 0?dt.UNKNOWN:Kw(T.code);return new At(A,T.message||"")})(m);n=new Qw(s,l,h,y||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=dp(r,s.document.name),h=rs(s.document.updateTime),m=s.document.createTime?rs(s.document.createTime):jt.min(),y=new yi({mapValue:{fields:s.document.fields}}),v=qn.newFoundDocument(l,h,m,y),T=s.targetIds||[],A=s.removedTargetIds||[];n=new vf(T,A,v.key,v)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=dp(r,s.document),h=s.readTime?rs(s.readTime):jt.min(),m=qn.newNoDocument(l,h),y=s.removedTargetIds||[];n=new vf([],y,m.key,m)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=dp(r,s.document),h=s.removedTargetIds||[];n=new vf([],h,l,null)}else{if(!("filter"in t))return Ut(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:h}=s,m=new B2(l,h),y=s.targetId;n=new Yw(y,m)}}return n}function W2(r,t){let n;if(t instanceof Hc)n={update:wE(r,t.key,t.value)};else if(t instanceof Ag)n={delete:zp(r,t.key)};else if(t instanceof eo)n={update:wE(r,t.key,t.data),updateMask:oO(t.fieldMask)};else{if(!(t instanceof V2))return Ut(16599,{Vt:t.type});n={verify:zp(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(h,m){const y=m.transform;if(y instanceof Oc)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Lc)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Nc)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Df)return{fieldPath:m.field.canonicalString(),increment:y.Ae};throw Ut(20930,{transform:m.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,h){return h.updateTime!==void 0?{updateTime:Q2(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Ut(27497)})(r,t.precondition)),n}function J2(r,t){return r&&r.length>0?(_e(t!==void 0,14353),r.map((n=>(function(l,h){let m=l.updateTime?rs(l.updateTime):rs(h);return m.isEqual(jt.min())&&(m=rs(h)),new M2(m,l.transformResults||[])})(n,t)))):[]}function tO(r,t){return{documents:[Ww(r,t.path)]}}function eO(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Ww(r,l);const h=(function(T){if(T.length!==0)return eb(xr.create(T,"and"))})(t.filters);h&&(n.structuredQuery.where=h);const m=(function(T){if(T.length!==0)return T.map((A=>(function(O){return{field:Wl(O.field),direction:rO(O.dir)}})(A)))})(t.orderBy);m&&(n.structuredQuery.orderBy=m);const y=Vp(r,t.limit);return y!==null&&(n.structuredQuery.limit=y),t.startAt&&(n.structuredQuery.startAt=(function(T){return{before:T.inclusive,values:T.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(T){return{before:!T.inclusive,values:T.position}})(t.endAt)),{ft:n,parent:l}}function nO(r){let t=$2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){_e(s===1,65062);const A=n.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let h=[];n.where&&(h=(function(C){const O=tb(C);return O instanceof xr&&Ow(O)?O.getFilters():[O]})(n.where));let m=[];n.orderBy&&(m=(function(C){return C.map((O=>(function(J){return new xc(Jl(J.field),(function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(J.direction))})(O)))})(n.orderBy));let y=null;n.limit&&(y=(function(C){let O;return O=typeof C=="object"?C.value:C,Xf(O)?null:O})(n.limit));let v=null;n.startAt&&(v=(function(C){const O=!!C.before,j=C.values||[];return new Mf(j,O)})(n.startAt));let T=null;return n.endAt&&(T=(function(C){const O=!C.before,j=C.values||[];return new Mf(j,O)})(n.endAt)),T2(t,l,m,h,y,"F",v,T)}function iO(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ut(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function tb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Jl(n.unaryFilter.field);return fn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Jl(n.unaryFilter.field);return fn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Jl(n.unaryFilter.field);return fn.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Jl(n.unaryFilter.field);return fn.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ut(61313);default:return Ut(60726)}})(r):r.fieldFilter!==void 0?(function(n){return fn.create(Jl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ut(58110);default:return Ut(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return xr.create(n.compositeFilter.filters.map((s=>tb(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ut(1026)}})(n.compositeFilter.op))})(r):Ut(30097,{filter:r})}function rO(r){return G2[r]}function sO(r){return Z2[r]}function aO(r){return K2[r]}function Wl(r){return{fieldPath:r.canonicalString()}}function Jl(r){return Nn.fromServerFormat(r.fieldPath)}function eb(r){return r instanceof fn?(function(n){if(n.op==="=="){if(uE(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NAN"}};if(lE(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uE(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NOT_NAN"}};if(lE(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wl(n.field),op:sO(n.op),value:n.value}}})(r):r instanceof xr?(function(n){const s=n.getFilters().map((l=>eb(l)));return s.length===1?s[0]:{compositeFilter:{op:aO(n.op),filters:s}}})(r):Ut(54877,{filter:r})}function oO(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function nb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(t,n,s,l,h=jt.min(),m=jt.min(),y=Pn.EMPTY_BYTE_STRING,v=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=y,this.expectedCount=v}withSequenceNumber(t){return new Ba(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(t){this.yt=t}}function uO(r){const t=nO({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?kp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.Cn=new hO}addToCollectionParentIndex(t,n){return this.Cn.add(n),mt.resolve()}getCollectionParents(t,n){return mt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return mt.resolve()}deleteFieldIndex(t,n){return mt.resolve()}deleteAllFieldIndexes(t){return mt.resolve()}createTargetIndexes(t,n){return mt.resolve()}getDocumentsMatchingTarget(t,n){return mt.resolve(null)}getIndexType(t,n){return mt.resolve(0)}getFieldIndexes(t,n){return mt.resolve([])}getNextCollectionGroupToUpdate(t){return mt.resolve(null)}getMinOffset(t,n){return mt.resolve(Ka.min())}getMinOffsetFromCollectionGroup(t,n){return mt.resolve(Ka.min())}updateCollectionGroup(t,n,s){return mt.resolve()}updateIndexEntries(t,n){return mt.resolve()}}class hO{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new _n(Oe.comparator),h=!l.has(s);return this.index[n]=l.add(s),h}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new _n(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ib=41943040;class _i{static withCacheSize(t){return new _i(t,_i.DEFAULT_COLLECTION_PERCENTILE,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i.DEFAULT_COLLECTION_PERCENTILE=10,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_i.DEFAULT=new _i(ib,_i.DEFAULT_COLLECTION_PERCENTILE,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_i.DISABLED=new _i(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new cu(0)}static cr(){return new cu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="LruGarbageCollector",fO=1048576;function AE([r,t],[n,s]){const l=se(r,n);return l===0?se(t,s):l}class dO{constructor(t){this.Ir=t,this.buffer=new _n(AE),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();AE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mO{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Rt(SE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yu(n)?Rt(SE,"Ignoring IndexedDB error during garbage collection: ",n):await _u(n)}await this.Vr(3e5)}))}}class pO{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return mt.resolve($f.ce);const s=new dO(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Rt("LruGarbageCollector","Garbage collection skipped; disabled"),mt.resolve(bE)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(Rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bE):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,h,m,y,v,T;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(Rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),l=this.params.maximumSequenceNumbersToCollect):l=C,m=Date.now(),this.nthSequenceNumber(t,l)))).next((C=>(s=C,y=Date.now(),this.removeTargets(t,s,n)))).next((C=>(h=C,v=Date.now(),this.removeOrphanedDocuments(t,s)))).next((C=>(T=Date.now(),$l()<=re.DEBUG&&Rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-A}ms
	Determined least recently used ${l} in `+(y-m)+`ms
	Removed ${h} targets in `+(v-y)+`ms
	Removed ${C} documents in `+(T-v)+`ms
Total Duration: ${T-A}ms`),mt.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:C}))))}}function gO(r,t){return new pO(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.changes=new rl((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,qn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?mt.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&Tc(s.mutation,l,Vi.empty(),Le.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,ae()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=ae()){const l=qo();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((h=>{let m=hc();return h.forEach(((y,v)=>{m=m.insert(y,v.overlayedDocument)})),m}))))}getOverlayedDocuments(t,n){const s=qo();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,ae())))}populateOverlays(t,n,s){const l=[];return s.forEach((h=>{n.has(h)||l.push(h)})),this.documentOverlayCache.getOverlays(t,l).next((h=>{h.forEach(((m,y)=>{n.set(m,y)}))}))}computeViews(t,n,s,l){let h=Ks();const m=vc(),y=(function(){return vc()})();return n.forEach(((v,T)=>{const A=s.get(T.key);l.has(T.key)&&(A===void 0||A.mutation instanceof eo)?h=h.insert(T.key,T):A!==void 0?(m.set(T.key,A.mutation.getFieldMask()),Tc(A.mutation,T,A.mutation.getFieldMask(),Le.now())):m.set(T.key,Vi.empty())})),this.recalculateAndSaveOverlays(t,h).next((v=>(v.forEach(((T,A)=>m.set(T,A))),n.forEach(((T,A)=>y.set(T,new yO(A,m.get(T)??null)))),y)))}recalculateAndSaveOverlays(t,n){const s=vc();let l=new qe(((m,y)=>m-y)),h=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((m=>{for(const y of m)y.keys().forEach((v=>{const T=n.get(v);if(T===null)return;let A=s.get(v)||Vi.empty();A=y.applyToLocalView(T,A),s.set(v,A);const C=(l.get(y.batchId)||ae()).add(v);l=l.insert(y.batchId,C)}))})).next((()=>{const m=[],y=l.getReverseIterator();for(;y.hasNext();){const v=y.getNext(),T=v.key,A=v.value,C=zw();A.forEach((O=>{if(!h.has(O)){const j=Gw(n.get(O),s.get(O));j!==null&&C.set(O,j),h=h.add(O)}})),m.push(this.documentOverlayCache.saveOverlays(t,T,C))}return mt.waitFor(m)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(m){return Pt.isDocumentKey(m.path)&&m.collectionGroup===null&&m.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Mw(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((h=>{const m=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-h.size):mt.resolve(qo());let y=Ac,v=h;return m.next((T=>mt.forEach(T,((A,C)=>(y<C.largestBatchId&&(y=C.largestBatchId),h.get(A)?mt.resolve():this.remoteDocumentCache.getEntry(t,A).next((O=>{v=v.insert(A,O)}))))).next((()=>this.populateOverlays(t,T,h))).next((()=>this.computeViews(t,v,T,ae()))).next((A=>({batchId:y,changes:Uw(A)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Pt(n)).next((s=>{let l=hc();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const h=n.collectionGroup;let m=hc();return this.indexManager.getCollectionParents(t,h).next((y=>mt.forEach(y,(v=>{const T=(function(C,O){return new vu(O,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(n,v.child(h));return this.getDocumentsMatchingCollectionQuery(t,T,s,l).next((A=>{A.forEach(((C,O)=>{m=m.insert(C,O)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let h;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((m=>(h=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,h,l)))).next((m=>{h.forEach(((v,T)=>{const A=T.getKey();m.get(A)===null&&(m=m.insert(A,qn.newInvalidDocument(A)))}));let y=hc();return m.forEach(((v,T)=>{const A=h.get(v);A!==void 0&&Tc(A.mutation,T,Vi.empty(),Le.now()),td(n,T)&&(y=y.insert(v,T))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return mt.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:rs(l.createTime)}})(n)),mt.resolve()}getNamedQuery(t,n){return mt.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:uO(l.bundledQuery),readTime:rs(l.readTime)}})(n)),mt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.overlays=new qe(Pt.comparator),this.qr=new Map}getOverlay(t,n){return mt.resolve(this.overlays.get(n))}getOverlays(t,n){const s=qo();return mt.forEach(n,(l=>this.getOverlay(t,l).next((h=>{h!==null&&s.set(l,h)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,h)=>{this.St(t,n,h)})),mt.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(s)),mt.resolve()}getOverlaysForCollection(t,n,s){const l=qo(),h=n.length+1,m=new Pt(n.child("")),y=this.overlays.getIteratorFrom(m);for(;y.hasNext();){const v=y.getNext().value,T=v.getKey();if(!n.isPrefixOf(T.path))break;T.path.length===h&&v.largestBatchId>s&&l.set(v.getKey(),v)}return mt.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let h=new qe(((T,A)=>T-A));const m=this.overlays.getIterator();for(;m.hasNext();){const T=m.getNext().value;if(T.getKey().getCollectionGroup()===n&&T.largestBatchId>s){let A=h.get(T.largestBatchId);A===null&&(A=qo(),h=h.insert(T.largestBatchId,A)),A.set(T.getKey(),T)}}const y=qo(),v=h.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((T,A)=>y.set(T,A))),!(y.size()>=l)););return mt.resolve(y)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const m=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,m)}this.overlays=this.overlays.insert(s.key,new z2(n,s));let h=this.qr.get(n);h===void 0&&(h=ae(),this.qr.set(n,h)),this.qr.set(n,h.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(t){return mt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,mt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(){this.Qr=new _n(Rn.$r),this.Ur=new _n(Rn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Rn(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new Rn(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new Pt(new Oe([])),s=new Rn(n,t),l=new Rn(n,t+1),h=[];return this.Ur.forEachInRange([s,l],(m=>{this.Gr(m),h.push(m.key)})),h}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Pt(new Oe([])),s=new Rn(n,t),l=new Rn(n,t+1);let h=ae();return this.Ur.forEachInRange([s,l],(m=>{h=h.add(m.key)})),h}containsKey(t){const n=new Rn(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Rn{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Pt.comparator(t.key,n.key)||se(t.Yr,n.Yr)}static Kr(t,n){return se(t.Yr,n.Yr)||Pt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _n(Rn.$r)}checkEmpty(t){return mt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new U2(h,n,s,l);this.mutationQueue.push(m);for(const y of l)this.Zr=this.Zr.add(new Rn(y.key,h)),this.indexManager.addToCollectionParentIndex(t,y.key.path.popLast());return mt.resolve(m)}lookupMutationBatch(t,n){return mt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),h=l<0?0:l;return mt.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return mt.resolve(this.mutationQueue.length===0?yg:this.tr-1)}getAllMutationBatches(t){return mt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Rn(n,0),l=new Rn(n,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([s,l],(m=>{const y=this.Xr(m.Yr);h.push(y)})),mt.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new _n(se);return n.forEach((l=>{const h=new Rn(l,0),m=new Rn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,m],(y=>{s=s.add(y.Yr)}))})),mt.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let h=s;Pt.isDocumentKey(h)||(h=h.child(""));const m=new Rn(new Pt(h),0);let y=new _n(se);return this.Zr.forEachWhile((v=>{const T=v.key.path;return!!s.isPrefixOf(T)&&(T.length===l&&(y=y.add(v.Yr)),!0)}),m),mt.resolve(this.ti(y))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){_e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return mt.forEach(n.mutations,(l=>{const h=new Rn(l.key,n.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new Rn(n,0),l=this.Zr.firstAfterOrEqual(s);return mt.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,mt.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(t){this.ri=t,this.docs=(function(){return new qe(Pt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),h=l?l.size:0,m=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:m}),this.size+=m-h,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return mt.resolve(s?s.document.mutableCopy():qn.newInvalidDocument(n))}getEntries(t,n){let s=Ks();return n.forEach((l=>{const h=this.docs.get(l);s=s.insert(l,h?h.document.mutableCopy():qn.newInvalidDocument(l))})),mt.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let h=Ks();const m=n.path,y=new Pt(m.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(y);for(;v.hasNext();){const{key:T,value:{document:A}}=v.getNext();if(!m.isPrefixOf(T.path))break;T.path.length>m.length+1||Wx(Xx(A),s)<=0||(l.has(A.key)||td(n,A))&&(h=h.insert(A.key,A.mutableCopy()))}return mt.resolve(h)}getAllFromCollectionGroup(t,n,s,l){Ut(9500)}ii(t,n){return mt.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new AO(this)}getSize(t){return mt.resolve(this.size)}}class AO extends _O{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),mt.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(t){this.persistence=t,this.si=new rl((n=>Eg(n)),wg),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.oi=0,this._i=new xg,this.targetCount=0,this.ai=cu.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),mt.resolve()}getLastRemoteSnapshotVersion(t){return mt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return mt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),mt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),mt.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new cu(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,mt.resolve()}updateTargetData(t,n){return this.Pr(n),mt.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,mt.resolve()}removeTargets(t,n,s){let l=0;const h=[];return this.si.forEach(((m,y)=>{y.sequenceNumber<=n&&s.get(y.targetId)===null&&(this.si.delete(m),h.push(this.removeMatchingKeysForTargetId(t,y.targetId)),l++)})),mt.waitFor(h).next((()=>l))}getTargetCount(t){return mt.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return mt.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),mt.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,h=[];return l&&n.forEach((m=>{h.push(l.markPotentiallyOrphaned(t,m))})),mt.waitFor(h)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),mt.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return mt.resolve(s)}containsKey(t,n){return mt.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(t,n){this.ui={},this.overlays={},this.ci=new $f(0),this.li=!1,this.li=!0,this.hi=new wO,this.referenceDelegate=t(this),this.Pi=new RO(this),this.indexManager=new cO,this.remoteDocumentCache=(function(l){return new SO(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new lO(n),this.Ii=new TO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new EO,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new bO(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){Rt("MemoryPersistence","Starting transaction:",t);const l=new CO(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((h=>this.referenceDelegate.di(l).next((()=>h)))).toPromise().then((h=>(l.raiseOnCommittedEvent(),h)))}Ai(t,n){return mt.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class CO extends t2{constructor(t){super(),this.currentSequenceNumber=t}}class Og{constructor(t){this.persistence=t,this.Ri=new xg,this.Vi=null}static mi(t){return new Og(t)}get fi(){if(this.Vi)return this.Vi;throw Ut(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),mt.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),mt.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),mt.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((h=>this.fi.add(h.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mt.forEach(this.fi,(s=>{const l=Pt.fromPath(s);return this.gi(t,l).next((h=>{h||n.removeEntry(l,jt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return mt.or([()=>mt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Vf{constructor(t,n){this.persistence=t,this.pi=new rl((s=>i2(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=gO(this,n)}static mi(t,n){return new Vf(t,n)}Ei(){}di(t){return mt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return mt.forEach(this.pi,((s,l)=>this.br(t,s,l).next((h=>h?mt.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.ii(t,(m=>this.br(t,m,n).next((y=>{y||(s++,h.removeEntry(m,jt.min()))})))).next((()=>h.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),mt.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),mt.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),mt.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),mt.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=gf(t.data.value)),n}br(t,n,s){return mt.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return mt.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=ae(),l=ae();for(const h of n.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new Lg(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yR()?8:e2(Fn())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const h={result:null};return this.ys(t,n).next((m=>{h.result=m})).next((()=>{if(!h.result)return this.ws(t,n,l,s).next((m=>{h.result=m}))})).next((()=>{if(h.result)return;const m=new IO;return this.Ss(t,n,m).next((y=>{if(h.result=y,this.Vs)return this.bs(t,n,m,y.size)}))})).next((()=>h.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?($l()<=re.DEBUG&&Rt("QueryEngine","SDK will not create cache indexes for query:",Xl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),mt.resolve()):($l()<=re.DEBUG&&Rt("QueryEngine","Query:",Xl(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?($l()<=re.DEBUG&&Rt("QueryEngine","The SDK decides to create cache indexes for query:",Xl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,is(n))):mt.resolve())}ys(t,n){if(dE(n))return mt.resolve(null);let s=is(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=kp(n,null,"F"),s=is(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((h=>{const m=ae(...h);return this.ps.getDocuments(t,m).next((y=>this.indexManager.getMinOffset(t,s).next((v=>{const T=this.Ds(n,y);return this.Cs(n,T,m,v.readTime)?this.ys(t,kp(n,null,"F")):this.vs(t,T,n,v)}))))})))))}ws(t,n,s,l){return dE(n)||l.isEqual(jt.min())?mt.resolve(null):this.ps.getDocuments(t,s).next((h=>{const m=this.Ds(n,h);return this.Cs(n,m,s,l)?mt.resolve(null):($l()<=re.DEBUG&&Rt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Xl(n)),this.vs(t,m,n,$x(l,Ac)).next((y=>y)))}))}Ds(t,n){let s=new _n(kw(t));return n.forEach(((l,h)=>{td(t,h)&&(s=s.add(h))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const h=t.limitType==="F"?n.last():n.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Ss(t,n,s){return $l()<=re.DEBUG&&Rt("QueryEngine","Using full collection scan to execute query:",Xl(n)),this.ps.getDocumentsMatchingQuery(t,n,Ka.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((h=>(n.forEach((m=>{h=h.insert(m.key,m)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="LocalStore",OO=3e8;class LO{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new qe(se),this.xs=new rl((h=>Eg(h)),wg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new vO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function NO(r,t,n,s){return new LO(r,t,n,s)}async function sb(r,t){const n=Ft(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((h=>(l=h,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((h=>{const m=[],y=[];let v=ae();for(const T of l){m.push(T.batchId);for(const A of T.mutations)v=v.add(A.key)}for(const T of h){y.push(T.batchId);for(const A of T.mutations)v=v.add(A.key)}return n.localDocuments.getDocuments(s,v).next((T=>({Ls:T,removedBatchIds:m,addedBatchIds:y})))}))}))}function PO(r,t){const n=Ft(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),h=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,v,T,A){const C=T.batch,O=C.keys();let j=mt.resolve();return O.forEach((J=>{j=j.next((()=>A.getEntry(v,J))).next((W=>{const Q=T.docVersions.get(J);_e(Q!==null,48541),W.version.compareTo(Q)<0&&(C.applyToRemoteDocument(W,T),W.isValidDocument()&&(W.setReadTime(T.commitVersion),A.addEntry(W)))}))})),j.next((()=>y.mutationQueue.removeMutationBatch(v,C)))})(n,s,t,h).next((()=>h.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(y){let v=ae();for(let T=0;T<y.mutationResults.length;++T)y.mutationResults[T].transformResults.length>0&&(v=v.add(y.batch.mutations[T].key));return v})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function ab(r){const t=Ft(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function MO(r,t){const n=Ft(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const m=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const y=[];t.targetChanges.forEach(((A,C)=>{const O=l.get(C);if(!O)return;y.push(n.Pi.removeMatchingKeys(h,A.removedDocuments,C).next((()=>n.Pi.addMatchingKeys(h,A.addedDocuments,C))));let j=O.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(C)!==null?j=j.withResumeToken(Pn.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):A.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(A.resumeToken,s)),l=l.insert(C,j),(function(W,Q,at){return W.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=OO?!0:at.addedDocuments.size+at.modifiedDocuments.size+at.removedDocuments.size>0})(O,j,A)&&y.push(n.Pi.updateTargetData(h,j))}));let v=Ks(),T=ae();if(t.documentUpdates.forEach((A=>{t.resolvedLimboDocuments.has(A)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(h,A))})),y.push(DO(h,m,t.documentUpdates).next((A=>{v=A.ks,T=A.qs}))),!s.isEqual(jt.min())){const A=n.Pi.getLastRemoteSnapshotVersion(h).next((C=>n.Pi.setTargetsMetadata(h,h.currentSequenceNumber,s)));y.push(A)}return mt.waitFor(y).next((()=>m.apply(h))).next((()=>n.localDocuments.getLocalViewOfDocuments(h,v,T))).next((()=>v))})).then((h=>(n.Ms=l,h)))}function DO(r,t,n){let s=ae(),l=ae();return n.forEach((h=>s=s.add(h))),t.getEntries(r,s).next((h=>{let m=Ks();return n.forEach(((y,v)=>{const T=h.get(y);v.isFoundDocument()!==T.isFoundDocument()&&(l=l.add(y)),v.isNoDocument()&&v.version.isEqual(jt.min())?(t.removeEntry(y,v.readTime),m=m.insert(y,v)):!T.isValidDocument()||v.version.compareTo(T.version)>0||v.version.compareTo(T.version)===0&&T.hasPendingWrites?(t.addEntry(v),m=m.insert(y,v)):Rt(Ng,"Ignoring outdated watch update for ",y,". Current version:",T.version," Watch version:",v.version)})),{ks:m,qs:l}}))}function kO(r,t){const n=Ft(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=yg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function VO(r,t){const n=Ft(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((h=>h?(l=h,mt.resolve(l)):n.Pi.allocateTargetId(s).next((m=>(l=new Ba(t,m,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function jp(r,t,n){const s=Ft(r),l=s.Ms.get(t),h=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",h,(m=>s.persistence.referenceDelegate.removeTarget(m,l)))}catch(m){if(!yu(m))throw m;Rt(Ng,`Failed to update sequence numbers for target ${t}: ${m}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function RE(r,t,n){const s=Ft(r);let l=jt.min(),h=ae();return s.persistence.runTransaction("Execute query","readwrite",(m=>(function(v,T,A){const C=Ft(v),O=C.xs.get(A);return O!==void 0?mt.resolve(C.Ms.get(O)):C.Pi.getTargetData(T,A)})(s,m,is(t)).next((y=>{if(y)return l=y.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(m,y.targetId).next((v=>{h=v}))})).next((()=>s.Fs.getDocumentsMatchingQuery(m,t,n?l:jt.min(),n?h:ae()))).next((y=>(UO(s,w2(t),y),{documents:y,Qs:h})))))}function UO(r,t,n){let s=r.Os.get(t)||jt.min();n.forEach(((l,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)})),r.Os.set(t,s)}class CE{constructor(){this.activeTargetIds=I2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class zO{constructor(){this.Mo=new CE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new CE,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="ConnectivityMonitor";class xE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Rt(IE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Rt(IE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af=null;function Hp(){return af===null?af=(function(){return 268435456+Math.round(2147483648*Math.random())})():af++,"0x"+af.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="RestConnection",jO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HO{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Nf?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,h){const m=Hp(),y=this.zo(t,n.toUriEncodedString());Rt(mp,`Sending RPC '${t}' ${m}:`,y,s);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,l,h);const{host:T}=new URL(y),A=Ja(T);return this.Jo(t,y,v,s,A).then((C=>(Rt(mp,`Received RPC '${t}' ${m}: `,C),C)),(C=>{throw au(mp,`RPC '${t}' ${m} failed with error: `,C,"url: ",y,"request:",s),C}))}Ho(t,n,s,l,h,m){return this.Go(t,n,s,l,h)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gu})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,h)=>t[h]=l)),s&&s.headers.forEach(((l,h)=>t[h]=l))}zo(t,n){const s=jO[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class FO extends HO{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,h){const m=Hp();return new Promise(((y,v)=>{const T=new uw;T.setWithCredentials(!0),T.listenOnce(cw.COMPLETE,(()=>{try{switch(T.getLastErrorCode()){case pf.NO_ERROR:const C=T.getResponseJson();Rt(jn,`XHR for RPC '${t}' ${m} received:`,JSON.stringify(C)),y(C);break;case pf.TIMEOUT:Rt(jn,`RPC '${t}' ${m} timed out`),v(new At(dt.DEADLINE_EXCEEDED,"Request time out"));break;case pf.HTTP_ERROR:const O=T.getStatus();if(Rt(jn,`RPC '${t}' ${m} failed with status:`,O,"response text:",T.getResponseText()),O>0){let j=T.getResponseJson();Array.isArray(j)&&(j=j[0]);const J=j?.error;if(J&&J.status&&J.message){const W=(function(at){const ut=at.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(ut)>=0?ut:dt.UNKNOWN})(J.status);v(new At(W,J.message))}else v(new At(dt.UNKNOWN,"Server responded with status "+T.getStatus()))}else v(new At(dt.UNAVAILABLE,"Connection failed."));break;default:Ut(9055,{l_:t,streamId:m,h_:T.getLastErrorCode(),P_:T.getLastError()})}}finally{Rt(jn,`RPC '${t}' ${m} completed.`)}}));const A=JSON.stringify(l);Rt(jn,`RPC '${t}' ${m} sending request:`,l),T.send(n,"POST",A,s,15)}))}T_(t,n,s){const l=Hp(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=dw(),y=fw(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;T!==void 0&&(v.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,n,s),v.encodeInitMessageHeaders=!0;const A=h.join("");Rt(jn,`Creating RPC '${t}' stream ${l}: ${A}`,v);const C=m.createWebChannel(A,v);this.I_(C);let O=!1,j=!1;const J=new qO({Yo:Q=>{j?Rt(jn,`Not sending because RPC '${t}' stream ${l} is closed:`,Q):(O||(Rt(jn,`Opening RPC '${t}' stream ${l} transport.`),C.open(),O=!0),Rt(jn,`RPC '${t}' stream ${l} sending:`,Q),C.send(Q))},Zo:()=>C.close()}),W=(Q,at,ut)=>{Q.listen(at,(ft=>{try{ut(ft)}catch(xt){setTimeout((()=>{throw xt}),0)}}))};return W(C,cc.EventType.OPEN,(()=>{j||(Rt(jn,`RPC '${t}' stream ${l} transport opened.`),J.o_())})),W(C,cc.EventType.CLOSE,(()=>{j||(j=!0,Rt(jn,`RPC '${t}' stream ${l} transport closed`),J.a_(),this.E_(C))})),W(C,cc.EventType.ERROR,(Q=>{j||(j=!0,au(jn,`RPC '${t}' stream ${l} transport errored. Name:`,Q.name,"Message:",Q.message),J.a_(new At(dt.UNAVAILABLE,"The operation could not be completed")))})),W(C,cc.EventType.MESSAGE,(Q=>{if(!j){const at=Q.data[0];_e(!!at,16349);const ut=at,ft=ut?.error||ut[0]?.error;if(ft){Rt(jn,`RPC '${t}' stream ${l} received error:`,ft);const xt=ft.status;let kt=(function(N){const P=hn[N];if(P!==void 0)return Kw(P)})(xt),Dt=ft.message;kt===void 0&&(kt=dt.INTERNAL,Dt="Unknown error status: "+xt+" with message "+ft.message),j=!0,J.a_(new At(kt,Dt)),C.close()}else Rt(jn,`RPC '${t}' stream ${l} received:`,at),J.u_(at)}})),W(y,hw.STAT_EVENT,(Q=>{Q.stat===xp.PROXY?Rt(jn,`RPC '${t}' stream ${l} detected buffering proxy`):Q.stat===xp.NOPROXY&&Rt(jn,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{J.__()}),0),J}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function pp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(r){return new Y2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t,n,s=1e3,l=1.5,h=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&Rt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="PersistentStream";class lb{constructor(t,n,s,l,h,m,y,v){this.Mi=t,this.S_=s,this.b_=l,this.connection=h,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=y,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ob(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===dt.RESOURCE_EXHAUSTED?(Zs(n.toString()),Zs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new At(dt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Rt(OE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(Rt(OE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GO extends lb{constructor(t,n,s,l,h,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,m),this.serializer=h}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=X2(this.serializer,t),s=(function(h){if(!("targetChange"in h))return jt.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?jt.min():m.readTime?rs(m.readTime):jt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Bp(this.serializer),n.addTarget=(function(h,m){let y;const v=m.target;if(y=Mp(v)?{documents:tO(h,v)}:{query:eO(h,v).ft},y.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){y.resumeToken=$w(h,m.resumeToken);const T=Vp(h,m.expectedCount);T!==null&&(y.expectedCount=T)}else if(m.snapshotVersion.compareTo(jt.min())>0){y.readTime=kf(h,m.snapshotVersion.toTimestamp());const T=Vp(h,m.expectedCount);T!==null&&(y.expectedCount=T)}return y})(this.serializer,t);const s=iO(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Bp(this.serializer),n.removeTarget=t,this.q_(n)}}class ZO extends lb{constructor(t,n,s,l,h,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,m),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return _e(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,_e(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){_e(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=J2(t.writeResults,t.commitTime),s=rs(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Bp(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>W2(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{}class YO extends KO{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new At(dt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Go(t,Up(n,s),l,h,m))).catch((h=>{throw h.name==="FirebaseError"?(h.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new At(dt.UNKNOWN,h.toString())}))}Ho(t,n,s,l,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,y])=>this.connection.Ho(t,Up(n,s),l,m,y,h))).catch((m=>{throw m.name==="FirebaseError"?(m.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new At(dt.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class QO{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zs(n),this.aa=!1):Rt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="RemoteStore";class $O{constructor(t,n,s,l,h){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((m=>{s.enqueueAndForget((async()=>{sl(this)&&(Rt(Jo,"Restarting streams for network reachability change."),await(async function(v){const T=Ft(v);T.Ea.add(4),await Fc(T),T.Ra.set("Unknown"),T.Ea.delete(4),await sd(T)})(this))}))})),this.Ra=new QO(s,l)}}async function sd(r){if(sl(r))for(const t of r.da)await t(!0)}async function Fc(r){for(const t of r.da)await t(!1)}function ub(r,t){const n=Ft(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),kg(n)?Dg(n):Tu(n).O_()&&Mg(n,t))}function Pg(r,t){const n=Ft(r),s=Tu(n);n.Ia.delete(t),s.O_()&&cb(n,t),n.Ia.size===0&&(s.O_()?s.L_():sl(n)&&n.Ra.set("Unknown"))}function Mg(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(jt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Tu(r).Y_(t)}function cb(r,t){r.Va.Ue(t),Tu(r).Z_(t)}function Dg(r){r.Va=new F2({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),Tu(r).start(),r.Ra.ua()}function kg(r){return sl(r)&&!Tu(r).x_()&&r.Ia.size>0}function sl(r){return Ft(r).Ea.size===0}function hb(r){r.Va=void 0}async function XO(r){r.Ra.set("Online")}async function WO(r){r.Ia.forEach(((t,n)=>{Mg(r,t)}))}async function JO(r,t){hb(r),kg(r)?(r.Ra.ha(t),Dg(r)):r.Ra.set("Unknown")}async function tL(r,t,n){if(r.Ra.set("Online"),t instanceof Qw&&t.state===2&&t.cause)try{await(async function(l,h){const m=h.cause;for(const y of h.targetIds)l.Ia.has(y)&&(await l.remoteSyncer.rejectListen(y,m),l.Ia.delete(y),l.Va.removeTarget(y))})(r,t)}catch(s){Rt(Jo,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Uf(r,s)}else if(t instanceof vf?r.Va.Ze(t):t instanceof Yw?r.Va.st(t):r.Va.tt(t),!n.isEqual(jt.min()))try{const s=await ab(r.localStore);n.compareTo(s)>=0&&await(function(h,m){const y=h.Va.Tt(m);return y.targetChanges.forEach(((v,T)=>{if(v.resumeToken.approximateByteSize()>0){const A=h.Ia.get(T);A&&h.Ia.set(T,A.withResumeToken(v.resumeToken,m))}})),y.targetMismatches.forEach(((v,T)=>{const A=h.Ia.get(v);if(!A)return;h.Ia.set(v,A.withResumeToken(Pn.EMPTY_BYTE_STRING,A.snapshotVersion)),cb(h,v);const C=new Ba(A.target,v,T,A.sequenceNumber);Mg(h,C)})),h.remoteSyncer.applyRemoteEvent(y)})(r,n)}catch(s){Rt(Jo,"Failed to raise snapshot:",s),await Uf(r,s)}}async function Uf(r,t,n){if(!yu(t))throw t;r.Ea.add(1),await Fc(r),r.Ra.set("Offline"),n||(n=()=>ab(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Rt(Jo,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await sd(r)}))}function fb(r,t){return t().catch((n=>Uf(r,n,t)))}async function ad(r){const t=Ft(r),n=Xa(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:yg;for(;eL(t);)try{const l=await kO(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,nL(t,l)}catch(l){await Uf(t,l)}db(t)&&mb(t)}function eL(r){return sl(r)&&r.Ta.length<10}function nL(r,t){r.Ta.push(t);const n=Xa(r);n.O_()&&n.X_&&n.ea(t.mutations)}function db(r){return sl(r)&&!Xa(r).x_()&&r.Ta.length>0}function mb(r){Xa(r).start()}async function iL(r){Xa(r).ra()}async function rL(r){const t=Xa(r);for(const n of r.Ta)t.ea(n.mutations)}async function sL(r,t,n){const s=r.Ta.shift(),l=Rg.from(s,t,n);await fb(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await ad(r)}async function aL(r,t){t&&Xa(r).X_&&await(async function(s,l){if((function(m){return j2(m)&&m!==dt.ABORTED})(l.code)){const h=s.Ta.shift();Xa(s).B_(),await fb(s,(()=>s.remoteSyncer.rejectFailedWrite(h.batchId,l))),await ad(s)}})(r,t),db(r)&&mb(r)}async function LE(r,t){const n=Ft(r);n.asyncQueue.verifyOperationInProgress(),Rt(Jo,"RemoteStore received new credentials");const s=sl(n);n.Ea.add(3),await Fc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await sd(n)}async function oL(r,t){const n=Ft(r);t?(n.Ea.delete(2),await sd(n)):t||(n.Ea.add(2),await Fc(n),n.Ra.set("Unknown"))}function Tu(r){return r.ma||(r.ma=(function(n,s,l){const h=Ft(n);return h.sa(),new GO(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)})(r.datastore,r.asyncQueue,{Xo:XO.bind(null,r),t_:WO.bind(null,r),r_:JO.bind(null,r),H_:tL.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),kg(r)?Dg(r):r.Ra.set("Unknown")):(await r.ma.stop(),hb(r))}))),r.ma}function Xa(r){return r.fa||(r.fa=(function(n,s,l){const h=Ft(n);return h.sa(),new ZO(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:iL.bind(null,r),r_:aL.bind(null,r),ta:rL.bind(null,r),na:sL.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await ad(r)):(await r.fa.stop(),r.Ta.length>0&&(Rt(Jo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(t,n,s,l,h){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=h,this.deferred=new Go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,h){const m=Date.now()+s,y=new Vg(t,n,m,l,h);return y.start(s),y}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new At(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ug(r,t){if(Zs("AsyncQueue",`${t}: ${r}`),yu(r))return new At(dt.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{static emptySet(t){return new iu(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||Pt.comparator(n.key,s.key):(n,s)=>Pt.comparator(n.key,s.key),this.keyedMap=hc(),this.sortedSet=new qe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof iu)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,h=s.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new iu;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.ga=new qe(Pt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Ut(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class hu{constructor(t,n,s,l,h,m,y,v,T){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=h,this.fromCache=m,this.syncStateChanged=y,this.excludesMetadataChanges=v,this.hasCachedResults=T}static fromInitialDocuments(t,n,s,l,h){const m=[];return n.forEach((y=>{m.push({type:0,doc:y})})),new hu(t,n,iu.emptySet(n),m,s,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Jf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class uL{constructor(){this.queries=PE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=Ft(n),h=l.queries;l.queries=PE(),h.forEach(((m,y)=>{for(const v of y.Sa)v.onError(s)}))})(this,new At(dt.ABORTED,"Firestore shutting down"))}}function PE(){return new rl((r=>Dw(r)),Jf)}async function cL(r,t){const n=Ft(r);let s=3;const l=t.query;let h=n.queries.get(l);h?!h.ba()&&t.Da()&&(s=2):(h=new lL,s=t.Da()?0:1);try{switch(s){case 0:h.wa=await n.onListen(l,!0);break;case 1:h.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(m){const y=Ug(m,`Initialization of query '${Xl(t.query)}' failed`);return void t.onError(y)}n.queries.set(l,h),h.Sa.push(t),t.va(n.onlineState),h.wa&&t.Fa(h.wa)&&zg(n)}async function hL(r,t){const n=Ft(r),s=t.query;let l=3;const h=n.queries.get(s);if(h){const m=h.Sa.indexOf(t);m>=0&&(h.Sa.splice(m,1),h.Sa.length===0?l=t.Da()?0:1:!h.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function fL(r,t){const n=Ft(r);let s=!1;for(const l of t){const h=l.query,m=n.queries.get(h);if(m){for(const y of m.Sa)y.Fa(l)&&(s=!0);m.wa=l}}s&&zg(n)}function dL(r,t,n){const s=Ft(r),l=s.queries.get(t);if(l)for(const h of l.Sa)h.onError(n);s.queries.delete(t)}function zg(r){r.Ca.forEach((t=>{t.next()}))}var qp,ME;(ME=qp||(qp={})).Ma="default",ME.Cache="cache";class mL{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new hu(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=hu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==qp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t){this.key=t}}class gb{constructor(t){this.key=t}}class pL{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ae(),this.mutatedKeys=ae(),this.eu=kw(t),this.tu=new iu(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new NE,l=n?n.tu:this.tu;let h=n?n.mutatedKeys:this.mutatedKeys,m=l,y=!1;const v=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,T=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((A,C)=>{const O=l.get(A),j=td(this.query,C)?C:null,J=!!O&&this.mutatedKeys.has(O.key),W=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let Q=!1;O&&j?O.data.isEqual(j.data)?J!==W&&(s.track({type:3,doc:j}),Q=!0):this.su(O,j)||(s.track({type:2,doc:j}),Q=!0,(v&&this.eu(j,v)>0||T&&this.eu(j,T)<0)&&(y=!0)):!O&&j?(s.track({type:0,doc:j}),Q=!0):O&&!j&&(s.track({type:1,doc:O}),Q=!0,(v||T)&&(y=!0)),Q&&(j?(m=m.add(j),h=W?h.add(A):h.delete(A)):(m=m.delete(A),h=h.delete(A)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const A=this.query.limitType==="F"?m.last():m.first();m=m.delete(A.key),h=h.delete(A.key),s.track({type:1,doc:A})}return{tu:m,iu:s,Cs:y,mutatedKeys:h}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const m=t.iu.ya();m.sort(((A,C)=>(function(j,J){const W=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ut(20277,{Rt:Q})}};return W(j)-W(J)})(A.type,C.type)||this.eu(A.doc,C.doc))),this.ou(s),l=l??!1;const y=n&&!l?this._u():[],v=this.Xa.size===0&&this.current&&!l?1:0,T=v!==this.Za;return this.Za=v,m.length!==0||T?{snapshot:new hu(this.query,t.tu,h,m,t.mutatedKeys,v===0,T,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new NE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ae(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new gb(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new pb(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=ae();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return hu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bg="SyncEngine";class gL{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class _L{constructor(t){this.key=t,this.hu=!1}}class yL{constructor(t,n,s,l,h,m){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new rl((y=>Dw(y)),Jf),this.Iu=new Map,this.Eu=new Set,this.du=new qe(Pt.comparator),this.Au=new Map,this.Ru=new xg,this.Vu={},this.mu=new Map,this.fu=cu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function vL(r,t,n=!0){const s=wb(r);let l;const h=s.Tu.get(t);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.lu()):l=await _b(s,t,n,!0),l}async function TL(r,t){const n=wb(r);await _b(n,t,!0,!1)}async function _b(r,t,n,s){const l=await VO(r.localStore,is(t)),h=l.targetId,m=r.sharedClientState.addLocalQueryTarget(h,n);let y;return s&&(y=await EL(r,t,h,m==="current",l.resumeToken)),r.isPrimaryClient&&n&&ub(r.remoteStore,l),y}async function EL(r,t,n,s,l){r.pu=(C,O,j)=>(async function(W,Q,at,ut){let ft=Q.view.ru(at);ft.Cs&&(ft=await RE(W.localStore,Q.query,!1).then((({documents:D})=>Q.view.ru(D,ft))));const xt=ut&&ut.targetChanges.get(Q.targetId),kt=ut&&ut.targetMismatches.get(Q.targetId)!=null,Dt=Q.view.applyChanges(ft,W.isPrimaryClient,xt,kt);return kE(W,Q.targetId,Dt.au),Dt.snapshot})(r,C,O,j);const h=await RE(r.localStore,t,!0),m=new pL(t,h.Qs),y=m.ru(h.documents),v=qc.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),T=m.applyChanges(y,r.isPrimaryClient,v);kE(r,n,T.au);const A=new gL(t,n,m);return r.Tu.set(t,A),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),T.snapshot}async function wL(r,t,n){const s=Ft(r),l=s.Tu.get(t),h=s.Iu.get(l.targetId);if(h.length>1)return s.Iu.set(l.targetId,h.filter((m=>!Jf(m,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await jp(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Pg(s.remoteStore,l.targetId),Fp(s,l.targetId)})).catch(_u)):(Fp(s,l.targetId),await jp(s.localStore,l.targetId,!0))}async function bL(r,t){const n=Ft(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Pg(n.remoteStore,s.targetId))}async function SL(r,t,n){const s=LL(r);try{const l=await(function(m,y){const v=Ft(m),T=Le.now(),A=y.reduce(((j,J)=>j.add(J.key)),ae());let C,O;return v.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let J=Ks(),W=ae();return v.Ns.getEntries(j,A).next((Q=>{J=Q,J.forEach(((at,ut)=>{ut.isValidDocument()||(W=W.add(at))}))})).next((()=>v.localDocuments.getOverlayedDocuments(j,J))).next((Q=>{C=Q;const at=[];for(const ut of y){const ft=k2(ut,C.get(ut.key).overlayedDocument);ft!=null&&at.push(new eo(ut.key,ft,Cw(ft.value.mapValue),Ir.exists(!0)))}return v.mutationQueue.addMutationBatch(j,T,at,y)})).next((Q=>{O=Q;const at=Q.applyToLocalDocumentSet(C,W);return v.documentOverlayCache.saveOverlays(j,Q.batchId,at)}))})).then((()=>({batchId:O.batchId,changes:Uw(C)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(m,y,v){let T=m.Vu[m.currentUser.toKey()];T||(T=new qe(se)),T=T.insert(y,v),m.Vu[m.currentUser.toKey()]=T})(s,l.batchId,n),await Gc(s,l.changes),await ad(s.remoteStore)}catch(l){const h=Ug(l,"Failed to persist write");n.reject(h)}}async function yb(r,t){const n=Ft(r);try{const s=await MO(n.localStore,t);t.targetChanges.forEach(((l,h)=>{const m=n.Au.get(h);m&&(_e(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?m.hu=!0:l.modifiedDocuments.size>0?_e(m.hu,14607):l.removedDocuments.size>0&&(_e(m.hu,42227),m.hu=!1))})),await Gc(n,s,t)}catch(s){await _u(s)}}function DE(r,t,n){const s=Ft(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((h,m)=>{const y=m.view.va(t);y.snapshot&&l.push(y.snapshot)})),(function(m,y){const v=Ft(m);v.onlineState=y;let T=!1;v.queries.forEach(((A,C)=>{for(const O of C.Sa)O.va(y)&&(T=!0)})),T&&zg(v)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function AL(r,t,n){const s=Ft(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),h=l&&l.key;if(h){let m=new qe(Pt.comparator);m=m.insert(h,qn.newNoDocument(h,jt.min()));const y=ae().add(h),v=new id(jt.min(),new Map,new qe(se),m,y);await yb(s,v),s.du=s.du.remove(h),s.Au.delete(t),jg(s)}else await jp(s.localStore,t,!1).then((()=>Fp(s,t,n))).catch(_u)}async function RL(r,t){const n=Ft(r),s=t.batch.batchId;try{const l=await PO(n.localStore,t);Tb(n,s,null),vb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Gc(n,l)}catch(l){await _u(l)}}async function CL(r,t,n){const s=Ft(r);try{const l=await(function(m,y){const v=Ft(m);return v.persistence.runTransaction("Reject batch","readwrite-primary",(T=>{let A;return v.mutationQueue.lookupMutationBatch(T,y).next((C=>(_e(C!==null,37113),A=C.keys(),v.mutationQueue.removeMutationBatch(T,C)))).next((()=>v.mutationQueue.performConsistencyCheck(T))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(T,A,y))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,A))).next((()=>v.localDocuments.getDocuments(T,A)))}))})(s.localStore,t);Tb(s,t,n),vb(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Gc(s,l)}catch(l){await _u(l)}}function vb(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function Tb(r,t,n){const s=Ft(r);let l=s.Vu[s.currentUser.toKey()];if(l){const h=l.get(t);h&&(n?h.reject(n):h.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function Fp(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||Eb(r,s)}))}function Eb(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(Pg(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),jg(r))}function kE(r,t,n){for(const s of n)s instanceof pb?(r.Ru.addReference(s.key,t),IL(r,s)):s instanceof gb?(Rt(Bg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||Eb(r,s.key)):Ut(19791,{wu:s})}function IL(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(Rt(Bg,"New document in limbo: "+n),r.Eu.add(s),jg(r))}function jg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new Pt(Oe.fromString(t)),s=r.fu.next();r.Au.set(s,new _L(n)),r.du=r.du.insert(n,s),ub(r.remoteStore,new Ba(is(bg(n.path)),s,"TargetPurposeLimboResolution",$f.ce))}}async function Gc(r,t,n){const s=Ft(r),l=[],h=[],m=[];s.Tu.isEmpty()||(s.Tu.forEach(((y,v)=>{m.push(s.pu(v,t,n).then((T=>{if((T||n)&&s.isPrimaryClient){const A=T?!T.fromCache:n?.targetChanges.get(v.targetId)?.current;s.sharedClientState.updateQueryState(v.targetId,A?"current":"not-current")}if(T){l.push(T);const A=Lg.As(v.targetId,T);h.push(A)}})))})),await Promise.all(m),s.Pu.H_(l),await(async function(v,T){const A=Ft(v);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>mt.forEach(T,(O=>mt.forEach(O.Es,(j=>A.persistence.referenceDelegate.addReference(C,O.targetId,j))).next((()=>mt.forEach(O.ds,(j=>A.persistence.referenceDelegate.removeReference(C,O.targetId,j)))))))))}catch(C){if(!yu(C))throw C;Rt(Ng,"Failed to update sequence numbers: "+C)}for(const C of T){const O=C.targetId;if(!C.fromCache){const j=A.Ms.get(O),J=j.snapshotVersion,W=j.withLastLimboFreeSnapshotVersion(J);A.Ms=A.Ms.insert(O,W)}}})(s.localStore,h))}async function xL(r,t){const n=Ft(r);if(!n.currentUser.isEqual(t)){Rt(Bg,"User change. New user:",t.toKey());const s=await sb(n.localStore,t);n.currentUser=t,(function(h,m){h.mu.forEach((y=>{y.forEach((v=>{v.reject(new At(dt.CANCELLED,m))}))})),h.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Gc(n,s.Ls)}}function OL(r,t){const n=Ft(r),s=n.Au.get(t);if(s&&s.hu)return ae().add(s.key);{let l=ae();const h=n.Iu.get(t);if(!h)return l;for(const m of h){const y=n.Tu.get(m);l=l.unionWith(y.view.nu)}return l}}function wb(r){const t=Ft(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=yb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=OL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=AL.bind(null,t),t.Pu.H_=fL.bind(null,t.eventManager),t.Pu.yu=dL.bind(null,t.eventManager),t}function LL(r){const t=Ft(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=RL.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=CL.bind(null,t),t}class zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=rd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return NO(this.persistence,new xO,t.initialUser,this.serializer)}Cu(t){return new rb(Og.mi,this.serializer)}Du(t){return new zO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zf.provider={build:()=>new zf};class NL extends zf{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){_e(this.persistence.referenceDelegate instanceof Vf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new mO(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?_i.withCacheSize(this.cacheSizeBytes):_i.DEFAULT;return new rb((s=>Vf.mi(s,n)),this.serializer)}}class Gp{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>DE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=xL.bind(null,this.syncEngine),await oL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new uL})()}createDatastore(t){const n=rd(t.databaseInfo.databaseId),s=(function(h){return new FO(h)})(t.databaseInfo);return(function(h,m,y,v){return new YO(h,m,y,v)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,h,m,y){return new $O(s,l,h,m,y)})(this.localStore,this.datastore,t.asyncQueue,(n=>DE(this.syncEngine,n,0)),(function(){return xE.v()?new xE:new BO})())}createSyncEngine(t,n){return(function(l,h,m,y,v,T,A){const C=new yL(l,h,m,y,v,T);return A&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ft(n);Rt(Jo,"RemoteStore shutting down."),s.Ea.add(5),await Fc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Gp.provider={build:()=>new Gp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Zs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="FirestoreClient";class ML{constructor(t,n,s,l,h){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Hn.UNAUTHENTICATED,this.clientId=_g.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,(async m=>{Rt(Wa,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(s,(m=>(Rt(Wa,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Ug(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function gp(r,t){r.asyncQueue.verifyOperationInProgress(),Rt(Wa,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await sb(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function VE(r,t){r.asyncQueue.verifyOperationInProgress();const n=await DL(r);Rt(Wa,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>LE(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>LE(t.remoteStore,l))),r._onlineComponents=t}async function DL(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Rt(Wa,"Using user provided OfflineComponentProvider");try{await gp(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===dt.FAILED_PRECONDITION||l.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;au("Error using user provided cache. Falling back to memory cache: "+n),await gp(r,new zf)}}else Rt(Wa,"Using default OfflineComponentProvider"),await gp(r,new NL(void 0));return r._offlineComponents}async function bb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Rt(Wa,"Using user provided OnlineComponentProvider"),await VE(r,r._uninitializedComponentsProvider._online)):(Rt(Wa,"Using default OnlineComponentProvider"),await VE(r,new Gp))),r._onlineComponents}function kL(r){return bb(r).then((t=>t.syncEngine))}async function UE(r){const t=await bb(r),n=t.eventManager;return n.onListen=vL.bind(null,t.syncEngine),n.onUnlisten=wL.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=TL.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=bL.bind(null,t.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="firestore.googleapis.com",BE=!0;class jE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new At(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ab,this.ssl=BE}else this.host=t.host,this.ssl=t.ssl??BE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ib;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<fO)throw new At(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Qx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sb(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new At(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new At(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new At(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class od{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new At(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new At(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new zx;switch(s.type){case"firstParty":return new qx(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new At(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=zE.get(n);s&&(Rt("ComponentProvider","Removing Datastore"),zE.delete(n),s.terminate())})(this),Promise.resolve()}}function VL(r,t,n,s={}){r=Fa(r,od);const l=Ja(t),h=r._getSettings(),m={...h,emulatorOptions:r._getEmulatorOptions()},y=`${t}:${n}`;l&&(eg(`https://${y}`),ng("Firestore",!0)),h.host!==Ab&&h.host!==y&&au("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...h,host:y,ssl:l,emulatorOptions:s};if(!Qo(v,m)&&(r._setSettings(v),s.mockUserToken)){let T,A;if(typeof s.mockUserToken=="string")T=s.mockUserToken,A=Hn.MOCK_USER;else{T=R0(s.mockUserToken,r._app?.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new At(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Hn(C)}r._authCredentials=new Bx(new pw(T,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new al(this.firestore,t,this._query)}}class mn{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ga(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new mn(this.firestore,t,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(jc(n,mn._jsonSchema))return new mn(t,s||null,new Pt(Oe.fromString(n.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:dn("string",mn._jsonSchemaVersion),referencePath:dn("string")};class Ga extends al{constructor(t,n,s){super(t,n,bg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new mn(this.firestore,null,new Pt(t))}withConverter(t){return new Ga(this.firestore,t,this._path)}}function ld(r,t,...n){if(r=He(r),gw("collection","path",t),r instanceof od){const s=Oe.fromString(t,...n);return JT(s),new Ga(r,null,s)}{if(!(r instanceof mn||r instanceof Ga))throw new At(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Oe.fromString(t,...n));return JT(s),new Ga(r.firestore,null,s)}}function Bf(r,t,...n){if(r=He(r),arguments.length===1&&(t=_g.newId()),gw("doc","path",t),r instanceof od){const s=Oe.fromString(t,...n);return WT(s),new mn(r,null,new Pt(s))}{if(!(r instanceof mn||r instanceof Ga))throw new At(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Oe.fromString(t,...n));return WT(s),new mn(r.firestore,r instanceof Ga?r.converter:null,new Pt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="AsyncQueue";class qE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ob(this,"async_queue_retry"),this._c=()=>{const s=pp();s&&Rt(HE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=pp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=pp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Go;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!yu(t))throw t;Rt(HE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Zs("INTERNAL UNHANDLED ERROR: ",FE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=Vg.createAndSchedule(this,t,n,s,(h=>this.hc(h)));return this.tc.push(l),l}uc(){this.nc&&Ut(47125,{Pc:FE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function FE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const h of s)if(h in l&&typeof l[h]=="function")return!0;return!1})(r,["next","error","complete"])}class fu extends od{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new qE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new qE(t),this._firestoreClient=void 0,await t}}}function UL(r,t){const n=typeof r=="object"?r:sg(),s=typeof r=="string"?r:Nf,l=Gf(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const h=b0("firestore");h&&VL(l,...h)}return l}function Rb(r){if(r._terminated)throw new At(dt.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||zL(r),r._firestoreClient}function zL(r){const t=r._freezeSettings(),n=(function(l,h,m,y){return new a2(l,h,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Sb(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new ML(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const h=l?._online.build();return{_offline:l?._offline.build(h),_online:h}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new lr(Pn.fromBase64String(t))}catch(n){throw new At(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new lr(Pn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(jc(t,lr._jsonSchema))return lr.fromBase64String(t.bytes)}}lr._jsonSchemaVersion="firestore/bytes/1.0",lr._jsonSchema={type:dn("string",lr._jsonSchemaVersion),bytes:dn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new At(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new At(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new At(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return se(this._lat,t._lat)||se(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ss._jsonSchemaVersion}}static fromJSON(t){if(jc(t,ss._jsonSchema))return new ss(t.latitude,t.longitude)}}ss._jsonSchemaVersion="firestore/geoPoint/1.0",ss._jsonSchema={type:dn("string",ss._jsonSchemaVersion),latitude:dn("number"),longitude:dn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==l[h])return!1;return!0})(this._values,t._values)}toJSON(){return{type:as._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(jc(t,as._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new as(t.vectorValues);throw new At(dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}as._jsonSchemaVersion="firestore/vectorValue/1.0",as._jsonSchema={type:dn("string",as._jsonSchemaVersion),vectorValues:dn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=/^__.*__$/;class jL{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new eo(t,this.data,this.fieldMask,n,this.fieldTransforms):new Hc(t,this.data,n,this.fieldTransforms)}}class Cb{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new eo(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ib(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ut(40011,{Ac:r})}}class Hg{constructor(t,n,s,l,h,m){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Hg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return jf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Ib(this.Ac)&&BL.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class HL{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||rd(t)}Cc(t,n,s,l=!1){return new Hg({Ac:t,methodName:n,Dc:s,path:Nn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qg(r){const t=r._freezeSettings(),n=rd(r._databaseId);return new HL(r._databaseId,!!t.ignoreUndefinedProperties,n)}function qL(r,t,n,s,l,h={}){const m=r.Cc(h.merge||h.mergeFields?2:0,t,n,l);Gg("Data must be an object, but it was:",m,s);const y=xb(s,m);let v,T;if(h.merge)v=new Vi(m.fieldMask),T=m.fieldTransforms;else if(h.mergeFields){const A=[];for(const C of h.mergeFields){const O=Zp(t,C,n);if(!m.contains(O))throw new At(dt.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);Lb(A,O)||A.push(O)}v=new Vi(A),T=m.fieldTransforms.filter((C=>v.covers(C.field)))}else v=null,T=m.fieldTransforms;return new jL(new yi(y),v,T)}class hd extends cd{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof hd}}class Fg extends cd{_toFieldTransform(t){return new N2(t.path,new Oc)}isEqual(t){return t instanceof Fg}}function FL(r,t,n,s){const l=r.Cc(1,t,n);Gg("Data must be an object, but it was:",l,s);const h=[],m=yi.empty();to(s,((v,T)=>{const A=Zg(t,v,n);T=He(T);const C=l.yc(A);if(T instanceof hd)h.push(A);else{const O=Zc(T,C);O!=null&&(h.push(A),m.set(A,O))}}));const y=new Vi(h);return new Cb(m,y,l.fieldTransforms)}function GL(r,t,n,s,l,h){const m=r.Cc(1,t,n),y=[Zp(t,s,n)],v=[l];if(h.length%2!=0)throw new At(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<h.length;O+=2)y.push(Zp(t,h[O])),v.push(h[O+1]);const T=[],A=yi.empty();for(let O=y.length-1;O>=0;--O)if(!Lb(T,y[O])){const j=y[O];let J=v[O];J=He(J);const W=m.yc(j);if(J instanceof hd)T.push(j);else{const Q=Zc(J,W);Q!=null&&(T.push(j),A.set(j,Q))}}const C=new Vi(T);return new Cb(A,C,m.fieldTransforms)}function ZL(r,t,n,s=!1){return Zc(n,r.Cc(s?4:3,t))}function Zc(r,t){if(Ob(r=He(r)))return Gg("Unsupported field value:",t,r),xb(r,t);if(r instanceof cd)return(function(s,l){if(!Ib(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(l);h&&l.fieldTransforms.push(h)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const h=[];let m=0;for(const y of s){let v=Zc(y,l.wc(m));v==null&&(v={nullValue:"NULL_VALUE"}),h.push(v),m++}return{arrayValue:{values:h}}})(r,t)}return(function(s,l){if((s=He(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return x2(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=Le.fromDate(s);return{timestampValue:kf(l.serializer,h)}}if(s instanceof Le){const h=new Le(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:kf(l.serializer,h)}}if(s instanceof ss)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof lr)return{bytesValue:$w(l.serializer,s._byteString)};if(s instanceof mn){const h=l.databaseId,m=s.firestore._databaseId;if(!m.isEqual(h))throw l.Sc(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Ig(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof as)return(function(m,y){return{mapValue:{fields:{[Aw]:{stringValue:Rw},[Pf]:{arrayValue:{values:m.toArray().map((T=>{if(typeof T!="number")throw y.Sc("VectorValues must only contain numeric values.");return Sg(y.serializer,T)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Qf(s)}`)})(r,t)}function xb(r,t){const n={};return vw(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):to(r,((s,l)=>{const h=Zc(l,t.mc(s));h!=null&&(n[s]=h)})),{mapValue:{fields:n}}}function Ob(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Le||r instanceof ss||r instanceof lr||r instanceof mn||r instanceof cd||r instanceof as)}function Gg(r,t,n){if(!Ob(n)||!_w(n)){const s=Qf(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Zp(r,t,n){if((t=He(t))instanceof ud)return t._internalPath;if(typeof t=="string")return Zg(r,t);throw jf("Field path arguments must be of type string or ",r,!1,void 0,n)}const KL=new RegExp("[~\\*/\\[\\]]");function Zg(r,t,n){if(t.search(KL)>=0)throw jf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new ud(...t.split("."))._internalPath}catch{throw jf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function jf(r,t,n,s,l){const h=s&&!s.isEmpty(),m=l!==void 0;let y=`Function ${t}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let v="";return(h||m)&&(v+=" (found",h&&(v+=` in field ${s}`),m&&(v+=` in document ${l}`),v+=")"),new At(dt.INVALID_ARGUMENT,y+r+v)}function Lb(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(t,n,s,l,h){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new YL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(fd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class YL extends Nb{data(){return super.data()}}function fd(r,t){return typeof t=="string"?Zg(r,t):t instanceof ud?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new At(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kg{}class Pb extends Kg{}function Yg(r,t,...n){let s=[];t instanceof Kg&&s.push(t),s=s.concat(n),(function(h){const m=h.filter((v=>v instanceof Qg)).length,y=h.filter((v=>v instanceof dd)).length;if(m>1||m>0&&y>0)throw new At(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class dd extends Pb{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new dd(t,n,s)}_apply(t){const n=this._parse(t);return Db(t._query,n),new al(t.firestore,t.converter,Dp(t._query,n))}_parse(t){const n=qg(t.firestore);return(function(h,m,y,v,T,A,C){let O;if(T.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new At(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){KE(C,A);const J=[];for(const W of C)J.push(ZE(v,h,W));O={arrayValue:{values:J}}}else O=ZE(v,h,C)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||KE(C,A),O=ZL(y,m,C,A==="in"||A==="not-in");return fn.create(T,A,O)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Mb(r,t,n){const s=t,l=fd("where",r);return dd._create(l,s,n)}class Qg extends Kg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Qg(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:xr.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,h){let m=l;const y=h.getFlattenedFilters();for(const v of y)Db(m,v),m=Dp(m,v)})(t._query,n),new al(t.firestore,t.converter,Dp(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $g extends Pb{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new $g(t,n)}_apply(t){const n=(function(l,h,m){if(l.startAt!==null)throw new At(dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new At(dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xc(h,m)})(t._query,this._field,this._direction);return new al(t.firestore,t.converter,(function(l,h){const m=l.explicitOrderBy.concat([h]);return new vu(l.path,l.collectionGroup,m,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,n))}}function $L(r,t="asc"){const n=t,s=fd("orderBy",r);return $g._create(s,n)}function ZE(r,t,n){if(typeof(n=He(n))=="string"){if(n==="")throw new At(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mw(t)&&n.indexOf("/")!==-1)throw new At(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Oe.fromString(n));if(!Pt.isDocumentKey(s))throw new At(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return oE(r,new Pt(s))}if(n instanceof mn)return oE(r,n._key);throw new At(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qf(n)}.`)}function KE(r,t){if(!Array.isArray(r)||r.length===0)throw new At(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Db(r,t){const n=(function(l,h){for(const m of l)for(const y of m.getFlattenedFilters())if(h.indexOf(y.op)>=0)return y.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new At(dt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new At(dt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class XL{convertValue(t,n="none"){switch($a(t)){case 0:return null;case 1:return t.booleanValue;case 2:return rn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Qa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Ut(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return to(t,((l,h)=>{s[l]=this.convertValue(h,n)})),s}convertVectorValue(t){const n=t.fields?.[Pf].arrayValue?.values?.map((s=>rn(s.doubleValue)));return new as(n)}convertGeoPoint(t){return new ss(rn(t.latitude),rn(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Wf(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Rc(t));default:return null}}convertTimestamp(t){const n=Ya(t);return new Le(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Oe.fromString(t);_e(nb(s),9688,{name:t});const l=new Cc(s.get(1),s.get(3)),h=new Pt(s.popFirst(5));return l.isEqual(n)||Zs(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(r,t,n){let s;return s=r?r.toFirestore(t):t,s}class dc{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Zo extends Nb{constructor(t,n,s,l,h,m){super(t,n,s,l,m),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(fd("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new At(dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Zo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zo._jsonSchema={type:dn("string",Zo._jsonSchemaVersion),bundleSource:dn("string","DocumentSnapshot"),bundleName:dn("string"),bundle:dn("string")};class Tf extends Zo{data(t={}){return super.data(t)}}class ru{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new dc(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Tf(this._firestore,this._userDataWriter,s.key,s,new dc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new At(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,h){if(l._snapshot.oldDocs.isEmpty()){let m=0;return l._snapshot.docChanges.map((y=>{const v=new Tf(l._firestore,l._userDataWriter,y.doc.key,y.doc,new dc(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);return y.doc,{type:"added",doc:v,oldIndex:-1,newIndex:m++}}))}{let m=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((y=>h||y.type!==3)).map((y=>{const v=new Tf(l._firestore,l._userDataWriter,y.doc.key,y.doc,new dc(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);let T=-1,A=-1;return y.type!==0&&(T=m.indexOf(y.doc.key),m=m.delete(y.doc.key)),y.type!==1&&(m=m.add(y.doc),A=m.indexOf(y.doc.key)),{type:JL(y.type),doc:v,oldIndex:T,newIndex:A}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new At(dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ru._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=_g.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((h=>{h._document!==null&&(n.push(h._document),s.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),l.push(h.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function JL(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ut(61501,{type:r})}}ru._jsonSchemaVersion="firestore/querySnapshot/1.0",ru._jsonSchema={type:dn("string",ru._jsonSchemaVersion),bundleSource:dn("string","QuerySnapshot"),bundleName:dn("string"),bundle:dn("string")};class kb extends XL{constructor(t){super(),this.firestore=t}convertBytes(t){return new lr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function tN(r,t,n,...s){r=Fa(r,mn);const l=Fa(r.firestore,fu),h=qg(l);let m;return m=typeof(t=He(t))=="string"||t instanceof ud?GL(h,"updateDoc",r._key,t,n,s):FL(h,"updateDoc",r._key,t),Wg(l,[m.toMutation(r._key,Ir.exists(!0))])}function YE(r){return Wg(Fa(r.firestore,fu),[new Ag(r._key,Ir.none())])}function eN(r,t){const n=Fa(r.firestore,fu),s=Bf(r),l=WL(r.converter,t);return Wg(n,[qL(qg(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Ir.exists(!1))]).then((()=>s))}function Xg(r,...t){r=He(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||GE(t[s])||(n=t[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(GE(t[s])){const v=t[s];t[s]=v.next?.bind(v),t[s+1]=v.error?.bind(v),t[s+2]=v.complete?.bind(v)}let h,m,y;if(r instanceof mn)m=Fa(r.firestore,fu),y=bg(r._key.path),h={next:v=>{t[s]&&t[s](nN(m,r,v))},error:t[s+1],complete:t[s+2]};else{const v=Fa(r,al);m=Fa(v.firestore,fu),y=v._query;const T=new kb(m);h={next:A=>{t[s]&&t[s](new ru(m,T,v,A))},error:t[s+1],complete:t[s+2]},QL(r._query)}return(function(T,A,C,O){const j=new PL(O),J=new mL(A,j,C);return T.asyncQueue.enqueueAndForget((async()=>cL(await UE(T),J))),()=>{j.Nu(),T.asyncQueue.enqueueAndForget((async()=>hL(await UE(T),J)))}})(Rb(m),y,l,h)}function Wg(r,t){return(function(s,l){const h=new Go;return s.asyncQueue.enqueueAndForget((async()=>SL(await kL(s),l,h))),h.promise})(Rb(r),t)}function nN(r,t,n){const s=n.docs.get(t._key),l=new kb(r);return new Zo(r,l,t._key,s,new dc(n.hasPendingWrites,n.fromCache),t.converter)}function iN(){return new Fg("serverTimestamp")}(function(t,n=!0){(function(l){gu=l})(il),$o(new Za("firestore",((s,{instanceIdentifier:l,options:h})=>{const m=s.getProvider("app").getImmediate(),y=new fu(new jx(s.getProvider("auth-internal")),new Fx(m,s.getProvider("app-check-internal")),(function(T,A){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new At(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cc(T.options.projectId,A)})(m,l),m);return h={useFetchStreams:n,...h},y._setSettings(h),y}),"PUBLIC").setMultipleInstances(!0)),es(YT,QT,t),es(YT,QT,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firebasestorage.googleapis.com",Ub="storageBucket",rN=120*1e3,sN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We extends hs{constructor(t,n,s=0){super(_p(t),`Firebase Storage: ${n} (${_p(t)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,We.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return _p(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xe;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xe||(Xe={}));function _p(r){return"storage/"+r}function Jg(){const r="An unknown error occurred, please check the error payload for server response.";return new We(Xe.UNKNOWN,r)}function aN(r){return new We(Xe.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function oN(r){return new We(Xe.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lN(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new We(Xe.UNAUTHENTICATED,r)}function uN(){return new We(Xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cN(r){return new We(Xe.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function hN(){return new We(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fN(){return new We(Xe.CANCELED,"User canceled the upload/download.")}function dN(r){return new We(Xe.INVALID_URL,"Invalid URL '"+r+"'.")}function mN(r){return new We(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function pN(){return new We(Xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ub+"' property when initializing the app?")}function gN(){return new We(Xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _N(){return new We(Xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yN(r){return new We(Xe.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Kp(r){return new We(Xe.INVALID_ARGUMENT,r)}function zb(){return new We(Xe.APP_DELETED,"The Firebase app was deleted.")}function vN(r){return new We(Xe.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ec(r,t){return new We(Xe.INVALID_FORMAT,"String does not match format '"+r+"': "+t)}function uc(r){throw new We(Xe.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let s;try{s=Ui.makeFromUrl(t,n)}catch{return new Ui(t,"")}if(s.path==="")return s;throw mN(t)}static makeFromUrl(t,n){let s=null;const l="([A-Za-z0-9.\\-_]+)";function h(xt){xt.path.charAt(xt.path.length-1)==="/"&&(xt.path_=xt.path_.slice(0,-1))}const m="(/(.*))?$",y=new RegExp("^gs://"+l+m,"i"),v={bucket:1,path:3};function T(xt){xt.path_=decodeURIComponent(xt.path)}const A="v[A-Za-z0-9_]+",C=n.replace(/[.]/g,"\\."),O="(/([^?#]*).*)?$",j=new RegExp(`^https?://${C}/${A}/b/${l}/o${O}`,"i"),J={bucket:1,path:3},W=n===Vb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,Q="([^?#]*)",at=new RegExp(`^https?://${W}/${l}/${Q}`,"i"),ft=[{regex:y,indices:v,postModify:h},{regex:j,indices:J,postModify:T},{regex:at,indices:{bucket:1,path:2},postModify:T}];for(let xt=0;xt<ft.length;xt++){const kt=ft[xt],Dt=kt.regex.exec(t);if(Dt){const D=Dt[kt.indices.bucket];let N=Dt[kt.indices.path];N||(N=""),s=new Ui(D,N),kt.postModify(s);break}}if(s==null)throw dN(t);return s}}class TN{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(r,t,n){let s=1,l=null,h=null,m=!1,y=0;function v(){return y===2}let T=!1;function A(...Q){T||(T=!0,t.apply(null,Q))}function C(Q){l=setTimeout(()=>{l=null,r(j,v())},Q)}function O(){h&&clearTimeout(h)}function j(Q,...at){if(T){O();return}if(Q){O(),A.call(null,Q,...at);return}if(v()||m){O(),A.call(null,Q,...at);return}s<64&&(s*=2);let ft;y===1?(y=2,ft=0):ft=(s+Math.random())*1e3,C(ft)}let J=!1;function W(Q){J||(J=!0,O(),!T&&(l!==null?(Q||(y=2),clearTimeout(l),C(0)):Q||(y=1)))}return C(0),h=setTimeout(()=>{m=!0,W(!0)},n),W}function wN(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(r){return r!==void 0}function SN(r){return typeof r=="object"&&!Array.isArray(r)}function t_(r){return typeof r=="string"||r instanceof String}function QE(r){return e_()&&r instanceof Blob}function e_(){return typeof Blob<"u"}function $E(r,t,n,s){if(s<t)throw Kp(`Invalid value for '${r}'. Expected ${t} or greater.`);if(s>n)throw Kp(`Invalid value for '${r}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(r,t,n){let s=t;return n==null&&(s=`https://${t}`),`${n}://${s}/v0${r}`}function Bb(r){const t=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const l=t(s)+"="+t(r[s]);n=n+l+"&"}return n=n.slice(0,-1),n}var Ko;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Ko||(Ko={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(r,t){const n=r>=500&&r<600,l=[408,429].indexOf(r)!==-1,h=t.indexOf(r)!==-1;return n||l||h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(t,n,s,l,h,m,y,v,T,A,C,O=!0,j=!1){this.url_=t,this.method_=n,this.headers_=s,this.body_=l,this.successCodes_=h,this.additionalRetryCodes_=m,this.callback_=y,this.errorCallback_=v,this.timeout_=T,this.progressCallback_=A,this.connectionFactory_=C,this.retry=O,this.isUsingEmulator=j,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((J,W)=>{this.resolve_=J,this.reject_=W,this.start_()})}start_(){const t=(s,l)=>{if(l){s(!1,new of(!1,null,!0));return}const h=this.connectionFactory_();this.pendingConnection_=h;const m=y=>{const v=y.loaded,T=y.lengthComputable?y.total:-1;this.progressCallback_!==null&&this.progressCallback_(v,T)};this.progressCallback_!==null&&h.addUploadProgressListener(m),h.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&h.removeUploadProgressListener(m),this.pendingConnection_=null;const y=h.getErrorCode()===Ko.NO_ERROR,v=h.getStatus();if(!y||AN(v,this.additionalRetryCodes_)&&this.retry){const A=h.getErrorCode()===Ko.ABORT;s(!1,new of(!1,null,A));return}const T=this.successCodes_.indexOf(v)!==-1;s(!0,new of(T,h))})},n=(s,l)=>{const h=this.resolve_,m=this.reject_,y=l.connection;if(l.wasSuccessCode)try{const v=this.callback_(y,y.getResponse());bN(v)?h(v):h()}catch(v){m(v)}else if(y!==null){const v=Jg();v.serverResponse=y.getErrorText(),this.errorCallback_?m(this.errorCallback_(y,v)):m(v)}else if(l.canceled){const v=this.appDelete_?zb():fN();m(v)}else{const v=hN();m(v)}};this.canceled_?n(!1,new of(!1,null,!0)):this.backoffId_=EN(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&wN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class of{constructor(t,n,s){this.wasSuccessCode=t,this.connection=n,this.canceled=!!s}}function CN(r,t){t!==null&&t.length>0&&(r.Authorization="Firebase "+t)}function IN(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function xN(r,t){t&&(r["X-Firebase-GMPID"]=t)}function ON(r,t){t!==null&&(r["X-Firebase-AppCheck"]=t)}function LN(r,t,n,s,l,h,m=!0,y=!1){const v=Bb(r.urlParams),T=r.url+v,A=Object.assign({},r.headers);return xN(A,t),CN(A,n),IN(A,h),ON(A,s),new RN(T,r.method,A,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,l,m,y)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function PN(...r){const t=NN();if(t!==void 0){const n=new t;for(let s=0;s<r.length;s++)n.append(r[s]);return n.getBlob()}else{if(e_())return new Blob(r);throw new We(Xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function MN(r,t,n){return r.webkitSlice?r.webkitSlice(t,n):r.mozSlice?r.mozSlice(t,n):r.slice?r.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(r){if(typeof atob>"u")throw yN("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class yp{constructor(t,n){this.data=t,this.contentType=n||null}}function kN(r,t){switch(r){case ts.RAW:return new yp(jb(t));case ts.BASE64:case ts.BASE64URL:return new yp(Hb(r,t));case ts.DATA_URL:return new yp(UN(t),zN(t))}throw Jg()}function jb(r){const t=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<=127)t.push(s);else if(s<=2047)t.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<r.length-1&&(r.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const h=s,m=r.charCodeAt(++n);s=65536|(h&1023)<<10|m&1023,t.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?t.push(239,191,189):t.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(t)}function VN(r){let t;try{t=decodeURIComponent(r)}catch{throw Ec(ts.DATA_URL,"Malformed data URL.")}return jb(t)}function Hb(r,t){switch(r){case ts.BASE64:{const l=t.indexOf("-")!==-1,h=t.indexOf("_")!==-1;if(l||h)throw Ec(r,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case ts.BASE64URL:{const l=t.indexOf("+")!==-1,h=t.indexOf("/")!==-1;if(l||h)throw Ec(r,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=DN(t)}catch(l){throw l.message.includes("polyfill")?l:Ec(r,"Invalid character found")}const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s}class qb{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Ec(ts.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=BN(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=t.substring(t.indexOf(",")+1)}}function UN(r){const t=new qb(r);return t.base64?Hb(ts.BASE64,t.rest):VN(t.rest)}function zN(r){return new qb(r).contentType}function BN(r,t){return r.length>=t.length?r.substring(r.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t,n){let s=0,l="";QE(t)?(this.data_=t,s=t.size,l=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),s=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),s=t.length),this.size_=s,this.type_=l}size(){return this.size_}type(){return this.type_}slice(t,n){if(QE(this.data_)){const s=this.data_,l=MN(s,t,n);return l===null?null:new za(l)}else{const s=new Uint8Array(this.data_.buffer,t,n-t);return new za(s,!0)}}static getBlob(...t){if(e_()){const n=t.map(s=>s instanceof za?s.data_:s);return new za(PN.apply(null,n))}else{const n=t.map(m=>t_(m)?kN(ts.RAW,m).data:m.data_);let s=0;n.forEach(m=>{s+=m.byteLength});const l=new Uint8Array(s);let h=0;return n.forEach(m=>{for(let y=0;y<m.length;y++)l[h++]=m[y]}),new za(l,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(r){let t;try{t=JSON.parse(r)}catch{return null}return SN(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(r){if(r.length===0)return null;const t=r.lastIndexOf("/");return t===-1?"":r.slice(0,t)}function HN(r,t){const n=t.split("/").filter(s=>s.length>0).join("/");return r.length===0?n:r+"/"+n}function Gb(r){const t=r.lastIndexOf("/",r.length-2);return t===-1?r:r.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(r,t){return t}class Wn{constructor(t,n,s,l){this.server=t,this.local=n||t,this.writable=!!s,this.xform=l||qN}}let lf=null;function FN(r){return!t_(r)||r.length<2?r:Gb(r)}function Zb(){if(lf)return lf;const r=[];r.push(new Wn("bucket")),r.push(new Wn("generation")),r.push(new Wn("metageneration")),r.push(new Wn("name","fullPath",!0));function t(h,m){return FN(m)}const n=new Wn("name");n.xform=t,r.push(n);function s(h,m){return m!==void 0?Number(m):m}const l=new Wn("size");return l.xform=s,r.push(l),r.push(new Wn("timeCreated")),r.push(new Wn("updated")),r.push(new Wn("md5Hash",null,!0)),r.push(new Wn("cacheControl",null,!0)),r.push(new Wn("contentDisposition",null,!0)),r.push(new Wn("contentEncoding",null,!0)),r.push(new Wn("contentLanguage",null,!0)),r.push(new Wn("contentType",null,!0)),r.push(new Wn("metadata","customMetadata",!0)),lf=r,lf}function GN(r,t){function n(){const s=r.bucket,l=r.fullPath,h=new Ui(s,l);return t._makeStorageReference(h)}Object.defineProperty(r,"ref",{get:n})}function ZN(r,t,n){const s={};s.type="file";const l=n.length;for(let h=0;h<l;h++){const m=n[h];s[m.local]=m.xform(s,t[m.server])}return GN(s,r),s}function Kb(r,t,n){const s=Fb(t);return s===null?null:ZN(r,s,n)}function KN(r,t,n,s){const l=Fb(t);if(l===null||!t_(l.downloadTokens))return null;const h=l.downloadTokens;if(h.length===0)return null;const m=encodeURIComponent;return h.split(",").map(T=>{const A=r.bucket,C=r.fullPath,O="/b/"+m(A)+"/o/"+m(C),j=md(O,n,s),J=Bb({alt:"media",token:T});return j+J})[0]}function YN(r,t){const n={},s=t.length;for(let l=0;l<s;l++){const h=t[l];h.writable&&(n[h.server]=r[h.local])}return JSON.stringify(n)}class n_{constructor(t,n,s,l){this.url=t,this.method=n,this.handler=s,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(r){if(!r)throw Jg()}function QN(r,t){function n(s,l){const h=Kb(r,l,t);return Yb(h!==null),h}return n}function $N(r,t){function n(s,l){const h=Kb(r,l,t);return Yb(h!==null),KN(h,l,r.host,r._protocol)}return n}function Qb(r){function t(n,s){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=uN():l=lN():n.getStatus()===402?l=oN(r.bucket):n.getStatus()===403?l=cN(r.path):l=s,l.status=n.getStatus(),l.serverResponse=s.serverResponse,l}return t}function $b(r){const t=Qb(r);function n(s,l){let h=t(s,l);return s.getStatus()===404&&(h=aN(r.path)),h.serverResponse=l.serverResponse,h}return n}function XN(r,t,n){const s=t.fullServerUrl(),l=md(s,r.host,r._protocol),h="GET",m=r.maxOperationRetryTime,y=new n_(l,h,$N(r,n),m);return y.errorHandler=$b(t),y}function WN(r,t){const n=t.fullServerUrl(),s=md(n,r.host,r._protocol),l="DELETE",h=r.maxOperationRetryTime;function m(v,T){}const y=new n_(s,l,m,h);return y.successCodes=[200,204],y.errorHandler=$b(t),y}function JN(r,t){return r&&r.contentType||t&&t.type()||"application/octet-stream"}function tP(r,t,n){const s=Object.assign({},n);return s.fullPath=r.path,s.size=t.size(),s.contentType||(s.contentType=JN(null,t)),s}function eP(r,t,n,s,l){const h=t.bucketOnlyServerUrl(),m={"X-Goog-Upload-Protocol":"multipart"};function y(){let ft="";for(let xt=0;xt<2;xt++)ft=ft+Math.random().toString().slice(2);return ft}const v=y();m["Content-Type"]="multipart/related; boundary="+v;const T=tP(t,s,l),A=YN(T,n),C="--"+v+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+A+`\r
--`+v+`\r
Content-Type: `+T.contentType+`\r
\r
`,O=`\r
--`+v+"--",j=za.getBlob(C,s,O);if(j===null)throw gN();const J={name:T.fullPath},W=md(h,r.host,r._protocol),Q="POST",at=r.maxUploadRetryTime,ut=new n_(W,Q,QN(r,n),at);return ut.urlParams=J,ut.headers=m,ut.body=j.uploadData(),ut.errorHandler=Qb(t),ut}class nP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ko.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ko.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ko.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,s,l,h){if(this.sent_)throw uc("cannot .send() more than once");if(Ja(t)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,t,!0),h!==void 0)for(const m in h)h.hasOwnProperty(m)&&this.xhr_.setRequestHeader(m,h[m].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class iP extends nP{initXhr(){this.xhr_.responseType="text"}}function i_(){return new iP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(t,n){this._service=t,n instanceof Ui?this._location=n:this._location=Ui.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new tl(t,n)}get root(){const t=new Ui(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Gb(this._location.path)}get storage(){return this._service}get parent(){const t=jN(this._location.path);if(t===null)return null;const n=new Ui(this._location.bucket,t);return new tl(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw vN(t)}}function rP(r,t,n){r._throwIfRoot("uploadBytes");const s=eP(r.storage,r._location,Zb(),new za(t,!0),n);return r.storage.makeRequestWithTokens(s,i_).then(l=>({metadata:l,ref:r}))}function sP(r){r._throwIfRoot("getDownloadURL");const t=XN(r.storage,r._location,Zb());return r.storage.makeRequestWithTokens(t,i_).then(n=>{if(n===null)throw _N();return n})}function aP(r){r._throwIfRoot("deleteObject");const t=WN(r.storage,r._location);return r.storage.makeRequestWithTokens(t,i_)}function oP(r,t){const n=HN(r._location.path,t),s=new Ui(r._location.bucket,n);return new tl(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(r){return/^[A-Za-z]+:\/\//.test(r)}function uP(r,t){return new tl(r,t)}function Xb(r,t){if(r instanceof r_){const n=r;if(n._bucket==null)throw pN();const s=new tl(n,n._bucket);return t!=null?Xb(s,t):s}else return t!==void 0?oP(r,t):r}function cP(r,t){if(t&&lP(t)){if(r instanceof r_)return uP(r,t);throw Kp("To use ref(service, url), the first argument must be a Storage instance.")}else return Xb(r,t)}function XE(r,t){const n=t?.[Ub];return n==null?null:Ui.makeFromBucketSpec(n,r)}function hP(r,t,n,s={}){r.host=`${t}:${n}`;const l=Ja(t);l&&(eg(`https://${r.host}/b`),ng("Storage",!0)),r._isUsingEmulator=!0,r._protocol=l?"https":"http";const{mockUserToken:h}=s;h&&(r._overrideAuthToken=typeof h=="string"?h:R0(h,r.app.options.projectId))}class r_{constructor(t,n,s,l,h,m=!1){this.app=t,this._authProvider=n,this._appCheckProvider=s,this._url=l,this._firebaseVersion=h,this._isUsingEmulator=m,this._bucket=null,this._host=Vb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rN,this._maxUploadRetryTime=sN,this._requests=new Set,l!=null?this._bucket=Ui.makeFromBucketSpec(l,this._host):this._bucket=XE(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ui.makeFromBucketSpec(this._url,t):this._bucket=XE(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){$E("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){$E("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new tl(this,t)}_makeRequest(t,n,s,l,h=!0){if(this._deleted)return new TN(zb());{const m=LN(t,this._appId,s,l,n,this._firebaseVersion,h,this._isUsingEmulator);return this._requests.add(m),m.getPromise().then(()=>this._requests.delete(m),()=>this._requests.delete(m)),m}}async makeRequestWithTokens(t,n){const[s,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,s,l).getPromise()}}const WE="@firebase/storage",JE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="storage";function fP(r,t,n){return r=He(r),rP(r,t,n)}function dP(r){return r=He(r),sP(r)}function mP(r){return r=He(r),aP(r)}function Jb(r,t){return r=He(r),cP(r,t)}function pP(r=sg(),t){r=He(r);const s=Gf(r,Wb).getImmediate({identifier:t}),l=b0("storage");return l&&gP(s,...l),s}function gP(r,t,n,s={}){hP(r,t,n,s)}function _P(r,{instanceIdentifier:t}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),l=r.getProvider("app-check-internal");return new r_(n,s,l,t,il)}function yP(){$o(new Za(Wb,_P,"PUBLIC").setMultipleInstances(!0)),es(WE,JE,""),es(WE,JE,"esm2020")}yP();const vP={apiKey:"AIzaSyBl383OOfL8kRB1_ml5coLputoS1YxTUpE",authDomain:"varsharaksha-c1bda.firebaseapp.com",projectId:"varsharaksha-c1bda",storageBucket:"varsharaksha-c1bda.firebasestorage.app",messagingSenderId:"800822204961",appId:"1:800822204961:web:03ae804121ba272d90a160"},s_=x0(vP),el=Vx(s_),TP=new zs,Yo=UL(s_),tS=pP(s_),eS="/Varsha-Raksha/assets/logo-CjB11B-h.png",EP=()=>{const r=async()=>{try{await ZI(el,TP)}catch(t){console.error("Error signing in with Google: ",t)}};return F.jsxs("div",{className:"auth-container",children:[F.jsx("img",{src:eS,alt:"VarshaRaksha Logo",className:"login-logo"}),F.jsx("p",{children:"Your Community's Monsoon Lifeline"}),F.jsxs("button",{onClick:r,className:"auth-button sign-in",children:[F.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google logo"}),"Sign in with Google"]})]})},wP=()=>{const[r,t]=K.useState(""),[n,s]=K.useState(null),[l,h]=K.useState(!1),[m,y]=K.useState(""),[v,T]=K.useState(null),[A,C]=K.useState(""),[O,j]=K.useState(""),J=at=>{at.target.files[0]&&s(at.target.files[0])},W=()=>{if(!navigator.geolocation){C("Geolocation is not supported by your browser.");return}C("Getting location..."),navigator.geolocation.getCurrentPosition(async at=>{C("Fetching address...");const{latitude:ut,longitude:ft}=at.coords,kt=`https://api.openweathermap.org/geo/1.0/reverse?lat=${ut}&lon=${ft}&limit=1&appid=d6b5d7d106704246734f250871f7f49e`;try{const Dt=await fetch(kt);if(!Dt.ok)throw new Error("Failed to fetch address.");const D=await Dt.json(),N=D[0]?`${D[0].name}, ${D[0].state}`:"Unknown Location";T({lat:ut,lon:ft,name:N}),j(N),C(`Location attached: ${N}`)}catch{C("Could not fetch address. Coordinates saved."),T({lat:ut,lon:ft,name:"Coordinates Only"})}},()=>{C("Unable to retrieve location.")})},Q=async(at,ut)=>{if(at.preventDefault(),!r.trim()||!el.currentUser)return;h(!0),y("");let ft=null;if(O.trim()){C(`Geocoding "${O.trim()}"...`);const P=`https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(O.trim())}&limit=5&appid=d6b5d7d106704246734f250871f7f49e`;try{const H=await fetch(P);if(!H.ok)throw new Error("Failed to geocode address.");const U=await H.json();if(U&&U.length>0){const q=U.find(k=>k.country==="IN")||U[0];ft={name:O.trim(),lat:q.lat,lon:q.lon}}else y(`Could not find coordinates for "${O.trim()}". Post will be saved with text location only.`),ft={name:O.trim(),lat:null,lon:null}}catch(H){console.error("Geocoding failed:",H),y("Could not find that location. Please check spelling."),h(!1);return}}else v&&(ft=v);const{uid:xt,displayName:kt,photoURL:Dt}=el.currentUser;let D="";try{if(n){const N=Jb(tS,`posts/${Date.now()}_${n.name}`),P=await fP(N,n);D=await dP(P.ref)}await eN(ld(Yo,"posts"),{authorId:xt,authorName:kt,authorPhotoURL:Dt,content:r.trim(),category:ut,imageUrl:D,location:ft,createdAt:iN()}),t(""),s(null),T(null),C(""),j(""),document.getElementById("fileInput")&&(document.getElementById("fileInput").value="")}catch(N){console.error("Error creating post: ",N),y("Failed to create post. Please try again.")}finally{h(!1),C("")}};return F.jsxs("form",{className:"post-form",children:[m&&F.jsx("p",{className:"error-message",children:m}),F.jsx("textarea",{value:r,onChange:at=>t(at.target.value),placeholder:"What's happening in your area?",rows:"3",disabled:l}),F.jsxs("div",{className:"form-footer",children:[F.jsxs("div",{className:"form-attachments",children:[F.jsx("input",{type:"file",id:"fileInput",onChange:J,accept:"image/*",disabled:l}),F.jsx("input",{type:"text",className:"location-input",placeholder:"Or type area name...",value:O,onChange:at=>j(at.target.value),disabled:l}),F.jsx("button",{type:"button",onClick:W,className:"location-btn",disabled:l,children:"Location"})]}),F.jsxs("div",{className:"form-actions",children:[F.jsx("button",{type:"submit",onClick:at=>Q(at,"Alert"),className:"btn alert",disabled:!r.trim()||l,children:l?"Posting...":"Post Alert"}),F.jsx("button",{type:"submit",onClick:at=>Q(at,"Request"),className:"btn request",disabled:!r.trim()||l,children:l?"Posting...":"Post Request"}),F.jsx("button",{type:"submit",onClick:at=>Q(at,"Offer"),className:"btn offer",disabled:!r.trim()||l,children:l?"Posting...":"Post Offer"})]})]}),A&&F.jsx("p",{className:"location-status",children:A})]})},bP=r=>{if(!r)return"";const t=r.toDate(),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()?`Today at ${t.toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})}`:t.toLocaleString("en-IN",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},SP=()=>{const[r,t]=K.useState([]),[n,s]=K.useState(!0);K.useEffect(()=>{const h=new Date;h.setHours(0,0,0,0);const m=Le.fromDate(h),y=Yg(ld(Yo,"posts"),Mb("createdAt",">=",m),$L("createdAt","desc")),v=Xg(y,T=>{const A=[];T.forEach(C=>{A.push({...C.data(),id:C.id})}),t(A),s(!1)});return()=>v()},[]);const l=h=>{switch(h){case"Alert":return"category-alert";case"Request":return"category-request";case"Offer":return"category-offer";default:return""}};return n?F.jsx("p",{children:"Loading today's posts..."}):F.jsx("div",{className:"feed-container",children:r.length===0?F.jsx("div",{className:"post-card",children:F.jsx("p",{children:"No posts yet for today. Be the first to share an update!"})}):r.map(h=>F.jsxs("div",{className:"post-card",children:[F.jsxs("div",{className:"post-header",children:[F.jsx("img",{src:h.authorPhotoURL,alt:h.authorName,className:"profile-pic-small"}),F.jsxs("div",{className:"author-details",children:[F.jsx("span",{className:"author-name",children:h.authorName}),F.jsxs("span",{className:"post-timestamp",children:["",bP(h.createdAt)]})]})]}),h.imageUrl&&F.jsx("img",{src:h.imageUrl,alt:"User upload",className:"post-image"}),F.jsx("p",{className:"post-content",children:h.content}),F.jsxs("div",{className:"post-footer",children:[F.jsx("div",{className:`post-category ${l(h.category)}`,children:h.category}),h.location&&F.jsxs("div",{className:"location-display",children:[F.jsx("span",{className:"location-icon",children:""}),F.jsx("span",{className:"location-name",children:h.location.name}),h.location.lat&&h.location.lon&&F.jsxs(F.Fragment,{children:["",F.jsx("a",{href:`https://www.google.com/maps?q=${h.location.lat},${h.location.lon}`,target:"_blank",rel:"noopener noreferrer",className:"location-link",children:"(View on Map)"})]})]})]})]},h.id))})},AP=[{id:1,title:"Severe Waterlogging Reported",content:"The underpass at Paradise Circle is completely flooded. Please avoid the area and use alternative routes.",severity:"High",timestamp:"2025-10-05T15:10:00Z",imageUrl:"https://c.ndtvimg.com/2025-08/flhtpsh4_hyderabad_625x300_04_August_25.jpg?im=FeatureCrop,algorithm=dnn,width=1200,height=738"},{id:2,title:"Potential Power Outages",content:"Due to heavy winds, there may be intermittent power cuts in the Begumpet area. Teams are on standby.",severity:"Medium",timestamp:"2025-10-05T14:30:00Z",imageUrl:"https://static.toiimg.com/thumb/msid-123394513,width-1280,height-720,resizemode-72/123394513.jpg"},{id:3,title:"Relief Camp Information",content:"A temporary relief camp has been set up at the community hall. Water and first-aid are available.",severity:"Low",timestamp:"2025-10-05T13:00:00Z",imageUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSYdRR_hM0OrZbmEt7Vgm6XhvLjVsnMDINPrg&s"}],RP="<h3>Overall Situation:</h3><p>Following overnight showers, GHMC has reported moderate waterlogging in low-lying areas, particularly around Kukatpally and LB Nagar. The India Meteorological Department (IMD) has issued a Yellow Alert for the city, forecasting further light to moderate rain throughout the day.</p><br /><h3>Traffic & Travel Advisories:</h3><p>Residents are advised to anticipate traffic congestion on major routes. Key areas like Paradise Circle and parts of the Outer Ring Road are experiencing slower than usual traffic. Commuters are encouraged to check live traffic updates before starting their journey.</p>",CP=[{title:"Hyderabad Rains: City on Yellow Alert, IMD Predicts More Showers",summary:"The IMD has issued a yellow alert for Hyderabad, forecasting continued rainfall and potential thunderstorms over the next 24 hours.",link:"https://timesofindia.indiatimes.com/city/hyderabad/hyderabad-rains-city-on-yellow-alert-imd-predicts-more-showers/articleshow/104169554.cms",imageUrl:"https://static.toiimg.com/thumb/msid-104169555,width-1280,height-720,resizemode-75/104169555.jpg"},{title:"Waterlogging in Several Areas After Overnight Rain, GHMC Teams on Ground",summary:"Low-lying areas in Kukatpally, Miyapur, and LB Nagar have reported significant waterlogging, prompting GHMC to deploy disaster response teams.",link:"https://www.thehindu.com/news/cities/Hyderabad/waterlogging-in-several-areas-of-hyderabad-after-overnight-rain/article6738437.ece",imageUrl:"https://th-i.thgim.com/public/incoming/p6y3q1/article67384370.ece/alternates/LANDSCAPE_1200/hyderabad%20rains.jpg"},{title:"Traffic Slows Down in Hyderabad Amidst Incessant Rains",summary:"Major junctions and IT corridors are facing traffic snarls due to waterlogging and ongoing showers, with traffic police issuing advisories.",link:"https://www.deccanchronicle.com/nation/in-other-news/051025/hyderabad-traffic-slows-down-amidst-incessant-rains.html",imageUrl:"https://s3.ap-southeast-1.amazonaws.com/images.deccanchronicle.com/dc-Cover-b4p0k0i7r8k2p8n8f3f8j8k8v1-20180911010204.Medi.jpeg"}],IP=()=>{const[r,t]=K.useState(null),[n,s]=K.useState(!0),[l,h]=K.useState(null);return K.useEffect(()=>{if(!navigator.geolocation){h("Geolocation is not supported by your browser."),s(!1);return}const m=async v=>{const{latitude:T,longitude:A}=v.coords,O=`https://api.openweathermap.org/data/2.5/weather?lat=${T}&lon=${A}&appid=d6b5d7d106704246734f250871f7f49e&units=metric`;try{const j=await fetch(O);if(!j.ok)throw new Error("Failed to fetch weather data.");const J=await j.json();t(J)}catch(j){h(j.message)}finally{s(!1)}},y=v=>{h(`Error getting location: ${v.message}`),s(!1)};navigator.geolocation.getCurrentPosition(m,y)},[]),F.jsxs("div",{className:"page-container",children:[F.jsx("h2",{children:"Official Info & Alerts"}),F.jsxs("div",{className:"weather-section",children:[n&&F.jsx("p",{children:"Loading weather data..."}),l&&F.jsx("p",{className:"error-message",children:l}),r&&F.jsxs("div",{className:"weather-card",children:[F.jsxs("h3",{children:["Current Weather in ",r.name]}),F.jsxs("div",{className:"weather-main",children:[F.jsx("img",{src:`https://openweathermap.org/img/wn/${r.weather[0].icon}@2x.png`,alt:r.weather[0].description,className:"weather-icon"}),F.jsxs("div",{className:"weather-temp",children:[Math.round(r.main.temp),"C"]}),F.jsx("div",{className:"weather-desc",children:r.weather[0].description})]}),F.jsxs("div",{className:"weather-details",children:[F.jsxs("p",{children:["Feels like: ",Math.round(r.main.feels_like),"C"]}),F.jsxs("p",{children:["Humidity: ",r.main.humidity,"%"]}),F.jsxs("p",{children:["Wind: ",r.wind.speed," m/s"]})]})]})]}),F.jsxs("div",{className:"news-summary-section",children:[F.jsx("h3",{children:"Today's Weather News Summary"}),F.jsx("div",{className:"news-summary-card",children:F.jsx("div",{dangerouslySetInnerHTML:{__html:RP}})})]}),F.jsxs("div",{className:"news-articles-section",children:[F.jsx("h3",{children:"In-Depth Articles"}),F.jsx("div",{className:"news-grid",children:CP.map((m,y)=>F.jsxs("a",{href:m.link,target:"_blank",rel:"noopener noreferrer",className:"news-card",children:[F.jsx("img",{src:m.imageUrl,alt:m.title,className:"news-card-image",onError:v=>{v.target.style.display="none"}}),F.jsxs("div",{className:"news-card-content",children:[F.jsx("h4",{children:m.title}),F.jsx("p",{children:m.summary})]})]},y))})]}),F.jsxs("div",{className:"announcements-section",children:[F.jsx("h3",{children:"Local Announcements"}),F.jsx("div",{className:"announcements-list",children:AP.map(m=>F.jsxs("div",{className:`announcement-card severity-${m.severity}`,children:[m.imageUrl&&F.jsx("img",{src:m.imageUrl,alt:m.title,className:"announcement-image"}),F.jsxs("div",{className:"announcement-content",children:[F.jsx("h4",{children:m.title}),F.jsx("p",{children:m.content}),F.jsxs("small",{children:["Posted: ",new Date(m.timestamp).toLocaleTimeString()]})]})]},m.id))})]})]})},xP=()=>{const r=[{name:"National Emergency Number",number:"112",emoji:""},{name:"Police",number:"100",emoji:""},{name:"Fire",number:"101",emoji:""},{name:"Ambulance",number:"108",emoji:""},{name:"Disaster Management (GHMC)",number:"040-21111111",emoji:""},{name:"Women Helpline",number:"1091",emoji:""}];return F.jsxs("div",{className:"page-container",children:[F.jsx("h2",{children:"Emergency Help & Contacts"}),F.jsx("p",{children:"Tap a number to call. Stay safe."}),F.jsx("div",{className:"contact-list",children:r.map(t=>F.jsxs("a",{href:`tel:${t.number}`,className:"contact-card",children:[F.jsx("div",{className:"contact-emoji",children:t.emoji}),F.jsxs("div",{className:"contact-details",children:[F.jsx("span",{className:"contact-name",children:t.name}),F.jsx("span",{className:"contact-number",children:t.number})]})]},t.name))})]})},OP=({post:r,onClose:t})=>{const[n,s]=K.useState(r.content),[l,h]=K.useState(!1),m=async y=>{if(y.preventDefault(),!n.trim()){alert("Post content cannot be empty.");return}h(!0);const v=Bf(Yo,"posts",r.id);try{await tN(v,{content:n.trim()}),t()}catch(T){console.error("Error updating post:",T),alert("Failed to save changes. Please try again.")}finally{h(!1)}};return F.jsx("div",{className:"modal-overlay",onClick:t,children:F.jsxs("div",{className:"modal-content",onClick:y=>y.stopPropagation(),children:[F.jsx("h3",{children:"Edit Post"}),F.jsxs("form",{onSubmit:m,children:[F.jsx("textarea",{value:n,onChange:y=>s(y.target.value),rows:"5"}),F.jsxs("div",{className:"modal-actions",children:[F.jsx("button",{type:"button",onClick:t,className:"cancel-btn",children:"Cancel"}),F.jsx("button",{type:"submit",className:"save-btn",disabled:l,children:l?"Saving...":"Save Changes"})]})]})]})})},LP=r=>r?r.toDate().toLocaleString("en-IN",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",NP=()=>{const[r,t]=K.useState([]),[n,s]=K.useState(!0),[l,h]=K.useState(""),[m,y]=K.useState(null);K.useEffect(()=>{if(!el.currentUser)return;const T=Yg(ld(Yo,"posts"),Mb("authorId","==",el.currentUser.uid)),A=Xg(T,C=>{const O=[];C.forEach(j=>{O.push({...j.data(),id:j.id})}),O.sort((j,J)=>(J.createdAt?.seconds||0)-(j.createdAt?.seconds||0)),t(O),s(!1)},C=>{console.error("Error fetching user posts:",C),h("Failed to load your posts."),s(!1)});return()=>A()},[]);const v=async(T,A)=>{if(window.confirm("Are you sure you want to delete this post?"))try{if(A){const O=Jb(tS,A);await mP(O)}const C=Bf(Yo,"posts",T);await YE(C)}catch(C){if(console.error("Error deleting post:",C),C.code==="storage/object-not-found"){console.warn("Image not found in storage, but deleting post from DB.");const O=Bf(Yo,"posts",T);await YE(O)}else alert("Failed to delete post. Please try again.")}};return n?F.jsx("p",{children:"Loading your posts..."}):l?F.jsx("p",{className:"error-message",children:l}):F.jsxs("div",{className:"page-container",children:[F.jsx("h2",{children:"My Posts"}),r.length===0?F.jsx("p",{children:"You haven't made any posts yet."}):F.jsx("div",{className:"feed-container",children:r.map(T=>F.jsxs("div",{className:"post-card",children:[F.jsxs("div",{className:"post-header",children:[F.jsx("img",{src:T.authorPhotoURL,alt:T.authorName,className:"profile-pic-small"}),F.jsxs("div",{className:"author-details",children:[F.jsx("span",{className:"author-name",children:T.authorName}),F.jsxs("span",{className:"post-timestamp",children:["",LP(T.createdAt)]})]})]}),T.imageUrl&&F.jsx("img",{src:T.imageUrl,alt:"User upload",className:"post-image"}),F.jsx("p",{className:"post-content",children:T.content}),F.jsxs("div",{className:"post-footer",children:[F.jsx("div",{className:`post-category category-${T.category?.toLowerCase()}`,children:T.category}),T.location&&F.jsxs("div",{className:"location-display",children:[F.jsx("span",{className:"location-icon",children:""}),F.jsx("span",{className:"location-name",children:T.location.name}),T.location.lat&&T.location.lon&&F.jsxs(F.Fragment,{children:["",F.jsx("a",{href:`https://www.google.com/maps?q=${T.location.lat},${T.location.lon}`,target:"_blank",rel:"noopener noreferrer",className:"location-link",children:"(View on Map)"})]})]})]}),F.jsxs("div",{className:"post-actions",children:[F.jsx("button",{onClick:()=>y(T),className:"edit-btn",children:"Edit"}),F.jsx("button",{onClick:()=>v(T.id,T.imageUrl),className:"delete-btn",children:"Delete"})]})]},T.id))}),m&&F.jsx(OP,{post:m,onClose:()=>y(null)})]})};function nS(r,t){const n=K.useRef(t);K.useEffect(function(){t!==n.current&&r.attributionControl!=null&&(n.current!=null&&r.attributionControl.removeAttribution(n.current),t!=null&&r.attributionControl.addAttribution(t)),n.current=t},[r,t])}const PP=1;function MP(r){return Object.freeze({__version:PP,map:r})}function DP(r,t){return Object.freeze({...r,...t})}const a_=K.createContext(null);function iS(){const r=K.use(a_);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function kP(r){function t(n,s){const{instance:l,context:h}=r(n).current;K.useImperativeHandle(s,()=>l);const{children:m}=n;return m==null?null:Ef.createElement(a_,{value:h},m)}return K.forwardRef(t)}function VP(r){function t(n,s){const[l,h]=K.useState(!1),{instance:m}=r(n,h).current;K.useImperativeHandle(s,()=>m),K.useEffect(function(){l&&m.update()},[m,l,n.children]);const y=m._contentNode;return y?tR.createPortal(n.children,y):null}return K.forwardRef(t)}function UP(r){function t(n,s){const{instance:l}=r(n).current;return K.useImperativeHandle(s,()=>l),null}return K.forwardRef(t)}function rS(r,t){const n=K.useRef(void 0);K.useEffect(function(){return t!=null&&r.instance.on(t),n.current=t,function(){n.current!=null&&r.instance.off(n.current),n.current=null}},[r,t])}function o_(r,t){const n=r.pane??t.pane;return n?{...r,pane:n}:r}function zP(r,t){return function(s,l){const h=iS(),m=r(o_(s,h),h);return nS(h.map,s.attribution),rS(m.current,s.eventHandlers),t(m.current,h,s,l),m}}var mc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var BP=mc.exports,t0;function jP(){return t0||(t0=1,(function(r,t){(function(n,s){s(t)})(BP,(function(n){var s="1.9.4";function l(a){var u,d,_,w;for(d=1,_=arguments.length;d<_;d++){w=arguments[d];for(u in w)a[u]=w[u]}return a}var h=Object.create||(function(){function a(){}return function(u){return a.prototype=u,new a}})();function m(a,u){var d=Array.prototype.slice;if(a.bind)return a.bind.apply(a,d.call(arguments,1));var _=d.call(arguments,2);return function(){return a.apply(u,_.length?_.concat(d.call(arguments)):arguments)}}var y=0;function v(a){return"_leaflet_id"in a||(a._leaflet_id=++y),a._leaflet_id}function T(a,u,d){var _,w,R,M;return M=function(){_=!1,w&&(R.apply(d,w),w=!1)},R=function(){_?w=arguments:(a.apply(d,arguments),setTimeout(M,u),_=!0)},R}function A(a,u,d){var _=u[1],w=u[0],R=_-w;return a===_&&d?a:((a-w)%R+R)%R+w}function C(){return!1}function O(a,u){if(u===!1)return a;var d=Math.pow(10,u===void 0?6:u);return Math.round(a*d)/d}function j(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function J(a){return j(a).split(/\s+/)}function W(a,u){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?h(a.options):{});for(var d in u)a.options[d]=u[d];return a.options}function Q(a,u,d){var _=[];for(var w in a)_.push(encodeURIComponent(d?w.toUpperCase():w)+"="+encodeURIComponent(a[w]));return(!u||u.indexOf("?")===-1?"?":"&")+_.join("&")}var at=/\{ *([\w_ -]+) *\}/g;function ut(a,u){return a.replace(at,function(d,_){var w=u[_];if(w===void 0)throw new Error("No value provided for variable "+d);return typeof w=="function"&&(w=w(u)),w})}var ft=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function xt(a,u){for(var d=0;d<a.length;d++)if(a[d]===u)return d;return-1}var kt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Dt(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var D=0;function N(a){var u=+new Date,d=Math.max(0,16-(u-D));return D=u+d,window.setTimeout(a,d)}var P=window.requestAnimationFrame||Dt("RequestAnimationFrame")||N,H=window.cancelAnimationFrame||Dt("CancelAnimationFrame")||Dt("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function U(a,u,d){if(d&&P===N)a.call(u);else return P.call(window,m(a,u))}function q(a){a&&H.call(window,a)}var k={__proto__:null,extend:l,create:h,bind:m,get lastId(){return y},stamp:v,throttle:T,wrapNum:A,falseFn:C,formatNum:O,trim:j,splitWords:J,setOptions:W,getParamString:Q,template:ut,isArray:ft,indexOf:xt,emptyImageUrl:kt,requestFn:P,cancelFn:H,requestAnimFrame:U,cancelAnimFrame:q};function oe(){}oe.extend=function(a){var u=function(){W(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=u.__super__=this.prototype,_=h(d);_.constructor=u,u.prototype=_;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(u[w]=this[w]);return a.statics&&l(u,a.statics),a.includes&&(Je(a.includes),l.apply(null,[_].concat(a.includes))),l(_,a),delete _.statics,delete _.includes,_.options&&(_.options=d.options?h(d.options):{},l(_.options,a.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,M=_._initHooks.length;R<M;R++)_._initHooks[R].call(this)}},u},oe.include=function(a){var u=this.prototype.options;return l(this.prototype,a),a.options&&(this.prototype.options=u,this.mergeOptions(a.options)),this},oe.mergeOptions=function(a){return l(this.prototype.options,a),this},oe.addInitHook=function(a){var u=Array.prototype.slice.call(arguments,1),d=typeof a=="function"?a:function(){this[a].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Je(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=ft(a)?a:[a];for(var u=0;u<a.length;u++)a[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var rt={on:function(a,u,d){if(typeof a=="object")for(var _ in a)this._on(_,a[_],u);else{a=J(a);for(var w=0,R=a.length;w<R;w++)this._on(a[w],u,d)}return this},off:function(a,u,d){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var _ in a)this._off(_,a[_],u);else{a=J(a);for(var w=arguments.length===1,R=0,M=a.length;R<M;R++)w?this._off(a[R]):this._off(a[R],u,d)}return this},_on:function(a,u,d,_){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(a,u,d)===!1){d===this&&(d=void 0);var w={fn:u,ctx:d};_&&(w.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(w)}},_off:function(a,u,d){var _,w,R;if(this._events&&(_=this._events[a],!!_)){if(arguments.length===1){if(this._firingCount)for(w=0,R=_.length;w<R;w++)_[w].fn=C;delete this._events[a];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var M=this._listens(a,u,d);if(M!==!1){var Z=_[M];this._firingCount&&(Z.fn=C,this._events[a]=_=_.slice()),_.splice(M,1)}}},fire:function(a,u,d){if(!this.listens(a,d))return this;var _=l({},u,{type:a,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var w=this._events[a];if(w){this._firingCount=this._firingCount+1||1;for(var R=0,M=w.length;R<M;R++){var Z=w[R],tt=Z.fn;Z.once&&this.off(a,tt,Z.ctx),tt.call(Z.ctx||this,_)}this._firingCount--}}return d&&this._propagateEvent(_),this},listens:function(a,u,d,_){typeof a!="string"&&console.warn('"string" type argument expected');var w=u;typeof u!="function"&&(_=!!u,w=void 0,d=void 0);var R=this._events&&this._events[a];if(R&&R.length&&this._listens(a,w,d)!==!1)return!0;if(_){for(var M in this._eventParents)if(this._eventParents[M].listens(a,u,d,_))return!0}return!1},_listens:function(a,u,d){if(!this._events)return!1;var _=this._events[a]||[];if(!u)return!!_.length;d===this&&(d=void 0);for(var w=0,R=_.length;w<R;w++)if(_[w].fn===u&&_[w].ctx===d)return w;return!1},once:function(a,u,d){if(typeof a=="object")for(var _ in a)this._on(_,a[_],u,!0);else{a=J(a);for(var w=0,R=a.length;w<R;w++)this._on(a[w],u,d,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[v(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[v(a)],this},_propagateEvent:function(a){for(var u in this._eventParents)this._eventParents[u].fire(a.type,l({layer:a.target,propagatedFrom:a.target},a),!0)}};rt.addEventListener=rt.on,rt.removeEventListener=rt.clearAllEventListeners=rt.off,rt.addOneTimeEventListener=rt.once,rt.fireEvent=rt.fire,rt.hasEventListeners=rt.listens;var vt=oe.extend(rt);function pt(a,u,d){this.x=d?Math.round(a):a,this.y=d?Math.round(u):u}var te=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};pt.prototype={clone:function(){return new pt(this.x,this.y)},add:function(a){return this.clone()._add(bt(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(bt(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new pt(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new pt(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=te(this.x),this.y=te(this.y),this},distanceTo:function(a){a=bt(a);var u=a.x-this.x,d=a.y-this.y;return Math.sqrt(u*u+d*d)},equals:function(a){return a=bt(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=bt(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+O(this.x)+", "+O(this.y)+")"}};function bt(a,u,d){return a instanceof pt?a:ft(a)?new pt(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new pt(a.x,a.y):new pt(a,u,d)}function z(a,u){if(a)for(var d=u?[a,u]:a,_=0,w=d.length;_<w;_++)this.extend(d[_])}z.prototype={extend:function(a){var u,d;if(!a)return this;if(a instanceof pt||typeof a[0]=="number"||"x"in a)u=d=bt(a);else if(a=st(a),u=a.min,d=a.max,!u||!d)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=d.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(a){return bt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return bt(this.min.x,this.max.y)},getTopRight:function(){return bt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var u,d;return typeof a[0]=="number"||a instanceof pt?a=bt(a):a=st(a),a instanceof z?(u=a.min,d=a.max):u=d=a,u.x>=this.min.x&&d.x<=this.max.x&&u.y>=this.min.y&&d.y<=this.max.y},intersects:function(a){a=st(a);var u=this.min,d=this.max,_=a.min,w=a.max,R=w.x>=u.x&&_.x<=d.x,M=w.y>=u.y&&_.y<=d.y;return R&&M},overlaps:function(a){a=st(a);var u=this.min,d=this.max,_=a.min,w=a.max,R=w.x>u.x&&_.x<d.x,M=w.y>u.y&&_.y<d.y;return R&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var u=this.min,d=this.max,_=Math.abs(u.x-d.x)*a,w=Math.abs(u.y-d.y)*a;return st(bt(u.x-_,u.y-w),bt(d.x+_,d.y+w))},equals:function(a){return a?(a=st(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function st(a,u){return!a||a instanceof z?a:new z(a,u)}function gt(a,u){if(a)for(var d=u?[a,u]:a,_=0,w=d.length;_<w;_++)this.extend(d[_])}gt.prototype={extend:function(a){var u=this._southWest,d=this._northEast,_,w;if(a instanceof wt)_=a,w=a;else if(a instanceof gt){if(_=a._southWest,w=a._northEast,!_||!w)return this}else return a?this.extend(Et(a)||_t(a)):this;return!u&&!d?(this._southWest=new wt(_.lat,_.lng),this._northEast=new wt(w.lat,w.lng)):(u.lat=Math.min(_.lat,u.lat),u.lng=Math.min(_.lng,u.lng),d.lat=Math.max(w.lat,d.lat),d.lng=Math.max(w.lng,d.lng)),this},pad:function(a){var u=this._southWest,d=this._northEast,_=Math.abs(u.lat-d.lat)*a,w=Math.abs(u.lng-d.lng)*a;return new gt(new wt(u.lat-_,u.lng-w),new wt(d.lat+_,d.lng+w))},getCenter:function(){return new wt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new wt(this.getNorth(),this.getWest())},getSouthEast:function(){return new wt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof wt||"lat"in a?a=Et(a):a=_t(a);var u=this._southWest,d=this._northEast,_,w;return a instanceof gt?(_=a.getSouthWest(),w=a.getNorthEast()):_=w=a,_.lat>=u.lat&&w.lat<=d.lat&&_.lng>=u.lng&&w.lng<=d.lng},intersects:function(a){a=_t(a);var u=this._southWest,d=this._northEast,_=a.getSouthWest(),w=a.getNorthEast(),R=w.lat>=u.lat&&_.lat<=d.lat,M=w.lng>=u.lng&&_.lng<=d.lng;return R&&M},overlaps:function(a){a=_t(a);var u=this._southWest,d=this._northEast,_=a.getSouthWest(),w=a.getNorthEast(),R=w.lat>u.lat&&_.lat<d.lat,M=w.lng>u.lng&&_.lng<d.lng;return R&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,u){return a?(a=_t(a),this._southWest.equals(a.getSouthWest(),u)&&this._northEast.equals(a.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function _t(a,u){return a instanceof gt?a:new gt(a,u)}function wt(a,u,d){if(isNaN(a)||isNaN(u))throw new Error("Invalid LatLng object: ("+a+", "+u+")");this.lat=+a,this.lng=+u,d!==void 0&&(this.alt=+d)}wt.prototype={equals:function(a,u){if(!a)return!1;a=Et(a);var d=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return d<=(u===void 0?1e-9:u)},toString:function(a){return"LatLng("+O(this.lat,a)+", "+O(this.lng,a)+")"},distanceTo:function(a){return we.distance(this,Et(a))},wrap:function(){return we.wrapLatLng(this)},toBounds:function(a){var u=180*a/40075017,d=u/Math.cos(Math.PI/180*this.lat);return _t([this.lat-u,this.lng-d],[this.lat+u,this.lng+d])},clone:function(){return new wt(this.lat,this.lng,this.alt)}};function Et(a,u,d){return a instanceof wt?a:ft(a)&&typeof a[0]!="object"?a.length===3?new wt(a[0],a[1],a[2]):a.length===2?new wt(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new wt(a.lat,"lng"in a?a.lng:a.lon,a.alt):u===void 0?null:new wt(a,u,d)}var Ht={latLngToPoint:function(a,u){var d=this.projection.project(a),_=this.scale(u);return this.transformation._transform(d,_)},pointToLatLng:function(a,u){var d=this.scale(u),_=this.transformation.untransform(a,d);return this.projection.unproject(_)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var u=this.projection.bounds,d=this.scale(a),_=this.transformation.transform(u.min,d),w=this.transformation.transform(u.max,d);return new z(_,w)},infinite:!1,wrapLatLng:function(a){var u=this.wrapLng?A(a.lng,this.wrapLng,!0):a.lng,d=this.wrapLat?A(a.lat,this.wrapLat,!0):a.lat,_=a.alt;return new wt(d,u,_)},wrapLatLngBounds:function(a){var u=a.getCenter(),d=this.wrapLatLng(u),_=u.lat-d.lat,w=u.lng-d.lng;if(_===0&&w===0)return a;var R=a.getSouthWest(),M=a.getNorthEast(),Z=new wt(R.lat-_,R.lng-w),tt=new wt(M.lat-_,M.lng-w);return new gt(Z,tt)}},we=l({},Ht,{wrapLng:[-180,180],R:6371e3,distance:function(a,u){var d=Math.PI/180,_=a.lat*d,w=u.lat*d,R=Math.sin((u.lat-a.lat)*d/2),M=Math.sin((u.lng-a.lng)*d/2),Z=R*R+Math.cos(_)*Math.cos(w)*M*M,tt=2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z));return this.R*tt}}),Re=6378137,ur={R:Re,MAX_LATITUDE:85.0511287798,project:function(a){var u=Math.PI/180,d=this.MAX_LATITUDE,_=Math.max(Math.min(d,a.lat),-d),w=Math.sin(_*u);return new pt(this.R*a.lng*u,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(a){var u=180/Math.PI;return new wt((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*u,a.x*u/this.R)},bounds:(function(){var a=Re*Math.PI;return new z([-a,-a],[a,a])})()};function Or(a,u,d,_){if(ft(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=u,this._c=d,this._d=_}Or.prototype={transform:function(a,u){return this._transform(a.clone(),u)},_transform:function(a,u){return u=u||1,a.x=u*(this._a*a.x+this._b),a.y=u*(this._c*a.y+this._d),a},untransform:function(a,u){return u=u||1,new pt((a.x/u-this._b)/this._a,(a.y/u-this._d)/this._c)}};function zi(a,u,d,_){return new Or(a,u,d,_)}var Lr=l({},we,{code:"EPSG:3857",projection:ur,transformation:(function(){var a=.5/(Math.PI*ur.R);return zi(a,.5,-a,.5)})()}),Bi=l({},Lr,{code:"EPSG:900913"});function Qs(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Nr(a,u){var d="",_,w,R,M,Z,tt;for(_=0,R=a.length;_<R;_++){for(Z=a[_],w=0,M=Z.length;w<M;w++)tt=Z[w],d+=(w?"L":"M")+tt.x+" "+tt.y;d+=u?Ct.svg?"z":"x":""}return d||"M0 0"}var fs=document.documentElement.style,Pr="ActiveXObject"in window,Fe=Pr&&!document.addEventListener,Ge="msLaunchUri"in navigator&&!("documentMode"in document),ji=yn("webkit"),ol=yn("android"),no=yn("android 2")||yn("android 3"),Cn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ds=ol&&yn("Google")&&Cn<537&&!("AudioNode"in window),ms=!!window.opera,$s=!Ge&&yn("chrome"),cr=yn("gecko")&&!ji&&!ms&&!Pr,Eu=!$s&&yn("safari"),io=yn("phantom"),ro="OTransition"in fs,ll=navigator.platform.indexOf("Win")===0,Jn=Pr&&"transition"in fs,tn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!no,Gn="MozPerspective"in fs,Ve=!window.L_DISABLE_3D&&(Jn||tn||Gn)&&!ro&&!io,Mr=typeof orientation<"u"||yn("mobile"),Xs=Mr&&ji,ul=Mr&&tn,vi=!window.PointerEvent&&window.MSPointerEvent,Dr=!!(window.PointerEvent||vi),Ue="ontouchstart"in window||!!window.TouchEvent,Hi=!window.L_NO_TOUCH&&(Ue||Dr),qi=Mr&&ms,Ti=Mr&&cr,wu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,cl=(function(){var a=!1;try{var u=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",C,u),window.removeEventListener("testPassiveEventSupport",C,u)}catch{}return a})(),Fi=(function(){return!!document.createElement("canvas").getContext})(),hr=!!(document.createElementNS&&Qs("svg").createSVGRect),bu=!!hr&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),ps=!hr&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var u=a.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}})(),so=navigator.platform.indexOf("Mac")===0,ao=navigator.platform.indexOf("Linux")===0;function yn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ct={ie:Pr,ielt9:Fe,edge:Ge,webkit:ji,android:ol,android23:no,androidStock:ds,opera:ms,chrome:$s,gecko:cr,safari:Eu,phantom:io,opera12:ro,win:ll,ie3d:Jn,webkit3d:tn,gecko3d:Gn,any3d:Ve,mobile:Mr,mobileWebkit:Xs,mobileWebkit3d:ul,msPointer:vi,pointer:Dr,touch:Hi,touchNative:Ue,mobileOpera:qi,mobileGecko:Ti,retina:wu,passiveEvents:cl,canvas:Fi,svg:hr,vml:ps,inlineSvg:bu,mac:so,linux:ao},oo=Ct.msPointer?"MSPointerDown":"pointerdown",ti=Ct.msPointer?"MSPointerMove":"pointermove",ei=Ct.msPointer?"MSPointerUp":"pointerup",ze=Ct.msPointer?"MSPointerCancel":"pointercancel",Ze={touchstart:oo,touchmove:ti,touchend:ei,touchcancel:ze},Ei={touchstart:Zi,touchmove:vn,touchend:vn,touchcancel:vn},wi={},hl=!1;function fl(a,u,d){return u==="touchstart"&&ni(),Ei[u]?(d=Ei[u].bind(this,d),a.addEventListener(Ze[u],d,!1),d):(console.warn("wrong event specified:",u),C)}function dl(a,u,d){if(!Ze[u]){console.warn("wrong event specified:",u);return}a.removeEventListener(Ze[u],d,!1)}function Gi(a){wi[a.pointerId]=a}function Ws(a){wi[a.pointerId]&&(wi[a.pointerId]=a)}function bi(a){delete wi[a.pointerId]}function ni(){hl||(document.addEventListener(oo,Gi,!0),document.addEventListener(ti,Ws,!0),document.addEventListener(ei,bi,!0),document.addEventListener(ze,bi,!0),hl=!0)}function vn(a,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var d in wi)u.touches.push(wi[d]);u.changedTouches=[u],a(u)}}function Zi(a,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Me(u),vn(a,u)}function Ke(a){var u={},d,_;for(_ in a)d=a[_],u[_]=d&&d.bind?d.bind(a):d;return a=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var lo=200;function uo(a,u){a.addEventListener("dblclick",u);var d=0,_;function w(R){if(R.detail!==1){_=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var M=Br(R);if(!(M.some(function(tt){return tt instanceof HTMLLabelElement&&tt.attributes.for})&&!M.some(function(tt){return tt instanceof HTMLInputElement||tt instanceof HTMLSelectElement}))){var Z=Date.now();Z-d<=lo?(_++,_===2&&u(Ke(R))):_=1,d=Z}}}return a.addEventListener("click",w),{dblclick:u,simDblclick:w}}function Ki(a,u){a.removeEventListener("dblclick",u.dblclick),a.removeEventListener("click",u.simDblclick)}var ii=_s(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),fr=_s(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Js=fr==="webkitTransition"||fr==="OTransition"?fr+"End":"transitionend";function ta(a){return typeof a=="string"?document.getElementById(a):a}function kr(a,u){var d=a.style[u]||a.currentStyle&&a.currentStyle[u];if((!d||d==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(a,null);d=_?_[u]:null}return d==="auto"?null:d}function Qt(a,u,d){var _=document.createElement(a);return _.className=u||"",d&&d.appendChild(_),_}function $t(a){var u=a.parentNode;u&&u.removeChild(a)}function Ne(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Pe(a){var u=a.parentNode;u&&u.lastChild!==a&&u.appendChild(a)}function Zn(a){var u=a.parentNode;u&&u.firstChild!==a&&u.insertBefore(a,u.firstChild)}function gs(a,u){if(a.classList!==void 0)return a.classList.contains(u);var d=Yi(a);return d.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(d)}function St(a,u){if(a.classList!==void 0)for(var d=J(u),_=0,w=d.length;_<w;_++)a.classList.add(d[_]);else if(!gs(a,u)){var R=Yi(a);ri(a,(R?R+" ":"")+u)}}function ye(a,u){a.classList!==void 0?a.classList.remove(u):ri(a,j((" "+Yi(a)+" ").replace(" "+u+" "," ")))}function ri(a,u){a.className.baseVal===void 0?a.className=u:a.className.baseVal=u}function Yi(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Ce(a,u){"opacity"in a.style?a.style.opacity=u:"filter"in a.style&&ea(a,u)}function ea(a,u){var d=!1,_="DXImageTransform.Microsoft.Alpha";try{d=a.filters.item(_)}catch{if(u===1)return}u=Math.round(u*100),d?(d.Enabled=u!==100,d.Opacity=u):a.style.filter+=" progid:"+_+"(opacity="+u+")"}function _s(a){for(var u=document.documentElement.style,d=0;d<a.length;d++)if(a[d]in u)return a[d];return!1}function Si(a,u,d){var _=u||new pt(0,0);a.style[ii]=(Ct.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(d?" scale("+d+")":"")}function ve(a,u){a._leaflet_pos=u,Ct.any3d?Si(a,u):(a.style.left=u.x+"px",a.style.top=u.y+"px")}function Qi(a){return a._leaflet_pos||new pt(0,0)}var si,sn,na;if("onselectstart"in document)si=function(){Mt(window,"selectstart",Me)},sn=function(){he(window,"selectstart",Me)};else{var dr=_s(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);si=function(){if(dr){var a=document.documentElement.style;na=a[dr],a[dr]="none"}},sn=function(){dr&&(document.documentElement.style[dr]=na,na=void 0)}}function ys(){Mt(window,"dragstart",Me)}function Vr(){he(window,"dragstart",Me)}var vs,$i;function Ur(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Mn(),vs=a,$i=a.style.outlineStyle,a.style.outlineStyle="none",Mt(window,"keydown",Mn))}function Mn(){vs&&(vs.style.outlineStyle=$i,vs=void 0,$i=void 0,he(window,"keydown",Mn))}function ia(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Dn(a){var u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}var zr={__proto__:null,TRANSFORM:ii,TRANSITION:fr,TRANSITION_END:Js,get:ta,getStyle:kr,create:Qt,remove:$t,empty:Ne,toFront:Pe,toBack:Zn,hasClass:gs,addClass:St,removeClass:ye,setClass:ri,getClass:Yi,setOpacity:Ce,testProp:_s,setTransform:Si,setPosition:ve,getPosition:Qi,get disableTextSelection(){return si},get enableTextSelection(){return sn},disableImageDrag:ys,enableImageDrag:Vr,preventOutline:Ur,restoreOutline:Mn,getSizedParentNode:ia,getScale:Dn};function Mt(a,u,d,_){if(u&&typeof u=="object")for(var w in u)kn(a,w,u[w],d);else{u=J(u);for(var R=0,M=u.length;R<M;R++)kn(a,u[R],d,_)}return this}var Tn="_leaflet_events";function he(a,u,d,_){if(arguments.length===1)mr(a),delete a[Tn];else if(u&&typeof u=="object")for(var w in u)pr(a,w,u[w],d);else if(u=J(u),arguments.length===2)mr(a,function(Z){return xt(u,Z)!==-1});else for(var R=0,M=u.length;R<M;R++)pr(a,u[R],d,_);return this}function mr(a,u){for(var d in a[Tn]){var _=d.split(/\d/)[0];(!u||u(_))&&pr(a,_,null,null,d)}}var Kn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function kn(a,u,d,_){var w=u+v(d)+(_?"_"+v(_):"");if(a[Tn]&&a[Tn][w])return this;var R=function(Z){return d.call(_||a,Z||window.event)},M=R;!Ct.touchNative&&Ct.pointer&&u.indexOf("touch")===0?R=fl(a,u,R):Ct.touch&&u==="dblclick"?R=uo(a,R):"addEventListener"in a?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?a.addEventListener(Kn[u]||u,R,Ct.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(R=function(Z){Z=Z||window.event,Ci(a,Z)&&M(Z)},a.addEventListener(Kn[u],R,!1)):a.addEventListener(u,M,!1):a.attachEvent("on"+u,R),a[Tn]=a[Tn]||{},a[Tn][w]=R}function pr(a,u,d,_,w){w=w||u+v(d)+(_?"_"+v(_):"");var R=a[Tn]&&a[Tn][w];if(!R)return this;!Ct.touchNative&&Ct.pointer&&u.indexOf("touch")===0?dl(a,u,R):Ct.touch&&u==="dblclick"?Ki(a,R):"removeEventListener"in a?a.removeEventListener(Kn[u]||u,R,!1):a.detachEvent("on"+u,R),a[Tn][w]=null}function ee(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function ai(a){return kn(a,"wheel",ee),this}function gr(a){return Mt(a,"mousedown touchstart dblclick contextmenu",ee),a._leaflet_disable_click=!0,this}function Me(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Ai(a){return Me(a),ee(a),this}function Br(a){if(a.composedPath)return a.composedPath();for(var u=[],d=a.target;d;)u.push(d),d=d.parentNode;return u}function Xi(a,u){if(!u)return new pt(a.clientX,a.clientY);var d=Dn(u),_=d.boundingClientRect;return new pt((a.clientX-_.left)/d.x-u.clientLeft,(a.clientY-_.top)/d.y-u.clientTop)}var Ri=Ct.linux&&Ct.chrome?window.devicePixelRatio:Ct.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function an(a){return Ct.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Ri:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Ci(a,u){var d=u.relatedTarget;if(!d)return!0;try{for(;d&&d!==a;)d=d.parentNode}catch{return!1}return d!==a}var Wi={__proto__:null,on:Mt,off:he,stopPropagation:ee,disableScrollPropagation:ai,disableClickPropagation:gr,preventDefault:Me,stop:Ai,getPropagationPath:Br,getMousePosition:Xi,getWheelDelta:an,isExternalTarget:Ci,addListener:Mt,removeListener:he},_r=vt.extend({run:function(a,u,d,_){this.stop(),this._el=a,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=Qi(a),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(a){var u=+new Date-this._startTime,d=this._duration*1e3;u<d?this._runFrame(this._easeOut(u/d),a):(this._runFrame(1),this._complete())},_runFrame:function(a,u){var d=this._startPos.add(this._offset.multiplyBy(a));u&&d._round(),ve(this._el,d),this.fire("step")},_complete:function(){q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Yt=vt.extend({options:{crs:Lr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,u){u=W(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Et(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=fr&&Ct.any3d&&!Ct.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Mt(this._proxy,Js,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,u,d){if(u=u===void 0?this._zoom:this._limitZoom(u),a=this._limitCenter(Et(a),u,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=l({animate:d.animate},d.zoom),d.pan=l({animate:d.animate,duration:d.duration},d.pan));var _=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,u,d.zoom):this._tryAnimatedPan(a,d.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(a,u,d.pan&&d.pan.noMoveStart),this},setZoom:function(a,u){return this._loaded?this.setView(this.getCenter(),a,{zoom:u}):(this._zoom=a,this)},zoomIn:function(a,u){return a=a||(Ct.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,u)},zoomOut:function(a,u){return a=a||(Ct.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,u)},setZoomAround:function(a,u,d){var _=this.getZoomScale(u),w=this.getSize().divideBy(2),R=a instanceof pt?a:this.latLngToContainerPoint(a),M=R.subtract(w).multiplyBy(1-1/_),Z=this.containerPointToLatLng(w.add(M));return this.setView(Z,u,{zoom:d})},_getBoundsCenterZoom:function(a,u){u=u||{},a=a.getBounds?a.getBounds():_t(a);var d=bt(u.paddingTopLeft||u.padding||[0,0]),_=bt(u.paddingBottomRight||u.padding||[0,0]),w=this.getBoundsZoom(a,!1,d.add(_));if(w=typeof u.maxZoom=="number"?Math.min(u.maxZoom,w):w,w===1/0)return{center:a.getCenter(),zoom:w};var R=_.subtract(d).divideBy(2),M=this.project(a.getSouthWest(),w),Z=this.project(a.getNorthEast(),w),tt=this.unproject(M.add(Z).divideBy(2).add(R),w);return{center:tt,zoom:w}},fitBounds:function(a,u){if(a=_t(a),!a.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(a,u);return this.setView(d.center,d.zoom,u)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,u){return this.setView(a,this._zoom,{pan:u})},panBy:function(a,u){if(a=bt(a).round(),u=u||{},!a.x&&!a.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _r,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){St(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,d,u.duration||.25,u.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,u,d){if(d=d||{},d.animate===!1||!Ct.any3d)return this.setView(a,u,d);this._stop();var _=this.project(this.getCenter()),w=this.project(a),R=this.getSize(),M=this._zoom;a=Et(a),u=u===void 0?M:u;var Z=Math.max(R.x,R.y),tt=Z*this.getZoomScale(M,u),ct=w.distanceTo(_)||1,Tt=1.42,Lt=Tt*Tt;function Zt(Be){var wr=Be?-1:1,Rs=Be?tt:Z,xu=tt*tt-Z*Z+wr*Lt*Lt*ct*ct,Oo=2*Rs*Lt*ct,Lo=xu/Oo,$r=Math.sqrt(Lo*Lo+1)-Lo,br=$r<1e-9?-18:Math.log($r);return br}function pn(Be){return(Math.exp(Be)-Math.exp(-Be))/2}function Ye(Be){return(Math.exp(Be)+Math.exp(-Be))/2}function $n(Be){return pn(Be)/Ye(Be)}var fe=Zt(0);function de(Be){return Z*(Ye(fe)/Ye(fe+Tt*Be))}function Xt(Be){return Z*(Ye(fe)*$n(fe+Tt*Be)-pn(fe))/Lt}function Yr(Be){return 1-Math.pow(1-Be,1.5)}var hi=Date.now(),Rl=(Zt(1)-fe)/Tt,Qr=d.duration?1e3*d.duration:1e3*Rl*.8;function Iu(){var Be=(Date.now()-hi)/Qr,wr=Yr(Be)*Rl;Be<=1?(this._flyToFrame=U(Iu,this),this._move(this.unproject(_.add(w.subtract(_).multiplyBy(Xt(wr)/ct)),M),this.getScaleZoom(Z/de(wr),M),{flyTo:!0})):this._move(a,u)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Iu.call(this),this},flyToBounds:function(a,u){var d=this._getBoundsCenterZoom(a,u);return this.flyTo(d.center,d.zoom,u)},setMaxBounds:function(a){return a=_t(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var u=this.options.minZoom;return this.options.minZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var u=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,u){this._enforcingBounds=!0;var d=this.getCenter(),_=this._limitCenter(d,this._zoom,_t(a));return d.equals(_)||this.panTo(_,u),this._enforcingBounds=!1,this},panInside:function(a,u){u=u||{};var d=bt(u.paddingTopLeft||u.padding||[0,0]),_=bt(u.paddingBottomRight||u.padding||[0,0]),w=this.project(this.getCenter()),R=this.project(a),M=this.getPixelBounds(),Z=st([M.min.add(d),M.max.subtract(_)]),tt=Z.getSize();if(!Z.contains(R)){this._enforcingBounds=!0;var ct=R.subtract(Z.getCenter()),Tt=Z.extend(R).getSize().subtract(tt);w.x+=ct.x<0?-Tt.x:Tt.x,w.y+=ct.y<0?-Tt.y:Tt.y,this.panTo(this.unproject(w),u),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=l({animate:!1,pan:!0},a===!0?{animate:!0}:a);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),_=u.divideBy(2).round(),w=d.divideBy(2).round(),R=_.subtract(w);return!R.x&&!R.y?this:(a.animate&&a.pan?this.panBy(R):(a.pan&&this._rawPanBy(R),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=l({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=m(this._handleGeolocationResponse,this),d=m(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,d,a):navigator.geolocation.getCurrentPosition(u,d,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var u=a.code,d=a.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var u=a.coords.latitude,d=a.coords.longitude,_=new wt(u,d),w=_.toBounds(a.coords.accuracy*2),R=this._locateOptions;if(R.setView){var M=this.getBoundsZoom(w);this.setView(_,R.maxZoom?Math.min(M,R.maxZoom):M)}var Z={latlng:_,bounds:w,timestamp:a.timestamp};for(var tt in a.coords)typeof a.coords[tt]=="number"&&(Z[tt]=a.coords[tt]);this.fire("locationfound",Z)}},addHandler:function(a,u){if(!u)return this;var d=this[a]=new u(this);return this._handlers.push(d),this.options[a]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),$t(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)$t(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,u){var d="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),_=Qt("div",d,u||this._mapPane);return a&&(this._panes[a]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),u=this.unproject(a.getBottomLeft()),d=this.unproject(a.getTopRight());return new gt(u,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,u,d){a=_t(a),d=bt(d||[0,0]);var _=this.getZoom()||0,w=this.getMinZoom(),R=this.getMaxZoom(),M=a.getNorthWest(),Z=a.getSouthEast(),tt=this.getSize().subtract(d),ct=st(this.project(Z,_),this.project(M,_)).getSize(),Tt=Ct.any3d?this.options.zoomSnap:1,Lt=tt.x/ct.x,Zt=tt.y/ct.y,pn=u?Math.max(Lt,Zt):Math.min(Lt,Zt);return _=this.getScaleZoom(pn,_),Tt&&(_=Math.round(_/(Tt/100))*(Tt/100),_=u?Math.ceil(_/Tt)*Tt:Math.floor(_/Tt)*Tt),Math.max(w,Math.min(R,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new pt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,u){var d=this._getTopLeftPoint(a,u);return new z(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,u){var d=this.options.crs;return u=u===void 0?this._zoom:u,d.scale(a)/d.scale(u)},getScaleZoom:function(a,u){var d=this.options.crs;u=u===void 0?this._zoom:u;var _=d.zoom(a*d.scale(u));return isNaN(_)?1/0:_},project:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Et(a),u)},unproject:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(bt(a),u)},layerPointToLatLng:function(a){var u=bt(a).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(a){var u=this.project(Et(a))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Et(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(_t(a))},distance:function(a,u){return this.options.crs.distance(Et(a),Et(u))},containerPointToLayerPoint:function(a){return bt(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return bt(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var u=this.containerPointToLayerPoint(bt(a));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Et(a)))},mouseEventToContainerPoint:function(a){return Xi(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var u=this._container=ta(a);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Mt(u,"scroll",this._onScroll,this),this._containerId=v(u)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ct.any3d,St(a,"leaflet-container"+(Ct.touch?" leaflet-touch":"")+(Ct.retina?" leaflet-retina":"")+(Ct.ielt9?" leaflet-oldie":"")+(Ct.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=kr(a,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ve(this._mapPane,new pt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(St(a.markerPane,"leaflet-zoom-hide"),St(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,u,d){ve(this._mapPane,new pt(0,0));var _=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var w=this._zoom!==u;this._moveStart(w,d)._move(a,u)._moveEnd(w),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(a,u){return a&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(a,u,d,_){u===void 0&&(u=this._zoom);var w=this._zoom!==u;return this._zoom=u,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),_?d&&d.pinch&&this.fire("zoom",d):((w||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){ve(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[v(this._container)]=this;var u=a?he:Mt;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ct.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){q(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,u){for(var d=[],_,w=u==="mouseout"||u==="mouseover",R=a.target||a.srcElement,M=!1;R;){if(_=this._targets[v(R)],_&&(u==="click"||u==="preclick")&&this._draggableMoved(_)){M=!0;break}if(_&&_.listens(u,!0)&&(w&&!Ci(R,a)||(d.push(_),w))||R===this._container)break;R=R.parentNode}return!d.length&&!M&&!w&&this.listens(u,!0)&&(d=[this]),d},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var u=a.target||a.srcElement;if(!(!this._loaded||u._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(u))){var d=a.type;d==="mousedown"&&Ur(u),this._fireDOMEvent(a,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,u,d){if(a.type==="click"){var _=l({},a);_.type="preclick",this._fireDOMEvent(_,_.type,d)}var w=this._findEventTargets(a,u);if(d){for(var R=[],M=0;M<d.length;M++)d[M].listens(u,!0)&&R.push(d[M]);w=R.concat(w)}if(w.length){u==="contextmenu"&&Me(a);var Z=w[0],tt={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var ct=Z.getLatLng&&(!Z._radius||Z._radius<=10);tt.containerPoint=ct?this.latLngToContainerPoint(Z.getLatLng()):this.mouseEventToContainerPoint(a),tt.layerPoint=this.containerPointToLayerPoint(tt.containerPoint),tt.latlng=ct?Z.getLatLng():this.layerPointToLatLng(tt.layerPoint)}for(M=0;M<w.length;M++)if(w[M].fire(u,tt,!0),tt.originalEvent._stopped||w[M].options.bubblingMouseEvents===!1&&xt(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,u=this._handlers.length;a<u;a++)this._handlers[a].disable()},whenReady:function(a,u){return this._loaded?a.call(u||this,{target:this}):this.on("load",a,u),this},_getMapPanePos:function(){return Qi(this._mapPane)||new pt(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,u){var d=a&&u!==void 0?this._getNewPixelOrigin(a,u):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,u){var d=this.getSize()._divideBy(2);return this.project(a,u)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,u,d){var _=this._getNewPixelOrigin(d,u);return this.project(a,u)._subtract(_)},_latLngBoundsToNewLayerBounds:function(a,u,d){var _=this._getNewPixelOrigin(d,u);return st([this.project(a.getSouthWest(),u)._subtract(_),this.project(a.getNorthWest(),u)._subtract(_),this.project(a.getSouthEast(),u)._subtract(_),this.project(a.getNorthEast(),u)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,u,d){if(!d)return a;var _=this.project(a,u),w=this.getSize().divideBy(2),R=new z(_.subtract(w),_.add(w)),M=this._getBoundsOffset(R,d,u);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?a:this.unproject(_.add(M),u)},_limitOffset:function(a,u){if(!u)return a;var d=this.getPixelBounds(),_=new z(d.min.add(a),d.max.add(a));return a.add(this._getBoundsOffset(_,u))},_getBoundsOffset:function(a,u,d){var _=st(this.project(u.getNorthEast(),d),this.project(u.getSouthWest(),d)),w=_.min.subtract(a.min),R=_.max.subtract(a.max),M=this._rebound(w.x,-R.x),Z=this._rebound(w.y,-R.y);return new pt(M,Z)},_rebound:function(a,u){return a+u>0?Math.round(a-u)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(u))},_limitZoom:function(a){var u=this.getMinZoom(),d=this.getMaxZoom(),_=Ct.any3d?this.options.zoomSnap:1;return _&&(a=Math.round(a/_)*_),Math.max(u,Math.min(d,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ye(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,u){var d=this._getCenterOffset(a)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,u),!0)},_createAnimProxy:function(){var a=this._proxy=Qt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(u){var d=ii,_=this._proxy.style[d];Si(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),_===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$t(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),u=this.getZoom();Si(this._proxy,this.project(a,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,u,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(u),w=this._getCenterOffset(a)._divideBy(1-1/_);return d.animate!==!0&&!this.getSize().contains(w)?!1:(U(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(a,u,!0)},this),!0)},_animateZoom:function(a,u,d,_){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=u,St(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:u,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ye(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jr(a,u){return new Yt(a,u)}var En=oe.extend({options:{position:"topright"},initialize:function(a){W(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var u=this._map;return u&&u.removeControl(this),this.options.position=a,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var u=this._container=this.onAdd(a),d=this.getPosition(),_=a._controlCorners[d];return St(u,"leaflet-control"),d.indexOf("bottom")!==-1?_.insertBefore(u,_.firstChild):_.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?($t(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Vn=function(a){return new En(a)};Yt.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},u="leaflet-",d=this._controlContainer=Qt("div",u+"control-container",this._container);function _(w,R){var M=u+w+" "+u+R;a[w+R]=Qt("div",M,d)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)$t(this._controlCorners[a]);$t(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ts=En.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,u,d,_){return d<_?-1:_<d?1:0}},initialize:function(a,u,d){W(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in a)this._addLayer(a[_],_);for(_ in u)this._addLayer(u[_],_,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return En.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,u){return this._addLayer(a,u),this._map?this._update():this},addOverlay:function(a,u){return this._addLayer(a,u,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var u=this._getLayer(v(a));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){St(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(St(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):ye(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ye(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",u=this._container=Qt("div",a),d=this.options.collapsed;u.setAttribute("aria-haspopup",!0),gr(u),ai(u);var _=this._section=Qt("section",a+"-list");d&&(this._map.on("click",this.collapse,this),Mt(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=Qt("a",a+"-toggle",u);w.href="#",w.title="Layers",w.setAttribute("role","button"),Mt(w,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){Me(R),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Qt("div",a+"-base",_),this._separator=Qt("div",a+"-separator",_),this._overlaysList=Qt("div",a+"-overlays",_),u.appendChild(_)},_getLayer:function(a){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&v(this._layers[u].layer)===a)return this._layers[u]},_addLayer:function(a,u,d){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:u,overlay:d}),this.options.sortLayers&&this._layers.sort(m(function(_,w){return this.options.sortFunction(_.layer,w.layer,_.name,w.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ne(this._baseLayersList),Ne(this._overlaysList),this._layerControlInputs=[];var a,u,d,_,w=0;for(d=0;d<this._layers.length;d++)_=this._layers[d],this._addItem(_),u=u||_.overlay,a=a||!_.overlay,w+=_.overlay?0:1;return this.options.hideSingleBase&&(a=a&&w>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=u&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var u=this._getLayer(v(a.target)),d=u.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;d&&this._map.fire(d,u)},_createRadioElement:function(a,u){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(u?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=d,_.firstChild},_addItem:function(a){var u=document.createElement("label"),d=this._map.hasLayer(a.layer),_;a.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=d):_=this._createRadioElement("leaflet-base-layers_"+v(this),d),this._layerControlInputs.push(_),_.layerId=v(a.layer),Mt(_,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+a.name;var R=document.createElement("span");u.appendChild(R),R.appendChild(_),R.appendChild(w);var M=a.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,u,d,_=[],w=[];this._handlingClick=!0;for(var R=a.length-1;R>=0;R--)u=a[R],d=this._getLayer(u.layerId).layer,u.checked?_.push(d):u.checked||w.push(d);for(R=0;R<w.length;R++)this._map.hasLayer(w[R])&&this._map.removeLayer(w[R]);for(R=0;R<_.length;R++)this._map.hasLayer(_[R])||this._map.addLayer(_[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,u,d,_=this._map.getZoom(),w=a.length-1;w>=0;w--)u=a[w],d=this._getLayer(u.layerId).layer,u.disabled=d.options.minZoom!==void 0&&_<d.options.minZoom||d.options.maxZoom!==void 0&&_>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Mt(a,"click",Me),this.expand();var u=this;setTimeout(function(){he(a,"click",Me),u._preventClick=!1})}}),co=function(a,u,d){return new Ts(a,u,d)},yr=En.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var u="leaflet-control-zoom",d=Qt("div",u+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,u+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,u+"-out",d,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,u,d,_,w){var R=Qt("a",d,_);return R.innerHTML=a,R.href="#",R.title=u,R.setAttribute("role","button"),R.setAttribute("aria-label",u),gr(R),Mt(R,"click",Ai),Mt(R,"click",w,this),Mt(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var a=this._map,u="leaflet-disabled";ye(this._zoomInButton,u),ye(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(St(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(St(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Yt.mergeOptions({zoomControl:!0}),Yt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new yr,this.addControl(this.zoomControl))});var ml=function(a){return new yr(a)},ho=En.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var u="leaflet-control-scale",d=Qt("div",u),_=this.options;return this._addScales(_,u+"-line",d),a.on(_.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),d},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,u,d){a.metric&&(this._mScale=Qt("div",u,d)),a.imperial&&(this._iScale=Qt("div",u,d))},_update:function(){var a=this._map,u=a.getSize().y/2,d=a.distance(a.containerPointToLatLng([0,u]),a.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(d)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var u=this._getRoundNum(a),d=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,d,u/a)},_updateImperial:function(a){var u=a*3.2808399,d,_,w;u>5280?(d=u/5280,_=this._getRoundNum(d),this._updateScale(this._iScale,_+" mi",_/d)):(w=this._getRoundNum(u),this._updateScale(this._iScale,w+" ft",w/u))},_updateScale:function(a,u,d){a.style.width=Math.round(this.options.maxWidth*d)+"px",a.innerHTML=u},_getRoundNum:function(a){var u=Math.pow(10,(Math.floor(a)+"").length-1),d=a/u;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,u*d}}),Es=function(a){return new ho(a)},fo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ra=En.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ct.inlineSvg?fo+" ":"")+"Leaflet</a>"},initialize:function(a){W(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=Qt("div","leaflet-control-attribution"),gr(this._container);for(var u in a._layers)a._layers[u].getAttribution&&this.addAttribution(a._layers[u].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var u in this._attributions)this._attributions[u]&&a.push(u);var d=[];this.options.prefix&&d.push(this.options.prefix),a.length&&d.push(a.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Yt.mergeOptions({attributionControl:!0}),Yt.addInitHook(function(){this.options.attributionControl&&new ra().addTo(this)});var sa=function(a){return new ra(a)};En.Layers=Ts,En.Zoom=yr,En.Scale=ho,En.Attribution=ra,Vn.layers=co,Vn.zoom=ml,Vn.scale=Es,Vn.attribution=sa;var Yn=oe.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Yn.addTo=function(a,u){return a.addHandler(u,this),this};var pl={Events:rt},Ii=Ct.touch?"touchstart mousedown":"mousedown",xi=vt.extend({options:{clickTolerance:3},initialize:function(a,u,d,_){W(this,_),this._element=a,this._dragStartTarget=u||a,this._preventOutline=d},enable:function(){this._enabled||(Mt(this._dragStartTarget,Ii,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xi._dragging===this&&this.finishDrag(!0),he(this._dragStartTarget,Ii,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!gs(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){xi._dragging===this&&this.finishDrag();return}if(!(xi._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(xi._dragging=this,this._preventOutline&&Ur(this._element),ys(),si(),!this._moving)){this.fire("down");var u=a.touches?a.touches[0]:a,d=ia(this._element);this._startPoint=new pt(u.clientX,u.clientY),this._startPos=Qi(this._element),this._parentScale=Dn(d);var _=a.type==="mousedown";Mt(document,_?"mousemove":"touchmove",this._onMove,this),Mt(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var u=a.touches&&a.touches.length===1?a.touches[0]:a,d=new pt(u.clientX,u.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Me(a),this._moved||(this.fire("dragstart"),this._moved=!0,St(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),St(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),ve(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){ye(document.body,"leaflet-dragging"),this._lastTarget&&(ye(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),he(document,"mousemove touchmove",this._onMove,this),he(document,"mouseup touchend touchcancel",this._onUp,this),Vr(),sn();var u=this._moved&&this._moving;this._moving=!1,xi._dragging=!1,u&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function mo(a,u,d){var _,w=[1,4,2,8],R,M,Z,tt,ct,Tt,Lt,Zt;for(R=0,Tt=a.length;R<Tt;R++)a[R]._code=nt(a[R],u);for(Z=0;Z<4;Z++){for(Lt=w[Z],_=[],R=0,Tt=a.length,M=Tt-1;R<Tt;M=R++)tt=a[R],ct=a[M],tt._code&Lt?ct._code&Lt||(Zt=Y(ct,tt,Lt,u,d),Zt._code=nt(Zt,u),_.push(Zt)):(ct._code&Lt&&(Zt=Y(ct,tt,Lt,u,d),Zt._code=nt(Zt,u),_.push(Zt)),_.push(tt));a=_}return a}function po(a,u){var d,_,w,R,M,Z,tt,ct,Tt;if(!a||a.length===0)throw new Error("latlngs not passed");le(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Lt=Et([0,0]),Zt=_t(a),pn=Zt.getNorthWest().distanceTo(Zt.getSouthWest())*Zt.getNorthEast().distanceTo(Zt.getNorthWest());pn<1700&&(Lt=aa(a));var Ye=a.length,$n=[];for(d=0;d<Ye;d++){var fe=Et(a[d]);$n.push(u.project(Et([fe.lat-Lt.lat,fe.lng-Lt.lng])))}for(Z=tt=ct=0,d=0,_=Ye-1;d<Ye;_=d++)w=$n[d],R=$n[_],M=w.y*R.x-R.y*w.x,tt+=(w.x+R.x)*M,ct+=(w.y+R.y)*M,Z+=M*3;Z===0?Tt=$n[0]:Tt=[tt/Z,ct/Z];var de=u.unproject(bt(Tt));return Et([de.lat+Lt.lat,de.lng+Lt.lng])}function aa(a){for(var u=0,d=0,_=0,w=0;w<a.length;w++){var R=Et(a[w]);u+=R.lat,d+=R.lng,_++}return Et([u/_,d/_])}var Hr={__proto__:null,clipPolygon:mo,polygonCenter:po,centroid:aa};function wn(a,u){if(!u||!a.length)return a.slice();var d=u*u;return a=E(a,d),a=vr(a,d),a}function go(a,u,d){return Math.sqrt(zt(a,u,d,!0))}function gl(a,u,d){return zt(a,u,d)}function vr(a,u){var d=a.length,_=typeof Uint8Array<"u"?Uint8Array:Array,w=new _(d);w[0]=w[d-1]=1,f(a,w,u,0,d-1);var R,M=[];for(R=0;R<d;R++)w[R]&&M.push(a[R]);return M}function f(a,u,d,_,w){var R=0,M,Z,tt;for(Z=_+1;Z<=w-1;Z++)tt=zt(a[Z],a[_],a[w],!0),tt>R&&(M=Z,R=tt);R>d&&(u[M]=1,f(a,u,d,_,M),f(a,u,d,M,w))}function E(a,u){for(var d=[a[0]],_=1,w=0,R=a.length;_<R;_++)yt(a[_],a[w])>u&&(d.push(a[_]),w=_);return w<R-1&&d.push(a[R-1]),d}var S;function x(a,u,d,_,w){var R=_?S:nt(a,d),M=nt(u,d),Z,tt,ct;for(S=M;;){if(!(R|M))return[a,u];if(R&M)return!1;Z=R||M,tt=Y(a,u,Z,d,w),ct=nt(tt,d),Z===R?(a=tt,R=ct):(u=tt,M=ct)}}function Y(a,u,d,_,w){var R=u.x-a.x,M=u.y-a.y,Z=_.min,tt=_.max,ct,Tt;return d&8?(ct=a.x+R*(tt.y-a.y)/M,Tt=tt.y):d&4?(ct=a.x+R*(Z.y-a.y)/M,Tt=Z.y):d&2?(ct=tt.x,Tt=a.y+M*(tt.x-a.x)/R):d&1&&(ct=Z.x,Tt=a.y+M*(Z.x-a.x)/R),new pt(ct,Tt,w)}function nt(a,u){var d=0;return a.x<u.min.x?d|=1:a.x>u.max.x&&(d|=2),a.y<u.min.y?d|=4:a.y>u.max.y&&(d|=8),d}function yt(a,u){var d=u.x-a.x,_=u.y-a.y;return d*d+_*_}function zt(a,u,d,_){var w=u.x,R=u.y,M=d.x-w,Z=d.y-R,tt=M*M+Z*Z,ct;return tt>0&&(ct=((a.x-w)*M+(a.y-R)*Z)/tt,ct>1?(w=d.x,R=d.y):ct>0&&(w+=M*ct,R+=Z*ct)),M=a.x-w,Z=a.y-R,_?M*M+Z*Z:new pt(w,R)}function le(a){return!ft(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function ue(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),le(a)}function Ie(a,u){var d,_,w,R,M,Z,tt,ct;if(!a||a.length===0)throw new Error("latlngs not passed");le(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Tt=Et([0,0]),Lt=_t(a),Zt=Lt.getNorthWest().distanceTo(Lt.getSouthWest())*Lt.getNorthEast().distanceTo(Lt.getNorthWest());Zt<1700&&(Tt=aa(a));var pn=a.length,Ye=[];for(d=0;d<pn;d++){var $n=Et(a[d]);Ye.push(u.project(Et([$n.lat-Tt.lat,$n.lng-Tt.lng])))}for(d=0,_=0;d<pn-1;d++)_+=Ye[d].distanceTo(Ye[d+1])/2;if(_===0)ct=Ye[0];else for(d=0,R=0;d<pn-1;d++)if(M=Ye[d],Z=Ye[d+1],w=M.distanceTo(Z),R+=w,R>_){tt=(R-_)/w,ct=[Z.x-tt*(Z.x-M.x),Z.y-tt*(Z.y-M.y)];break}var fe=u.unproject(bt(ct));return Et([fe.lat+Tt.lat,fe.lng+Tt.lng])}var oi={__proto__:null,simplify:wn,pointToSegmentDistance:go,closestPointOnSegment:gl,clipSegment:x,_getEdgeIntersection:Y,_getBitCode:nt,_sqClosestPointOnSegment:zt,isFlat:le,_flat:ue,polylineCenter:Ie},li={project:function(a){return new pt(a.lng,a.lat)},unproject:function(a){return new wt(a.y,a.x)},bounds:new z([-180,-90],[180,90])},Qn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var u=Math.PI/180,d=this.R,_=a.lat*u,w=this.R_MINOR/d,R=Math.sqrt(1-w*w),M=R*Math.sin(_),Z=Math.tan(Math.PI/4-_/2)/Math.pow((1-M)/(1+M),R/2);return _=-d*Math.log(Math.max(Z,1e-10)),new pt(a.lng*u*d,_)},unproject:function(a){for(var u=180/Math.PI,d=this.R,_=this.R_MINOR/d,w=Math.sqrt(1-_*_),R=Math.exp(-a.y/d),M=Math.PI/2-2*Math.atan(R),Z=0,tt=.1,ct;Z<15&&Math.abs(tt)>1e-7;Z++)ct=w*Math.sin(M),ct=Math.pow((1-ct)/(1+ct),w/2),tt=Math.PI/2-2*Math.atan(R*ct)-M,M+=tt;return new wt(M*u,a.x*u/d)}},Oi={__proto__:null,LonLat:li,Mercator:Qn,SphericalMercator:ur},ws=l({},we,{code:"EPSG:3395",projection:Qn,transformation:(function(){var a=.5/(Math.PI*Qn.R);return zi(a,.5,-a,.5)})()}),bs=l({},we,{code:"EPSG:4326",projection:li,transformation:zi(1/180,1,-1/180,.5)}),oa=l({},Ht,{projection:li,transformation:zi(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,u){var d=u.lng-a.lng,_=u.lat-a.lat;return Math.sqrt(d*d+_*_)},infinite:!0});Ht.Earth=we,Ht.EPSG3395=ws,Ht.EPSG3857=Lr,Ht.EPSG900913=Bi,Ht.EPSG4326=bs,Ht.Simple=oa;var Li=vt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[v(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[v(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var u=a.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var d=this.getEvents();u.on(d,this),this.once("remove",function(){u.off(d,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Yt.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var u=v(a);return this._layers[u]?this:(this._layers[u]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var u=v(a);return this._layers[u]?(this._loaded&&a.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return v(a)in this._layers},eachLayer:function(a,u){for(var d in this._layers)a.call(u,this._layers[d]);return this},_addLayers:function(a){a=a?ft(a)?a:[a]:[];for(var u=0,d=a.length;u<d;u++)this.addLayer(a[u])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[v(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var u=v(a);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,u=-1/0,d=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var w=this._zoomBoundLayers[_].options;a=w.minZoom===void 0?a:Math.min(a,w.minZoom),u=w.maxZoom===void 0?u:Math.max(u,w.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=a===1/0?void 0:a,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var la=Li.extend({initialize:function(a,u){W(this,u),this._layers={};var d,_;if(a)for(d=0,_=a.length;d<_;d++)this.addLayer(a[d])},addLayer:function(a){var u=this.getLayerId(a);return this._layers[u]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var u=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(a){var u=typeof a=="number"?a:this.getLayerId(a);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var u=Array.prototype.slice.call(arguments,1),d,_;for(d in this._layers)_=this._layers[d],_[a]&&_[a].apply(_,u);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,u){for(var d in this._layers)a.call(u,this._layers[d]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return v(a)}}),pd=function(a,u){return new la(a,u)},Ji=la.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),la.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),la.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new gt;for(var u in this._layers){var d=this._layers[u];a.extend(d.getBounds?d.getBounds():d.getLatLng())}return a}}),Yc=function(a,u){return new Ji(a,u)},tr=oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){W(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,u){var d=this._getIconUrl(a);if(!d){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(d,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(_,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(a,u){var d=this.options,_=d[u+"Size"];typeof _=="number"&&(_=[_,_]);var w=bt(_),R=bt(u==="shadow"&&d.shadowAnchor||d.iconAnchor||w&&w.divideBy(2,!0));a.className="leaflet-marker-"+u+" "+(d.className||""),R&&(a.style.marginLeft=-R.x+"px",a.style.marginTop=-R.y+"px"),w&&(a.style.width=w.x+"px",a.style.height=w.y+"px")},_createImg:function(a,u){return u=u||document.createElement("img"),u.src=a,u},_getIconUrl:function(a){return Ct.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function _o(a){return new tr(a)}var yo=tr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof yo.imagePath!="string"&&(yo.imagePath=this._detectIconPath()),(this.options.imagePath||yo.imagePath)+tr.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var u=function(d,_,w){var R=_.exec(d);return R&&R[w]};return a=u(a,/^url\((['"])?(.+)\1\)$/,2),a&&u(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=Qt("div","leaflet-default-icon-path",document.body),u=kr(a,"background-image")||kr(a,"backgroundImage");if(document.body.removeChild(a),u=this._stripUrl(u),u)return u;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),vo=Yn.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new xi(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),St(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ye(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var u=this._marker,d=u._map,_=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,R=Qi(u._icon),M=d.getPixelBounds(),Z=d.getPixelOrigin(),tt=st(M.min._subtract(Z).add(w),M.max._subtract(Z).subtract(w));if(!tt.contains(R)){var ct=bt((Math.max(tt.max.x,R.x)-tt.max.x)/(M.max.x-tt.max.x)-(Math.min(tt.min.x,R.x)-tt.min.x)/(M.min.x-tt.min.x),(Math.max(tt.max.y,R.y)-tt.max.y)/(M.max.y-tt.max.y)-(Math.min(tt.min.y,R.y)-tt.min.y)/(M.min.y-tt.min.y)).multiplyBy(_);d.panBy(ct,{animate:!1}),this._draggable._newPos._add(ct),this._draggable._startPos._add(ct),ve(u._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=U(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(q(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,a)))},_onDrag:function(a){var u=this._marker,d=u._shadow,_=Qi(u._icon),w=u._map.layerPointToLatLng(_);d&&ve(d,_),u._latlng=w,a.latlng=w,a.oldLatLng=this._oldLatLng,u.fire("move",a).fire("drag",a)},_onDragEnd:function(a){q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),To=Li.extend({options:{icon:new yo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,u){W(this,u),this._latlng=Et(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var u=this._latlng;return this._latlng=Et(a),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=a.icon.createIcon(this._icon),_=!1;d!==this._icon&&(this._icon&&this._removeIcon(),_=!0,a.title&&(d.title=a.title),d.tagName==="IMG"&&(d.alt=a.alt||"")),St(d,u),a.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mt(d,"focus",this._panOnFocus,this);var w=a.icon.createShadow(this._shadow),R=!1;w!==this._shadow&&(this._removeShadow(),R=!0),w&&(St(w,u),w.alt=""),this._shadow=w,a.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&R&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&he(this._icon,"focus",this._panOnFocus,this),$t(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$t(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&ve(this._icon,a),this._shadow&&ve(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(St(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vo)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vo(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Ce(this._icon,a),this._shadow&&Ce(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var u=this.options.icon.options,d=u.iconSize?bt(u.iconSize):bt(0,0),_=u.iconAnchor?bt(u.iconAnchor):bt(0,0);a.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:d.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Qc(a,u){return new To(a,u)}var er=Li.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return W(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ua=er.extend({options:{fill:!0,radius:10},initialize:function(a,u){W(this,u),this._latlng=Et(a),this._radius=this.options.radius},setLatLng:function(a){var u=this._latlng;return this._latlng=Et(a),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var u=a&&a.radius||this._radius;return er.prototype.setStyle.call(this,a),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,u=this._radiusY||a,d=this._clickTolerance(),_=[a+d,u+d];this._pxBounds=new z(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $c(a,u){return new ua(a,u)}var _l=ua.extend({initialize:function(a,u,d){if(typeof u=="number"&&(u=l({},d,{radius:u})),W(this,u),this._latlng=Et(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new gt(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:er.prototype.setStyle,_project:function(){var a=this._latlng.lng,u=this._latlng.lat,d=this._map,_=d.options.crs;if(_.distance===we.distance){var w=Math.PI/180,R=this._mRadius/we.R/w,M=d.project([u+R,a]),Z=d.project([u-R,a]),tt=M.add(Z).divideBy(2),ct=d.unproject(tt).lat,Tt=Math.acos((Math.cos(R*w)-Math.sin(u*w)*Math.sin(ct*w))/(Math.cos(u*w)*Math.cos(ct*w)))/w;(isNaN(Tt)||Tt===0)&&(Tt=R/Math.cos(Math.PI/180*u)),this._point=tt.subtract(d.getPixelOrigin()),this._radius=isNaN(Tt)?0:tt.x-d.project([ct,a-Tt]).x,this._radiusY=tt.y-M.y}else{var Lt=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Lt).x}this._updateBounds()}});function Xc(a,u,d){return new _l(a,u,d)}var Tr=er.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,u){W(this,u),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var u=1/0,d=null,_=zt,w,R,M=0,Z=this._parts.length;M<Z;M++)for(var tt=this._parts[M],ct=1,Tt=tt.length;ct<Tt;ct++){w=tt[ct-1],R=tt[ct];var Lt=_(a,w,R,!0);Lt<u&&(u=Lt,d=_(a,w,R))}return d&&(d.distance=Math.sqrt(u)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ie(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,u){return u=u||this._defaultShape(),a=Et(a),u.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new gt,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return le(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var u=[],d=le(a),_=0,w=a.length;_<w;_++)d?(u[_]=Et(a[_]),this._bounds.extend(u[_])):u[_]=this._convertLatLngs(a[_]);return u},_project:function(){var a=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),u=new pt(a,a);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(a,u,d){var _=a[0]instanceof wt,w=a.length,R,M;if(_){for(M=[],R=0;R<w;R++)M[R]=this._map.latLngToLayerPoint(a[R]),d.extend(M[R]);u.push(M)}else for(R=0;R<w;R++)this._projectLatlngs(a[R],u,d)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,d,_,w,R,M,Z,tt;for(d=0,w=0,R=this._rings.length;d<R;d++)for(tt=this._rings[d],_=0,M=tt.length;_<M-1;_++)Z=x(tt[_],tt[_+1],a,_,!0),Z&&(u[w]=u[w]||[],u[w].push(Z[0]),(Z[1]!==tt[_+1]||_===M-2)&&(u[w].push(Z[1]),w++))}},_simplifyPoints:function(){for(var a=this._parts,u=this.options.smoothFactor,d=0,_=a.length;d<_;d++)a[d]=wn(a[d],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,u){var d,_,w,R,M,Z,tt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(d=0,R=this._parts.length;d<R;d++)for(Z=this._parts[d],_=0,M=Z.length,w=M-1;_<M;w=_++)if(!(!u&&_===0)&&go(a,Z[w],Z[_])<=tt)return!0;return!1}});function gd(a,u){return new Tr(a,u)}Tr._flat=ue;var ca=Tr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return po(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var u=Tr.prototype._convertLatLngs.call(this,a),d=u.length;return d>=2&&u[0]instanceof wt&&u[0].equals(u[d-1])&&u.pop(),u},_setLatLngs:function(a){Tr.prototype._setLatLngs.call(this,a),le(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return le(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,u=this.options.weight,d=new pt(u,u);if(a=new z(a.min.subtract(d),a.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,w=this._rings.length,R;_<w;_++)R=mo(this._rings[_],a,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var u=!1,d,_,w,R,M,Z,tt,ct;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(R=0,tt=this._parts.length;R<tt;R++)for(d=this._parts[R],M=0,ct=d.length,Z=ct-1;M<ct;Z=M++)_=d[M],w=d[Z],_.y>a.y!=w.y>a.y&&a.x<(w.x-_.x)*(a.y-_.y)/(w.y-_.y)+_.x&&(u=!u);return u||Tr.prototype._containsPoint.call(this,a,!0)}});function _d(a,u){return new ca(a,u)}var Er=Ji.extend({initialize:function(a,u){W(this,u),this._layers={},a&&this.addData(a)},addData:function(a){var u=ft(a)?a:a.features,d,_,w;if(u){for(d=0,_=u.length;d<_;d++)w=u[d],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var R=this.options;if(R.filter&&!R.filter(a))return this;var M=bn(a,R);return M?(M.feature=Tl(a),M.defaultOptions=M.options,this.resetStyle(M),R.onEachFeature&&R.onEachFeature(a,M),this.addLayer(M)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=l({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(u){this._setLayerStyle(u,a)},this)},_setLayerStyle:function(a,u){a.setStyle&&(typeof u=="function"&&(u=u(a.feature)),a.setStyle(u))}});function bn(a,u){var d=a.type==="Feature"?a.geometry:a,_=d?d.coordinates:null,w=[],R=u&&u.pointToLayer,M=u&&u.coordsToLatLng||yl,Z,tt,ct,Tt;if(!_&&!d)return null;switch(d.type){case"Point":return Z=M(_),ha(R,a,Z,u);case"MultiPoint":for(ct=0,Tt=_.length;ct<Tt;ct++)Z=M(_[ct]),w.push(ha(R,a,Z,u));return new Ji(w);case"LineString":case"MultiLineString":return tt=Eo(_,d.type==="LineString"?0:1,M),new Tr(tt,u);case"Polygon":case"MultiPolygon":return tt=Eo(_,d.type==="Polygon"?1:2,M),new ca(tt,u);case"GeometryCollection":for(ct=0,Tt=d.geometries.length;ct<Tt;ct++){var Lt=bn({geometry:d.geometries[ct],type:"Feature",properties:a.properties},u);Lt&&w.push(Lt)}return new Ji(w);case"FeatureCollection":for(ct=0,Tt=d.features.length;ct<Tt;ct++){var Zt=bn(d.features[ct],u);Zt&&w.push(Zt)}return new Ji(w);default:throw new Error("Invalid GeoJSON object.")}}function ha(a,u,d,_){return a?a(u,d):new To(d,_&&_.markersInheritOptions&&_)}function yl(a){return new wt(a[1],a[0],a[2])}function Eo(a,u,d){for(var _=[],w=0,R=a.length,M;w<R;w++)M=u?Eo(a[w],u-1,d):(d||yl)(a[w]),_.push(M);return _}function vl(a,u){return a=Et(a),a.alt!==void 0?[O(a.lng,u),O(a.lat,u),O(a.alt,u)]:[O(a.lng,u),O(a.lat,u)]}function wo(a,u,d,_){for(var w=[],R=0,M=a.length;R<M;R++)w.push(u?wo(a[R],le(a[R])?0:u-1,d,_):vl(a[R],_));return!u&&d&&w.length>0&&w.push(w[0].slice()),w}function qr(a,u){return a.feature?l({},a.feature,{geometry:u}):Tl(u)}function Tl(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var Fr={toGeoJSON:function(a){return qr(this,{type:"Point",coordinates:vl(this.getLatLng(),a)})}};To.include(Fr),_l.include(Fr),ua.include(Fr),Tr.include({toGeoJSON:function(a){var u=!le(this._latlngs),d=wo(this._latlngs,u?1:0,!1,a);return qr(this,{type:(u?"Multi":"")+"LineString",coordinates:d})}}),ca.include({toGeoJSON:function(a){var u=!le(this._latlngs),d=u&&!le(this._latlngs[0]),_=wo(this._latlngs,d?2:u?1:0,!0,a);return u||(_=[_]),qr(this,{type:(d?"Multi":"")+"Polygon",coordinates:_})}}),la.include({toMultiPoint:function(a){var u=[];return this.eachLayer(function(d){u.push(d.toGeoJSON(a).geometry.coordinates)}),qr(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(a){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(a);var d=u==="GeometryCollection",_=[];return this.eachLayer(function(w){if(w.toGeoJSON){var R=w.toGeoJSON(a);if(d)_.push(R.geometry);else{var M=Tl(R);M.type==="FeatureCollection"?_.push.apply(_,M.features):_.push(M)}}}),d?qr(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function El(a,u){return new Er(a,u)}var bo=El,fa=Li.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,u,d){this._url=a,this._bounds=_t(u),W(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(St(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$t(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Pe(this._image),this},bringToBack:function(){return this._map&&Zn(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=_t(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",u=this._image=a?this._url:Qt("img");if(St(u,"leaflet-image-layer"),this._zoomAnimated&&St(u,"leaflet-zoom-animated"),this.options.className&&St(u,this.options.className),u.onselectstart=C,u.onmousemove=C,u.onload=m(this.fire,this,"load"),u.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(a){var u=this._map.getZoomScale(a.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Si(this._image,d,u)},_reset:function(){var a=this._image,u=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=u.getSize();ve(a,u.min),a.style.width=d.x+"px",a.style.height=d.y+"px"},_updateOpacity:function(){Ce(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Wc=function(a,u,d){return new fa(a,u,d)},Gr=fa.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",u=this._image=a?this._url:Qt("video");if(St(u,"leaflet-image-layer"),this._zoomAnimated&&St(u,"leaflet-zoom-animated"),this.options.className&&St(u,this.options.className),u.onselectstart=C,u.onmousemove=C,u.onloadeddata=m(this.fire,this,"load"),a){for(var d=u.getElementsByTagName("source"),_=[],w=0;w<d.length;w++)_.push(d[w].src);this._url=d.length>0?_:[u.src];return}ft(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var M=Qt("source");M.src=this._url[R],u.appendChild(M)}}});function da(a,u,d){return new Gr(a,u,d)}var wl=fa.extend({_initImage:function(){var a=this._image=this._url;St(a,"leaflet-image-layer"),this._zoomAnimated&&St(a,"leaflet-zoom-animated"),this.options.className&&St(a,this.options.className),a.onselectstart=C,a.onmousemove=C}});function Jc(a,u,d){return new wl(a,u,d)}var Sn=Li.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,u){a&&(a instanceof wt||ft(a))?(this._latlng=Et(a),W(this,u)):(W(this,a),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Ce(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Ce(this._container,1),this.bringToFront(),this.options.interactive&&(St(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Ce(this._container,0),this._removeTimeout=setTimeout(m($t,void 0,this._container),200)):$t(this._container),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Et(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Pe(this._container),this},bringToBack:function(){return this._map&&Zn(this._container),this},_prepareOpen:function(a){var u=this._source;if(!u._map)return!1;if(u instanceof Ji){u=null;var d=this._source._layers;for(var _ in d)if(d[_]._map){u=d[_];break}if(!u)return!1;this._source=u}if(!a)if(u.getCenter)a=u.getCenter();else if(u.getLatLng)a=u.getLatLng();else if(u.getBounds)a=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")a.innerHTML=u;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),u=bt(this.options.offset),d=this._getAnchor();this._zoomAnimated?ve(this._container,a.add(d)):u=u.add(a).add(d);var _=this._containerBottom=-u.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=_+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});Yt.include({_initOverlay:function(a,u,d,_){var w=u;return w instanceof a||(w=new a(_).setContent(u)),d&&w.setLatLng(d),w}}),Li.include({_initOverlay:function(a,u,d,_){var w=d;return w instanceof a?(W(w,_),w._source=this):(w=u&&!_?u:new a(_,this),w.setContent(d)),w}});var So=Sn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Sn.prototype.openOn.call(this,a)},onAdd:function(a){Sn.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof er||this._source.on("preclick",ee))},onRemove:function(a){Sn.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof er||this._source.off("preclick",ee))},getEvents:function(){var a=Sn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",u=this._container=Qt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Qt("div",a+"-content-wrapper",u);if(this._contentNode=Qt("div",a+"-content",d),gr(u),ai(this._contentNode),Mt(u,"contextmenu",ee),this._tipContainer=Qt("div",a+"-tip-container",u),this._tip=Qt("div",a+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Qt("a",a+"-close-button",u);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',Mt(_,"click",function(w){Me(w),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,u=a.style;u.width="",u.whiteSpace="nowrap";var d=a.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),u.width=d+1+"px",u.whiteSpace="",u.height="";var _=a.offsetHeight,w=this.options.maxHeight,R="leaflet-popup-scrolled";w&&_>w?(u.height=w+"px",St(a,R)):ye(a,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),d=this._getAnchor();ve(this._container,u.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,u=parseInt(kr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+u,_=this._containerWidth,w=new pt(this._containerLeft,-d-this._containerBottom);w._add(Qi(this._container));var R=a.layerPointToContainerPoint(w),M=bt(this.options.autoPanPadding),Z=bt(this.options.autoPanPaddingTopLeft||M),tt=bt(this.options.autoPanPaddingBottomRight||M),ct=a.getSize(),Tt=0,Lt=0;R.x+_+tt.x>ct.x&&(Tt=R.x+_-ct.x+tt.x),R.x-Tt-Z.x<0&&(Tt=R.x-Z.x),R.y+d+tt.y>ct.y&&(Lt=R.y+d-ct.y+tt.y),R.y-Lt-Z.y<0&&(Lt=R.y-Z.y),(Tt||Lt)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Tt,Lt]))}},_getAnchor:function(){return bt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),th=function(a,u){return new So(a,u)};Yt.mergeOptions({closePopupOnClick:!0}),Yt.include({openPopup:function(a,u,d){return this._initOverlay(So,a,u,d).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Li.include({bindPopup:function(a,u){return this._popup=this._initOverlay(So,this._popup,a,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Ji||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Ai(a);var u=a.layer||a.target;if(this._popup._source===u&&!(u instanceof er)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=u,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Ao=Sn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Sn.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Sn.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Sn.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",u=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Qt("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var u,d,_=this._map,w=this._container,R=_.latLngToContainerPoint(_.getCenter()),M=_.layerPointToContainerPoint(a),Z=this.options.direction,tt=w.offsetWidth,ct=w.offsetHeight,Tt=bt(this.options.offset),Lt=this._getAnchor();Z==="top"?(u=tt/2,d=ct):Z==="bottom"?(u=tt/2,d=0):Z==="center"?(u=tt/2,d=ct/2):Z==="right"?(u=0,d=ct/2):Z==="left"?(u=tt,d=ct/2):M.x<R.x?(Z="right",u=0,d=ct/2):(Z="left",u=tt+(Tt.x+Lt.x)*2,d=ct/2),a=a.subtract(bt(u,d,!0)).add(Tt).add(Lt),ye(w,"leaflet-tooltip-right"),ye(w,"leaflet-tooltip-left"),ye(w,"leaflet-tooltip-top"),ye(w,"leaflet-tooltip-bottom"),St(w,"leaflet-tooltip-"+Z),ve(w,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Ce(this._container,a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(u)},_getAnchor:function(){return bt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),yd=function(a,u){return new Ao(a,u)};Yt.include({openTooltip:function(a,u,d){return this._initOverlay(Ao,a,u,d).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Li.include({bindTooltip:function(a,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ao,this._tooltip,a,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var u=a?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[u](d),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Ji||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&(Mt(u,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Mt(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var u=a.latlng,d,_;this._tooltip.options.sticky&&a.originalEvent&&(d=this._map.mouseEventToContainerPoint(a.originalEvent),_=this._map.containerPointToLayerPoint(d),u=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(u)}});var eh=tr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var u=a&&a.tagName==="DIV"?a:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Ne(u),u.appendChild(d.html)):u.innerHTML=d.html!==!1?d.html:"",d.bgPos){var _=bt(d.bgPos);u.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function vd(a){return new eh(a)}tr.Default=yo;var ma=Li.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ct.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){W(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),$t(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Pe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Zn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=T(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof pt?a:new pt(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var u=this.getPane().children,d=-a(-1/0,1/0),_=0,w=u.length,R;_<w;_++)R=u[_].style.zIndex,u[_]!==this._container&&R&&(d=a(d,+R));isFinite(d)&&(this.options.zIndex=d+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ct.ielt9){Ce(this._container,this.options.opacity);var a=+new Date,u=!1,d=!1;for(var _ in this._tiles){var w=this._tiles[_];if(!(!w.current||!w.loaded)){var R=Math.min(1,(a-w.loaded)/200);Ce(w.el,R),R<1?u=!0:(w.active?d=!0:this._onOpaqueTile(w),w.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),u&&(q(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:C,_initContainer:function(){this._container||(this._container=Qt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,u=this.options.maxZoom;if(a!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===a?(this._levels[d].el.style.zIndex=u-Math.abs(a-d),this._onUpdateLevel(d)):($t(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var _=this._levels[a],w=this._map;return _||(_=this._levels[a]={},_.el=Qt("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=u,_.origin=w.project(w.unproject(w.getPixelOrigin()),a).round(),_.zoom=a,this._setZoomTransform(_,w.getCenter(),w.getZoom()),C(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:C,_onRemoveLevel:C,_onCreateLevel:C,_pruneTiles:function(){if(this._map){var a,u,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)u=this._tiles[a],u.retain=u.current;for(a in this._tiles)if(u=this._tiles[a],u.current&&!u.active){var _=u.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var u in this._tiles)this._tiles[u].coords.z===a&&this._removeTile(u)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)$t(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,u,d,_){var w=Math.floor(a/2),R=Math.floor(u/2),M=d-1,Z=new pt(+w,+R);Z.z=+M;var tt=this._tileCoordsToKey(Z),ct=this._tiles[tt];return ct&&ct.active?(ct.retain=!0,!0):(ct&&ct.loaded&&(ct.retain=!0),M>_?this._retainParent(w,R,M,_):!1)},_retainChildren:function(a,u,d,_){for(var w=2*a;w<2*a+2;w++)for(var R=2*u;R<2*u+2;R++){var M=new pt(w,R);M.z=d+1;var Z=this._tileCoordsToKey(M),tt=this._tiles[Z];if(tt&&tt.active){tt.retain=!0;continue}else tt&&tt.loaded&&(tt.retain=!0);d+1<_&&this._retainChildren(w,R,d+1,_)}},_resetView:function(a){var u=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var u=this.options;return u.minNativeZoom!==void 0&&a<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<a?u.maxNativeZoom:a},_setView:function(a,u,d,_){var w=Math.round(u);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var R=this.options.updateWhenZooming&&w!==this._tileZoom;(!_||R)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(a),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(a,u)},_setZoomTransforms:function(a,u){for(var d in this._levels)this._setZoomTransform(this._levels[d],a,u)},_setZoomTransform:function(a,u,d){var _=this._map.getZoomScale(d,a.zoom),w=a.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(u,d)).round();Ct.any3d?Si(a.el,w,_):ve(a.el,w)},_resetGrid:function(){var a=this._map,u=a.options.crs,d=this._tileSize=this.getTileSize(),_=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,u.wrapLng[0]],_).x/d.x),Math.ceil(a.project([0,u.wrapLng[1]],_).x/d.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([u.wrapLat[0],0],_).y/d.x),Math.ceil(a.project([u.wrapLat[1],0],_).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var u=this._map,d=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),_=u.getZoomScale(d,this._tileZoom),w=u.project(a,this._tileZoom).floor(),R=u.getSize().divideBy(_*2);return new z(w.subtract(R),w.add(R))},_update:function(a){var u=this._map;if(u){var d=this._clampZoom(u.getZoom());if(a===void 0&&(a=u.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(a),w=this._pxBoundsToTileRange(_),R=w.getCenter(),M=[],Z=this.options.keepBuffer,tt=new z(w.getBottomLeft().subtract([Z,-Z]),w.getTopRight().add([Z,-Z]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ct in this._tiles){var Tt=this._tiles[ct].coords;(Tt.z!==this._tileZoom||!tt.contains(new pt(Tt.x,Tt.y)))&&(this._tiles[ct].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(a,d);return}for(var Lt=w.min.y;Lt<=w.max.y;Lt++)for(var Zt=w.min.x;Zt<=w.max.x;Zt++){var pn=new pt(Zt,Lt);if(pn.z=this._tileZoom,!!this._isValidTile(pn)){var Ye=this._tiles[this._tileCoordsToKey(pn)];Ye?Ye.current=!0:M.push(pn)}}if(M.sort(function(fe,de){return fe.distanceTo(R)-de.distanceTo(R)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var $n=document.createDocumentFragment();for(Zt=0;Zt<M.length;Zt++)this._addTile(M[Zt],$n);this._level.el.appendChild($n)}}}},_isValidTile:function(a){var u=this._map.options.crs;if(!u.infinite){var d=this._globalTileRange;if(!u.wrapLng&&(a.x<d.min.x||a.x>d.max.x)||!u.wrapLat&&(a.y<d.min.y||a.y>d.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(a);return _t(this.options.bounds).overlaps(_)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var u=this._map,d=this.getTileSize(),_=a.scaleBy(d),w=_.add(d),R=u.unproject(_,a.z),M=u.unproject(w,a.z);return[R,M]},_tileCoordsToBounds:function(a){var u=this._tileCoordsToNwSe(a),d=new gt(u[0],u[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var u=a.split(":"),d=new pt(+u[0],+u[1]);return d.z=+u[2],d},_removeTile:function(a){var u=this._tiles[a];u&&($t(u.el),delete this._tiles[a],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){St(a,"leaflet-tile");var u=this.getTileSize();a.style.width=u.x+"px",a.style.height=u.y+"px",a.onselectstart=C,a.onmousemove=C,Ct.ielt9&&this.options.opacity<1&&Ce(a,this.options.opacity)},_addTile:function(a,u){var d=this._getTilePos(a),_=this._tileCoordsToKey(a),w=this.createTile(this._wrapCoords(a),m(this._tileReady,this,a));this._initTile(w),this.createTile.length<2&&U(m(this._tileReady,this,a,null,w)),ve(w,d),this._tiles[_]={el:w,coords:a,current:!0},u.appendChild(w),this.fire("tileloadstart",{tile:w,coords:a})},_tileReady:function(a,u,d){u&&this.fire("tileerror",{error:u,tile:d,coords:a});var _=this._tileCoordsToKey(a);d=this._tiles[_],d&&(d.loaded=+new Date,this._map._fadeAnimated?(Ce(d.el,0),q(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),u||(St(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ct.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var u=new pt(this._wrapX?A(a.x,this._wrapX):a.x,this._wrapY?A(a.y,this._wrapY):a.y);return u.z=a.z,u},_pxBoundsToTileRange:function(a){var u=this.getTileSize();return new z(a.min.unscaleBy(u).floor(),a.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function nh(a){return new ma(a)}var Zr=ma.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,u){this._url=a,u=W(this,u),u.detectRetina&&Ct.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,u){return this._url===a&&u===void 0&&(u=!0),this._url=a,u||this.redraw(),this},createTile:function(a,u){var d=document.createElement("img");return Mt(d,"load",m(this._tileOnLoad,this,u,d)),Mt(d,"error",m(this._tileOnError,this,u,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(a),d},getTileUrl:function(a){var u={r:Ct.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-a.y;this.options.tms&&(u.y=d),u["-y"]=d}return ut(this._url,l(u,this.options))},_tileOnLoad:function(a,u){Ct.ielt9?setTimeout(m(a,this,null,u),0):a(null,u)},_tileOnError:function(a,u,d){var _=this.options.errorTileUrl;_&&u.getAttribute("src")!==_&&(u.src=_),a(d,u)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,u=this.options.maxZoom,d=this.options.zoomReverse,_=this.options.zoomOffset;return d&&(a=u-a),a+_},_getSubdomain:function(a){var u=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var a,u;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(u=this._tiles[a].el,u.onload=C,u.onerror=C,!u.complete)){u.src=kt;var d=this._tiles[a].coords;$t(u),delete this._tiles[a],this.fire("tileabort",{tile:u,coords:d})}},_removeTile:function(a){var u=this._tiles[a];if(u)return u.el.setAttribute("src",kt),ma.prototype._removeTile.call(this,a)},_tileReady:function(a,u,d){if(!(!this._map||d&&d.getAttribute("src")===kt))return ma.prototype._tileReady.call(this,a,u,d)}});function ui(a,u){return new Zr(a,u)}var Ro=Zr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,u){this._url=a;var d=l({},this.defaultWmsParams);for(var _ in u)_ in this.options||(d[_]=u[_]);u=W(this,u);var w=u.detectRetina&&Ct.retina?2:1,R=this.getTileSize();d.width=R.x*w,d.height=R.y*w,this.wmsParams=d},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Zr.prototype.onAdd.call(this,a)},getTileUrl:function(a){var u=this._tileCoordsToNwSe(a),d=this._crs,_=st(d.project(u[0]),d.project(u[1])),w=_.min,R=_.max,M=(this._wmsVersion>=1.3&&this._crs===bs?[w.y,w.x,R.y,R.x]:[w.x,w.y,R.x,R.y]).join(","),Z=Zr.prototype.getTileUrl.call(this,a);return Z+Q(this.wmsParams,Z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(a,u){return l(this.wmsParams,a),u||this.redraw(),this}});function ci(a,u){return new Ro(a,u)}Zr.WMS=Ro,ui.wms=ci;var Un=Li.extend({options:{padding:.1},initialize:function(a){W(this,a),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),St(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,u){var d=this._map.getZoomScale(u,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,u),R=_.multiplyBy(-d).add(w).subtract(this._map._getNewPixelOrigin(a,u));Ct.any3d?Si(this._container,R,d):ve(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,u=this._map.getSize(),d=this._map.containerPointToLayerPoint(u.multiplyBy(-a)).round();this._bounds=new z(d,d.add(u.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bl=Un.extend({options:{tolerance:0},getEvents:function(){var a=Un.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Un.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Mt(a,"mousemove",this._onMouseMove,this),Mt(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Mt(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){q(this._redrawRequest),delete this._ctx,$t(this._container),he(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var u in this._layers)a=this._layers[u],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Un.prototype._update.call(this);var a=this._bounds,u=this._container,d=a.getSize(),_=Ct.retina?2:1;ve(u,a.min),u.width=_*d.x,u.height=_*d.y,u.style.width=d.x+"px",u.style.height=d.y+"px",Ct.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Un.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[v(a)]=a;var u=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var u=a._order,d=u.next,_=u.prev;d?d.prev=_:this._drawLast=_,_?_.next=d:this._drawFirst=d,delete a._order,delete this._layers[v(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var u=a.options.dashArray.split(/[, ]+/),d=[],_,w;for(w=0;w<u.length;w++){if(_=Number(u[w]),isNaN(_))return;d.push(_)}a.options._dashArray=d}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var u=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(a._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(a._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var u=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,u=this._redrawBounds;if(this._ctx.save(),u){var d=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)a=_.layer,(!u||a._pxBounds&&a._pxBounds.intersects(u))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,u){if(this._drawing){var d,_,w,R,M=a._parts,Z=M.length,tt=this._ctx;if(Z){for(tt.beginPath(),d=0;d<Z;d++){for(_=0,w=M[d].length;_<w;_++)R=M[d][_],tt[_?"lineTo":"moveTo"](R.x,R.y);u&&tt.closePath()}this._fillStroke(tt,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var u=a._point,d=this._ctx,_=Math.max(Math.round(a._radius),1),w=(Math.max(Math.round(a._radiusY),1)||_)/_;w!==1&&(d.save(),d.scale(1,w)),d.beginPath(),d.arc(u.x,u.y/w,_,0,Math.PI*2,!1),w!==1&&d.restore(),this._fillStroke(d,a)}},_fillStroke:function(a,u){var d=u.options;d.fill&&(a.globalAlpha=d.fillOpacity,a.fillStyle=d.fillColor||d.color,a.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(a.setLineDash&&a.setLineDash(u.options&&u.options._dashArray||[]),a.globalAlpha=d.opacity,a.lineWidth=d.weight,a.strokeStyle=d.color,a.lineCap=d.lineCap,a.lineJoin=d.lineJoin,a.stroke())},_onClick:function(a){for(var u=this._map.mouseEventToLayerPoint(a),d,_,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(u)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(d))&&(_=d);this._fireEvent(_?[_]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,u)}},_handleMouseOut:function(a){var u=this._hoveredLayer;u&&(ye(this._container,"leaflet-interactive"),this._fireEvent([u],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,u){if(!this._mouseHoverThrottled){for(var d,_,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(u)&&(_=d);_!==this._hoveredLayer&&(this._handleMouseOut(a),_&&(St(this._container,"leaflet-interactive"),this._fireEvent([_],a,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,u,d){this._map._fireDOMEvent(u,d||u.type,a)},_bringToFront:function(a){var u=a._order;if(u){var d=u.next,_=u.prev;if(d)d.prev=_;else return;_?_.next=d:d&&(this._drawFirst=d),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(a)}},_bringToBack:function(a){var u=a._order;if(u){var d=u.next,_=u.prev;if(_)_.next=d;else return;d?d.prev=_:_&&(this._drawLast=_),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(a)}}});function Co(a){return Ct.canvas?new bl(a):null}var Kr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Su={_initContainer:function(){this._container=Qt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Un.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var u=a._container=Kr("shape");St(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",a._path=Kr("path"),u.appendChild(a._path),this._updateStyle(a),this._layers[v(a)]=a},_addPath:function(a){var u=a._container;this._container.appendChild(u),a.options.interactive&&a.addInteractiveTarget(u)},_removePath:function(a){var u=a._container;$t(u),a.removeInteractiveTarget(u),delete this._layers[v(a)]},_updateStyle:function(a){var u=a._stroke,d=a._fill,_=a.options,w=a._container;w.stroked=!!_.stroke,w.filled=!!_.fill,_.stroke?(u||(u=a._stroke=Kr("stroke")),w.appendChild(u),u.weight=_.weight+"px",u.color=_.color,u.opacity=_.opacity,_.dashArray?u.dashStyle=ft(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=_.lineCap.replace("butt","flat"),u.joinstyle=_.lineJoin):u&&(w.removeChild(u),a._stroke=null),_.fill?(d||(d=a._fill=Kr("fill")),w.appendChild(d),d.color=_.fillColor||_.color,d.opacity=_.fillOpacity):d&&(w.removeChild(d),a._fill=null)},_updateCircle:function(a){var u=a._point.round(),d=Math.round(a._radius),_=Math.round(a._radiusY||d);this._setPath(a,a._empty()?"M0 0":"AL "+u.x+","+u.y+" "+d+","+_+" 0,"+65535*360)},_setPath:function(a,u){a._path.v=u},_bringToFront:function(a){Pe(a._container)},_bringToBack:function(a){Zn(a._container)}},nr=Ct.vml?Kr:Qs,pa=Un.extend({_initContainer:function(){this._container=nr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=nr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$t(this._container),he(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Un.prototype._update.call(this);var a=this._bounds,u=a.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,d.setAttribute("width",u.x),d.setAttribute("height",u.y)),ve(d,a.min),d.setAttribute("viewBox",[a.min.x,a.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(a){var u=a._path=nr("path");a.options.className&&St(u,a.options.className),a.options.interactive&&St(u,"leaflet-interactive"),this._updateStyle(a),this._layers[v(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){$t(a._path),a.removeInteractiveTarget(a._path),delete this._layers[v(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var u=a._path,d=a.options;u&&(d.stroke?(u.setAttribute("stroke",d.color),u.setAttribute("stroke-opacity",d.opacity),u.setAttribute("stroke-width",d.weight),u.setAttribute("stroke-linecap",d.lineCap),u.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?u.setAttribute("stroke-dasharray",d.dashArray):u.removeAttribute("stroke-dasharray"),d.dashOffset?u.setAttribute("stroke-dashoffset",d.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),d.fill?(u.setAttribute("fill",d.fillColor||d.color),u.setAttribute("fill-opacity",d.fillOpacity),u.setAttribute("fill-rule",d.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(a,u){this._setPath(a,Nr(a._parts,u))},_updateCircle:function(a){var u=a._point,d=Math.max(Math.round(a._radius),1),_=Math.max(Math.round(a._radiusY),1)||d,w="a"+d+","+_+" 0 1,0 ",R=a._empty()?"M0 0":"M"+(u.x-d)+","+u.y+w+d*2+",0 "+w+-d*2+",0 ";this._setPath(a,R)},_setPath:function(a,u){a._path.setAttribute("d",u)},_bringToFront:function(a){Pe(a._path)},_bringToBack:function(a){Zn(a._path)}});Ct.vml&&pa.include(Su);function Io(a){return Ct.svg||Ct.vml?new pa(a):null}Yt.include({getRenderer:function(a){var u=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var u=this._paneRenderers[a];return u===void 0&&(u=this._createRenderer({pane:a}),this._paneRenderers[a]=u),u},_createRenderer:function(a){return this.options.preferCanvas&&Co(a)||Io(a)}});var Ss=ca.extend({initialize:function(a,u){ca.prototype.initialize.call(this,this._boundsToLatLngs(a),u)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=_t(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function Td(a,u){return new Ss(a,u)}pa.create=nr,pa.pointsToPath=Nr,Er.geometryToLayer=bn,Er.coordsToLatLng=yl,Er.coordsToLatLngs=Eo,Er.latLngToCoords=vl,Er.latLngsToCoords=wo,Er.getFeature=qr,Er.asFeature=Tl,Yt.mergeOptions({boxZoom:!0});var zn=Yn.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){he(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$t(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),si(),ys(),this._startPoint=this._map.mouseEventToContainerPoint(a),Mt(document,{contextmenu:Ai,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=Qt("div","leaflet-zoom-box",this._container),St(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var u=new z(this._point,this._startPoint),d=u.getSize();ve(this._box,u.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&($t(this._box),ye(this._container,"leaflet-crosshair")),sn(),Vr(),he(document,{contextmenu:Ai,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var u=new gt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Yt.addInitHook("addHandler","boxZoom",zn),Yt.mergeOptions({doubleClickZoom:!0});var Sl=Yn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var u=this._map,d=u.getZoom(),_=u.options.zoomDelta,w=a.originalEvent.shiftKey?d-_:d+_;u.options.doubleClickZoom==="center"?u.setZoom(w):u.setZoomAround(a.containerPoint,w)}});Yt.addInitHook("addHandler","doubleClickZoom",Sl),Yt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ir=Yn.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new xi(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}St(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ye(this._map._container,"leaflet-grab"),ye(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=_t(this._map.options.maxBounds);this._offsetLimit=st(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var u=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(u),this._prunePositions(u)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,u){return a-(a-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;a.x<u.min.x&&(a.x=this._viscousLimit(a.x,u.min.x)),a.y<u.min.y&&(a.y=this._viscousLimit(a.y,u.min.y)),a.x>u.max.x&&(a.x=this._viscousLimit(a.x,u.max.x)),a.y>u.max.y&&(a.y=this._viscousLimit(a.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,u=Math.round(a/2),d=this._initialWorldOffset,_=this._draggable._newPos.x,w=(_-u+d)%a+u-d,R=(_+u+d)%a-u-d,M=Math.abs(w+d)<Math.abs(R+d)?w:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(a){var u=this._map,d=u.options,_=!d.inertia||a.noInertia||this._times.length<2;if(u.fire("dragend",a),_)u.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,M=d.easeLinearity,Z=w.multiplyBy(M/R),tt=Z.distanceTo([0,0]),ct=Math.min(d.inertiaMaxSpeed,tt),Tt=Z.multiplyBy(ct/tt),Lt=ct/(d.inertiaDeceleration*M),Zt=Tt.multiplyBy(-Lt/2).round();!Zt.x&&!Zt.y?u.fire("moveend"):(Zt=u._limitOffset(Zt,u.options.maxBounds),U(function(){u.panBy(Zt,{duration:Lt,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});Yt.addInitHook("addHandler","dragging",ir),Yt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Au=Yn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Mt(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),he(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,u=document.documentElement,d=a.scrollTop||u.scrollTop,_=a.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(_,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var u=this._panKeys={},d=this.keyCodes,_,w;for(_=0,w=d.left.length;_<w;_++)u[d.left[_]]=[-1*a,0];for(_=0,w=d.right.length;_<w;_++)u[d.right[_]]=[a,0];for(_=0,w=d.down.length;_<w;_++)u[d.down[_]]=[0,a];for(_=0,w=d.up.length;_<w;_++)u[d.up[_]]=[0,-1*a]},_setZoomDelta:function(a){var u=this._zoomKeys={},d=this.keyCodes,_,w;for(_=0,w=d.zoomIn.length;_<w;_++)u[d.zoomIn[_]]=a;for(_=0,w=d.zoomOut.length;_<w;_++)u[d.zoomOut[_]]=-a},_addHooks:function(){Mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){he(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var u=a.keyCode,d=this._map,_;if(u in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(_=this._panKeys[u],a.shiftKey&&(_=bt(_).multiplyBy(3)),d.options.maxBounds&&(_=d._limitOffset(bt(_),d.options.maxBounds)),d.options.worldCopyJump){var w=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(_)));d.panTo(w)}else d.panBy(_)}else if(u in this._zoomKeys)d.setZoom(d.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Ai(a)}}});Yt.addInitHook("addHandler","keyboard",Au),Yt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xo=Yn.extend({addHooks:function(){Mt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){he(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var u=an(a),d=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var _=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),_),Ai(a)},_performZoom:function(){var a=this._map,u=a.getZoom(),d=this._map.options.zoomSnap||0;a._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,R=d?Math.ceil(w/d)*d:w,M=a._limitZoom(u+(this._delta>0?R:-R))-u;this._delta=0,this._startTime=null,M&&(a.options.scrollWheelZoom==="center"?a.setZoom(u+M):a.setZoomAround(this._lastMousePos,u+M))}});Yt.addInitHook("addHandler","scrollWheelZoom",xo);var As=600;Yt.mergeOptions({tapHold:Ct.touchNative&&Ct.safari&&Ct.mobile,tapTolerance:15});var Al=Yn.extend({addHooks:function(){Mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){he(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var u=a.touches[0];this._startPos=this._newPos=new pt(u.clientX,u.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(Mt(document,"touchend",Me),Mt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),As),Mt(document,"touchend touchcancel contextmenu",this._cancel,this),Mt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){he(document,"touchend",Me),he(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),he(document,"touchend touchcancel contextmenu",this._cancel,this),he(document,"touchmove",this._onMove,this)},_onMove:function(a){var u=a.touches[0];this._newPos=new pt(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,u){var d=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});d._simulated=!0,u.target.dispatchEvent(d)}});Yt.addInitHook("addHandler","tapHold",Al),Yt.mergeOptions({touchZoom:Ct.touch,bounceAtZoomLimits:!0});var Ru=Yn.extend({addHooks:function(){St(this._map._container,"leaflet-touch-zoom"),Mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),he(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var u=this._map;if(!(!a.touches||a.touches.length!==2||u._animatingZoom||this._zooming)){var d=u.mouseEventToContainerPoint(a.touches[0]),_=u.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(d.add(_)._divideBy(2))),this._startDist=d.distanceTo(_),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Mt(document,"touchmove",this._onTouchMove,this),Mt(document,"touchend touchcancel",this._onTouchEnd,this),Me(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var u=this._map,d=u.mouseEventToContainerPoint(a.touches[0]),_=u.mouseEventToContainerPoint(a.touches[1]),w=d.distanceTo(_)/this._startDist;if(this._zoom=u.getScaleZoom(w,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&w<1||this._zoom>u.getMaxZoom()&&w>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var R=d._add(_)._divideBy(2)._subtract(this._centerPoint);if(w===1&&R.x===0&&R.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),q(this._animRequest);var M=m(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(M,this,!0),Me(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,q(this._animRequest),he(document,"touchmove",this._onTouchMove,this),he(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Yt.addInitHook("addHandler","touchZoom",Ru),Yt.BoxZoom=zn,Yt.DoubleClickZoom=Sl,Yt.Drag=ir,Yt.Keyboard=Au,Yt.ScrollWheelZoom=xo,Yt.TapHold=Al,Yt.TouchZoom=Ru,n.Bounds=z,n.Browser=Ct,n.CRS=Ht,n.Canvas=bl,n.Circle=_l,n.CircleMarker=ua,n.Class=oe,n.Control=En,n.DivIcon=eh,n.DivOverlay=Sn,n.DomEvent=Wi,n.DomUtil=zr,n.Draggable=xi,n.Evented=vt,n.FeatureGroup=Ji,n.GeoJSON=Er,n.GridLayer=ma,n.Handler=Yn,n.Icon=tr,n.ImageOverlay=fa,n.LatLng=wt,n.LatLngBounds=gt,n.Layer=Li,n.LayerGroup=la,n.LineUtil=oi,n.Map=Yt,n.Marker=To,n.Mixin=pl,n.Path=er,n.Point=pt,n.PolyUtil=Hr,n.Polygon=ca,n.Polyline=Tr,n.Popup=So,n.PosAnimation=_r,n.Projection=Oi,n.Rectangle=Ss,n.Renderer=Un,n.SVG=pa,n.SVGOverlay=wl,n.TileLayer=Zr,n.Tooltip=Ao,n.Transformation=Or,n.Util=k,n.VideoOverlay=Gr,n.bind=m,n.bounds=st,n.canvas=Co,n.circle=Xc,n.circleMarker=$c,n.control=Vn,n.divIcon=vd,n.extend=l,n.featureGroup=Yc,n.geoJSON=El,n.geoJson=bo,n.gridLayer=nh,n.icon=_o,n.imageOverlay=Wc,n.latLng=Et,n.latLngBounds=_t,n.layerGroup=pd,n.map=jr,n.marker=Qc,n.point=bt,n.polygon=_d,n.polyline=gd,n.popup=th,n.rectangle=Td,n.setOptions=W,n.stamp=v,n.svg=Io,n.svgOverlay=Jc,n.tileLayer=ui,n.tooltip=yd,n.transformation=zi,n.version=s,n.videoOverlay=da;var Cu=window.L;n.noConflict=function(){return window.L=Cu,this},window.L=n}))})(mc,mc.exports)),mc.exports}var Kc=jP();const HP=Yp(Kc);function l_(r,t,n){return Object.freeze({instance:r,context:t,container:n})}function u_(r,t){return t==null?function(s,l){const h=K.useRef(void 0);return h.current||(h.current=r(s,l)),h}:function(s,l){const h=K.useRef(void 0);h.current||(h.current=r(s,l));const m=K.useRef(s),{instance:y}=h.current;return K.useEffect(function(){m.current!==s&&(t(y,s,m.current),m.current=s)},[y,s,t]),h}}function qP(r,t){K.useEffect(function(){return(t.layerContainer??t.map).addLayer(r.instance),function(){t.layerContainer?.removeLayer(r.instance),t.map.removeLayer(r.instance)}},[t,r])}function sS(r){return function(n){const s=iS(),l=r(o_(n,s),s);return nS(s.map,n.attribution),rS(l.current,n.eventHandlers),qP(l.current,s),l}}function FP(r,t){const n=u_(r,t),s=sS(n);return kP(s)}function GP(r,t){const n=u_(r),s=zP(n,t);return VP(s)}function ZP(r,t){const n=u_(r,t),s=sS(n);return UP(s)}function KP(r,t,n){const{opacity:s,zIndex:l}=t;s!=null&&s!==n.opacity&&r.setOpacity(s),l!=null&&l!==n.zIndex&&r.setZIndex(l)}function YP({bounds:r,boundsOptions:t,center:n,children:s,className:l,id:h,placeholder:m,style:y,whenReady:v,zoom:T,...A},C){const[O]=K.useState({className:l,id:h,style:y}),[j,J]=K.useState(null),W=K.useRef(void 0);K.useImperativeHandle(C,()=>j?.map??null,[j]);const Q=K.useCallback(ut=>{if(ut!==null&&!W.current){const ft=new Kc.Map(ut,A);W.current=ft,n!=null&&T!=null?ft.setView(n,T):r!=null&&ft.fitBounds(r,t),v!=null&&ft.whenReady(v),J(MP(ft))}},[]);K.useEffect(()=>()=>{j?.map.remove()},[j]);const at=j?Ef.createElement(a_,{value:j},s):m??null;return Ef.createElement("div",{...O,ref:Q},at)}const QP=K.forwardRef(YP),$P=FP(function({position:t,...n},s){const l=new Kc.Marker(t,n);return l_(l,DP(s,{overlayContainer:l}))},function(t,n,s){n.position!==s.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==s.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==s.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==s.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==s.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),XP=GP(function(t,n){const s=new Kc.Popup(t,n.overlayContainer);return l_(s,n)},function(t,n,{position:s},l){K.useEffect(function(){const{instance:m}=t;function y(T){T.popup===m&&(m.update(),l(!0))}function v(T){T.popup===m&&l(!1)}return n.map.on({popupopen:y,popupclose:v}),n.overlayContainer==null?(s!=null&&m.setLatLng(s),m.openOn(n.map)):n.overlayContainer.bindPopup(m),function(){n.map.off({popupopen:y,popupclose:v}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(m)}},[t,n,l,s])}),WP=ZP(function({url:t,...n},s){const l=new Kc.TileLayer(t,o_(n,s));return l_(l,s)},function(t,n,s){KP(t,n,s);const{url:l}=n;l!=null&&l!==s.url&&t.setUrl(l)}),JP=new HP.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),tM=()=>{const[r,t]=K.useState([]),[n,s]=K.useState(!0);K.useEffect(()=>{const h=Yg(ld(Yo,"posts")),m=Xg(h,y=>{const v=[];y.forEach(T=>{const A=T.data();A.location&&A.location.lat&&A.location.lon&&v.push({...A,id:T.id})}),t(v),s(!1)});return()=>m()},[]);const l=[17.385,78.4867];return n?F.jsx("p",{children:"Loading map and posts..."}):F.jsxs("div",{className:"map-page-container",children:[F.jsxs("div",{className:"map-description",children:[F.jsx("h3",{children:"Live Community Reports"}),F.jsx("p",{children:"This map shows real-time alerts, requests, and offers from your community. Click a pin to see the details."})]}),F.jsxs(QP,{center:l,zoom:12,className:"map-container",children:[F.jsx(WP,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),r.map(h=>F.jsx($P,{position:[h.location.lat,h.location.lon],icon:JP,children:F.jsx(XP,{children:F.jsxs("div",{className:"map-popup",children:[F.jsxs("h4",{children:[h.category,": ",h.location.name]}),F.jsx("p",{children:h.content}),h.imageUrl&&F.jsx("img",{src:h.imageUrl,alt:"Post"}),F.jsxs("small",{children:["By: ",h.authorName]})]})})},h.id))]})]})},eM=r=>{let t=r.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");return t.includes("* ")&&(t=`<ul>${t.split("* ").slice(1).map(l=>`<li>${l.trim()}</li>`).join("")}</ul>`),t=t.replace(/\n/g,"<br />"),t},nM=()=>{const[r,t]=K.useState(!1),[n,s]=K.useState([{from:"ai",text:"Hi there! Im Raksha Mitra, your guide to monsoon safety. Lets make sure youre ready for anything the rain brings!"}]),[l,h]=K.useState(""),[m,y]=K.useState(!1),v=K.useRef(null);K.useEffect(()=>{v.current?.scrollIntoView({behavior:"smooth"})},[n,m]);const T=async A=>{if(A.preventDefault(),!l.trim())return;const C={from:"user",text:l.trim()};s(W=>[...W,C]),h(""),y(!0);const j="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=AIzaSyAEBTwTauYSjP0rmLtejUVoOIbHURa8Kc4",J="You are Raksha Mitra, a friendly and reassuring AI assistant for the VarshaRaksha app. Your purpose is to provide clear, simple, and practical advice on monsoon safety in India. Always be encouraging and helpful. Use markdown formatting (bolding for emphasis, and unordered lists for steps or items) to make your answers easy to read. Do not answer questions outside of this safety context.";try{const W=await fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:C.text}]}],systemInstruction:{parts:[{text:J}]}})});if(!W.ok)throw new Error("API request failed.");const ut={from:"ai",text:(await W.json()).candidates?.[0]?.content?.parts?.[0]?.text||"Sorry, I couldn't process that. Please try again."};s(ft=>[...ft,ut])}catch(W){console.error("Error calling Gemini API:",W);const Q={from:"ai",text:"Sorry, I'm having trouble connecting. Please check your connection and try again."};s(at=>[...at,Q])}finally{y(!1)}};return F.jsxs(F.Fragment,{children:[F.jsx("button",{className:"chatbot-fab",onClick:()=>t(!0),children:""}),r&&F.jsxs("div",{className:"chat-window",children:[F.jsxs("div",{className:"chat-header",children:[F.jsx("h3",{children:"Raksha Mitra"}),F.jsx("button",{onClick:()=>t(!1),children:""})]}),F.jsxs("div",{className:"chat-messages",children:[n.map((A,C)=>F.jsx("div",{className:`message ${A.from}`,children:A.from==="ai"?F.jsx("div",{dangerouslySetInnerHTML:{__html:eM(A.text)}}):A.text},C)),m&&F.jsxs("div",{className:"message ai typing",children:[F.jsx("span",{children:"."}),F.jsx("span",{children:"."}),F.jsx("span",{children:"."})]}),F.jsx("div",{ref:v})]}),F.jsxs("form",{className:"chat-input-form",onSubmit:T,children:[F.jsx("input",{type:"text",value:l,onChange:A=>h(A.target.value),placeholder:"Ask a safety question...",disabled:m}),F.jsx("button",{type:"submit",disabled:m,children:"Send"})]})]})]})};function iM(){const[r,t]=K.useState(null);K.useEffect(()=>{const s=AI(el,l=>{t(l)});return()=>s()},[]);const n=async()=>{try{await RI(el)}catch(s){console.error("Error signing out: ",s)}};return r?F.jsxs("div",{className:"container",children:[F.jsxs("header",{className:"app-header",children:[F.jsxs("div",{className:"logo-title",children:[F.jsx("img",{src:eS,alt:"VarshaRaksha Logo",className:"logo"}),F.jsx("h1",{children:"VarshaRaksha"})]}),F.jsxs("div",{className:"header-user-info",children:[F.jsxs("span",{children:["Welcome, ",r.displayName,"!"]}),F.jsx(Ql,{to:"/profile",className:"profile-link",children:"My Profile"}),F.jsx("button",{onClick:n,className:"auth-button sign-out-small",children:"Sign Out"})]})]}),F.jsxs("nav",{className:"main-nav",children:[F.jsx(Ql,{to:"/",children:"Community Feed"}),F.jsx(Ql,{to:"/official-info",children:"Official Info"}),F.jsx(Ql,{to:"/emergency-help",children:"Emergency Help"}),F.jsx(Ql,{to:"/map",children:"Live Map"})]}),F.jsx("main",{children:F.jsxs(w1,{children:[F.jsx(Yl,{path:"/",element:F.jsxs(F.Fragment,{children:[F.jsx(wP,{}),F.jsx(SP,{})]})}),F.jsx(Yl,{path:"/official-info",element:F.jsx(IP,{})}),F.jsx(Yl,{path:"/emergency-help",element:F.jsx(xP,{})}),F.jsx(Yl,{path:"/profile",element:F.jsx(NP,{})}),F.jsx(Yl,{path:"/map",element:F.jsx(tM,{})})]})}),F.jsx(nM,{})]}):F.jsxs("div",{className:"login-container",children:[F.jsx("header",{className:"login-header",children:F.jsx("h1",{children:"VarshaRaksha"})}),F.jsx(EP,{})]})}LA.createRoot(document.getElementById("root")).render(F.jsx(Ef.StrictMode,{children:F.jsx(G1,{basename:"/Varsha-Raksha/",children:F.jsx(iM,{})})}));
